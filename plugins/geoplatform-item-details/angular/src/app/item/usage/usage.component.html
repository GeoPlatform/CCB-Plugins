<div class="m-article">
    <div class="m-article__heading">
        <span class="fas"
            [ngClass]="{'fa-caret-down':isCollapsed,'fa-caret-up':!isCollapsed}"
            (click)="toggleCollapsed()">
        </span>

        Usage
    </div>

    <div class="m-article__desc" [ngClass]="{'is-hidden':!isCollapsed}">
        Expand to see usage statistics of this item
    </div>

    <div class="m-article__desc" [ngClass]="{'is-hidden':isCollapsed}">

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" *ngFor="let key of getTabKeys()">
                <a class="nav-link is-linkless"
                    id="{{key}}-tab" role="tab"
                    [ngClass]="{active:key===activeTab}"
                    (click)="changeTab(key)"
                    [attr.aria-controls]="key"
                    [attr.aria-selected]="tabs[key].status">
                    {{tabs[key].label}}
                </a>
            </li>
        </ul>
        <!-- Week Chart -->
        <div *ngIf="activeUsageChart == 'week'">
            {{weeklyChartState}}
            <div *ngIf="!weeklyChartState" class="m-message m-message--light">
                <span class="fas fa-spin fa-spinner"></span>
                Loading usage statistics...
            </div>
            <div *ngIf="weeklyChartState">
                <canvas baseChart #UsageChart width="800" height="400"
                    [datasets]="weeklyChartState.datasets"
                    [labels]="weeklyChartState.labels"
                    [options]="weeklyChartState.options"
                    [colors]="weeklyChartState.colors"
                    [legend]="weeklyChartState.legend"
                    [chartType]="weeklyChartState.chartType">
                </canvas>
            </div>
        </div>
        <!-- Month Chart -->
        <div *ngIf="activeUsageChart == 'month'">
            {{monthlyChartState}}
            <div *ngIf="!monthlyChartState" class="m-message m-message--light">
                <span class="fas fa-spin fa-spinner"></span>
                Loading usage statistics...
            </div>
            <div *ngIf="monthlyChartState">
                <canvas baseChart #UsageChart width="800" height="400"
                    [datasets]="monthlyChartState.datasets"
                    [labels]="monthlyChartState.labels"
                    [options]="monthlyChartState.options"
                    [colors]="monthlyChartState.colors"
                    [legend]="monthlyChartState.legend"
                    [chartType]="monthlyChartState.chartType">
                </canvas>
            </div>
        </div>
        <!-- Year Chart -->
        <div *ngIf="ctiveUsageChart == 'year'">
            {{yearlyChartState}}
            <div *ngIf="!yearlyChartState" class="m-message m-message--light">
                <span class="fas fa-spin fa-spinner"></span>
                Loading usage statistics...
            </div>
            <div *ngIf="yearlyChartState">
                <canvas baseChart #UsageChart width="800" height="400"
                    [datasets]="yearlyChartState.datasets"
                    [labels]="yearlyChartState.labels"
                    [options]="yearlyChartState.options"
                    [colors]="yearlyChartState.colors"
                    [legend]="yearlyChartState.legend"
                    [chartType]="yearlyChartState.chartType">
                </canvas>
            </div>
        </div>


        <!-- <div class="tab-content" id="myTabContent" style="width:100%">
            <div class="tab-pane"
                *ngFor="let key of getTabKeys()"
                [ngClass]="{active:key===activeTab}"
                role="tabpanel"
                [attr.aria-labelledby]="key+'-tab'">
                <div id="{{key}}_chart" style="width:100%"></div>
            </div>
        </div> -->

    </div>
</div>
