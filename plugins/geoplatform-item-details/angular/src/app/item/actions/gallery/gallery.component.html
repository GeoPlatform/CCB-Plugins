<button type="button"
    class="btn btn-secondary btn-block"
    title="Add this Resource to a Gallery"
    *ngIf="isSupported()"
    [disabled]="awaitingInput"
    (click)="promptForInput()">
    <span class="icon-gallery"></span>
    Add to Gallery
</button>
<div *ngIf="awaitingInput" class="m-action-prompt">
    <br>
    <div class="u-mg-bottom--sm"
        *ngIf="(keywords && keywords.length) || (totalSuggested > maxSuggested)">
        <div class="input-group-slick flex-1">
            <span class="gpicons search"></span>
            <input type="text" class="form-control" placeholder="Filter galleries"
                [(ngModel)]="keywords"
                (keyup.enter)="suggestGalleries(keywords)">
            <span class="fas fa-times" *ngIf="keywords && keywords.length"
                (click)="suggestGalleries(null)">
            </span>
        </div>
    </div>
    <div class="list-group">
        <div *ngIf="!suggested || !suggested.length" class="list-group-item">
            <em>No galleries found</em>
        </div>
        <a *ngFor="let gallery of suggested"
            class="list-group-item list-group-item-action"
            (click)="addToGallery(gallery)"
            title="Add {{type}} to this Gallery">
            <span class="icon-gallery"></span> {{gallery.label}}
        </a>
        <a title="Add to a new Gallery" class="list-group-item list-group-item-action"
            (click)="addToNewGallery()">
            <span class="fas fa-plus"></span> Add to a New Gallery
        </a>
        <a title="Abort adding to a gallery" class="list-group-item list-group-item-action"
            (click)="awaitingInput=false">
            <span class="fas fa-times"></span> Cancel
        </a>
    </div>
    <div *ngIf="error" class="m-message--error">
        <span class="gpicons exclamation-circle"></span>
        <strong>An Error Occurred</strong>
        <div>{{error.message}}</div>
    </div>
</div>
