(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"2SVd":function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},"4R65":function(e,t,n){!function(e){"use strict";var t=Object.freeze;function n(e){var t,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(t in r=arguments[n])e[t]=r[t];return e}Object.freeze=function(e){return e};var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function r(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var s=0;function o(e){return e._leaflet_id=e._leaflet_id||++s,e._leaflet_id}function a(e,t,n){var i,r,s,o;return o=function(){i=!1,r&&(s.apply(n,r),r=!1)},s=function(){i?r=arguments:(e.apply(n,arguments),setTimeout(o,t),i=!0)}}function l(e,t,n){var i=t[1],r=t[0],s=i-r;return e===i&&n?e:((e-r)%s+s)%s+r}function u(){return!1}function h(e,t){var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function c(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function d(e){return c(e).split(/\s+/)}function p(e,t){for(var n in e.hasOwnProperty("options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function f(e,t,n){var i=[];for(var r in e)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(t)),i})}var _=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var w=0;function x(e){var t=+new Date,n=Math.max(0,16-(t-w));return w=t+n,window.setTimeout(e,n)}var T=window.requestAnimationFrame||b("RequestAnimationFrame")||x,C=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function S(e,t,n){if(!n||T!==x)return T.call(window,r(e,t));e.call(t)}function E(e){e&&C.call(window,e)}var P=(Object.freeze||Object)({freeze:t,extend:n,create:i,bind:r,lastId:s,stamp:o,throttle:a,wrapNum:l,falseFn:u,formatNum:h,trim:c,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:_,indexOf:y,emptyImageUrl:v,requestFn:T,cancelFn:C,requestAnimFrame:S,cancelAnimFrame:E});function I(){}I.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=t.__super__=this.prototype,s=i(r);for(var o in s.constructor=t,t.prototype=s,this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(t[o]=this[o]);return e.statics&&(n(t,e.statics),delete e.statics),e.includes&&(function(e){if("undefined"!=typeof L&&L&&L.Mixin){e=_(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(e.includes),n.apply(null,[s].concat(e.includes)),delete e.includes),s.options&&(e.options=n(i(s.options),e.options)),n(s,e),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=s._initHooks.length;e<t;e++)s._initHooks[e].call(this)}},t},I.include=function(e){return n(this.prototype,e),this},I.mergeOptions=function(e){return n(this.prototype.options,e),this},I.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(e,t,n){if("object"==typeof e)for(var i in e)this._on(i,e[i],t);else for(var r=0,s=(e=d(e)).length;r<s;r++)this._on(e[r],t,n);return this},off:function(e,t,n){if(e)if("object"==typeof e)for(var i in e)this._off(i,e[i],t);else for(var r=0,s=(e=d(e)).length;r<s;r++)this._off(e[r],t,n);else delete this._events;return this},_on:function(e,t,n){this._events=this._events||{};var i=this._events[e];i||(this._events[e]=i=[]),n===this&&(n=void 0);for(var r={fn:t,ctx:n},s=i,o=0,a=s.length;o<a;o++)if(s[o].fn===t&&s[o].ctx===n)return;s.push(r)},_off:function(e,t,n){var i,r,s;if(this._events&&(i=this._events[e]))if(t){if(n===this&&(n=void 0),i)for(r=0,s=i.length;r<s;r++){var o=i[r];if(o.ctx===n&&o.fn===t)return o.fn=u,this._firingCount&&(this._events[e]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,s=i.length;r<s;r++)i[r].fn=u;delete this._events[e]}},fire:function(e,t,i){if(!this.listens(e,i))return this;var r=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var o=0,a=s.length;o<a;o++){var l=s[o];l.fn.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(e,t){var n=this._events&&this._events[e];if(n&&n.length)return!0;if(t)for(var i in this._eventParents)if(this._eventParents[i].listens(e,t))return!0;return!1},once:function(e,t,n){if("object"==typeof e){for(var i in e)this.once(i,e[i],t);return this}var s=r(function(){this.off(e,t,n).off(e,s,n)},this);return this.on(e,t,n).on(e,s,n)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var k=I.extend(A);function M(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var O=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function D(e,t,n){return e instanceof M?e:_(e)?new M(e[0],e[1]):null==e?e:"object"==typeof e&&"x"in e&&"y"in e?new M(e.x,e.y):new M(e,t,n)}function R(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function N(e,t){return!e||e instanceof R?e:new R(e,t)}function F(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function B(e,t){return e instanceof F?e:new F(e,t)}function U(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function j(e,t,n){return e instanceof U?e:_(e)&&"object"!=typeof e[0]?3===e.length?new U(e[0],e[1],e[2]):2===e.length?new U(e[0],e[1]):null:null==e?e:"object"==typeof e&&"lat"in e?new U(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new U(e,t,n)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(e){return this.clone()._add(D(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(D(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new M(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new M(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(e){var t=(e=D(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=D(e)).x===this.x&&e.y===this.y},contains:function(e){return e=D(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}},R.prototype={extend:function(e){return e=D(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"==typeof e[0]||e instanceof M?D(e):N(e))instanceof R?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=N(e);var t=this.min,n=this.max,i=e.min,r=e.max;return r.x>=t.x&&i.x<=n.x&&r.y>=t.y&&i.y<=n.y},overlaps:function(e){e=N(e);var t=this.min,n=this.max,i=e.min,r=e.max;return r.x>t.x&&i.x<n.x&&r.y>t.y&&i.y<n.y},isValid:function(){return!(!this.min||!this.max)}},F.prototype={extend:function(e){var t,n,i=this._southWest,r=this._northEast;if(e instanceof U)t=e,n=e;else{if(!(e instanceof F))return e?this.extend(j(e)||B(e)):this;if(n=e._northEast,!(t=e._southWest)||!n)return this}return i||r?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new U(t.lat,t.lng),this._northEast=new U(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,r=Math.abs(t.lng-n.lng)*e;return new F(new U(t.lat-i,t.lng-r),new U(n.lat+i,n.lng+r))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof U||"lat"in e?j(e):B(e);var t,n,i=this._southWest,r=this._northEast;return e instanceof F?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=r.lat&&t.lng>=i.lng&&n.lng<=r.lng},intersects:function(e){e=B(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast();return r.lat>=t.lat&&i.lat<=n.lat&&r.lng>=t.lng&&i.lng<=n.lng},overlaps:function(e){e=B(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast();return r.lat>t.lat&&i.lat<n.lat&&r.lng>t.lng&&i.lng<n.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},U.prototype={equals:function(e,t){return!!e&&(e=j(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+h(this.lat,e)+", "+h(this.lng,e)+")"},distanceTo:function(e){return q.distance(this,j(e))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return B([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var z,V={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new R(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new U(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,r=t.lng-n.lng;if(0===i&&0===r)return e;var s=e.getSouthWest(),o=e.getNorthEast();return new F(new U(s.lat-i,s.lng-r),new U(o.lat-i,o.lng-r))}},q=n({},V,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,r=t.lat*n,s=Math.sin((t.lat-e.lat)*n/2),o=Math.sin((t.lng-e.lng)*n/2),a=s*s+Math.cos(i)*Math.cos(r)*o*o,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),G={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),r=Math.sin(i*t);return new M(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new U((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(z=6378137*Math.PI,new R([-z,-z],[z,z]))};function Z(e,t,n,i){if(_(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=i}function H(e,t,n,i){return new Z(e,t,n,i)}Z.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return e.x=(t=t||1)*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return new M((e.x/(t=t||1)-this._b)/this._a,(e.y/t-this._d)/this._c)}};var W=n({},q,{code:"EPSG:3857",projection:G,transformation:function(){var e=.5/(Math.PI*G.R);return H(e,.5,-e,.5)}()}),$=n({},W,{code:"EPSG:900913"});function J(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Y(e,t){var n,i,r,s,o,a,l="";for(n=0,r=e.length;n<r;n++){for(i=0,s=(o=e[n]).length;i<s;i++)l+=(i?"L":"M")+(a=o[i]).x+" "+a.y;l+=t?Ee?"z":"x":""}return l||"M0 0"}var K=document.documentElement.style,Q="ActiveXObject"in window,X=Q&&!document.addEventListener,ee="msLaunchUri"in navigator&&!("documentMode"in document),te=Ie("webkit"),ne=Ie("android"),ie=Ie("android 2")||Ie("android 3"),re=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),se=ne&&Ie("Google")&&re<537&&!("AudioNode"in window),oe=!!window.opera,ae=Ie("chrome"),le=Ie("gecko")&&!te&&!oe&&!Q,ue=!ae&&Ie("safari"),he=Ie("phantom"),ce="OTransition"in K,de=0===navigator.platform.indexOf("Win"),pe=Q&&"transition"in K,fe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ie,me="MozPerspective"in K,ge=!window.L_DISABLE_3D&&(pe||fe||me)&&!ce&&!he,_e="undefined"!=typeof orientation||Ie("mobile"),ye=_e&&te,ve=_e&&fe,be=!window.PointerEvent&&window.MSPointerEvent,we=!(!window.PointerEvent&&!be),xe=!window.L_NO_TOUCH&&(we||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Te=_e&&oe,Ce=_e&&le,Le=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Se=!!document.createElement("canvas").getContext,Ee=!(!document.createElementNS||!J("svg").createSVGRect),Pe=!Ee&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(n){return!1}}();function Ie(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Ae=(Object.freeze||Object)({ie:Q,ielt9:X,edge:ee,webkit:te,android:ne,android23:ie,androidStock:se,opera:oe,chrome:ae,gecko:le,safari:ue,phantom:he,opera12:ce,win:de,ie3d:pe,webkit3d:fe,gecko3d:me,any3d:ge,mobile:_e,mobileWebkit:ye,mobileWebkit3d:ve,msPointer:be,pointer:we,touch:xe,mobileOpera:Te,mobileGecko:Ce,retina:Le,canvas:Se,svg:Ee,vml:Pe}),ke=be?"MSPointerDown":"pointerdown",Me=be?"MSPointerMove":"pointermove",Oe=be?"MSPointerUp":"pointerup",De=be?"MSPointerCancel":"pointercancel",Re=["INPUT","SELECT","OPTION"],Ne={},Fe=!1,Be=0;function Ue(e){Ne[e.pointerId]=e,Be++}function je(e){Ne[e.pointerId]&&(Ne[e.pointerId]=e)}function ze(e){delete Ne[e.pointerId],Be--}function Ve(e,t){for(var n in e.touches=[],Ne)e.touches.push(Ne[n]);e.changedTouches=[e],t(e)}var qe=be?"MSPointerDown":we?"pointerdown":"touchstart",Ge=be?"MSPointerUp":we?"pointerup":"touchend",Ze="_leaflet_";function He(e,t,n){var i,r,s=!1,o=250;function a(e){var t;if(we){if(!ee||"mouse"===e.pointerType)return;t=Be}else t=e.touches.length;if(!(t>1)){var n=Date.now(),a=n-(i||n);r=e.touches?e.touches[0]:e,s=a>0&&a<=o,i=n}}function l(e){if(s&&!r.cancelBubble){if(we){if(!ee||"mouse"===e.pointerType)return;var n,o,a={};for(o in r)a[o]=(n=r[o])&&n.bind?n.bind(r):n;r=a}r.type="dblclick",t(r),i=null}}return e[Ze+qe+n]=a,e[Ze+Ge+n]=l,e[Ze+"dblclick"+n]=t,e.addEventListener(qe,a,!1),e.addEventListener(Ge,l,!1),e.addEventListener("dblclick",t,!1),this}function We(e,t){var n=e[Ze+Ge+t],i=e[Ze+"dblclick"+t];return e.removeEventListener(qe,e[Ze+qe+t],!1),e.removeEventListener(Ge,n,!1),ee||e.removeEventListener("dblclick",i,!1),this}var $e,Je,Ye,Ke,Qe,Xe=mt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),et=mt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tt="webkitTransition"===et||"OTransition"===et?et+"End":"transitionend";function nt(e){return"string"==typeof e?document.getElementById(e):e}function it(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n}function rt(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function st(e){var t=e.parentNode;t&&t.removeChild(e)}function ot(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function at(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function lt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function ut(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=pt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function ht(e,t){if(void 0!==e.classList)for(var n=d(t),i=0,r=n.length;i<r;i++)e.classList.add(n[i]);else if(!ut(e,t)){var s=pt(e);dt(e,(s?s+" ":"")+t)}}function ct(e,t){void 0!==e.classList?e.classList.remove(t):dt(e,c((" "+pt(e)+" ").replace(" "+t+" "," ")))}function dt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function pt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function ft(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&function(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(r){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}(e,t)}function mt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function gt(e,t,n){var i=t||new M(0,0);e.style[Xe]=(pe?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function _t(e,t){e._leaflet_pos=t,ge?gt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function yt(e){return e._leaflet_pos||new M(0,0)}if("onselectstart"in document)$e=function(){Et(window,"selectstart",Rt)},Je=function(){It(window,"selectstart",Rt)};else{var vt=mt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$e=function(){if(vt){var e=document.documentElement.style;Ye=e[vt],e[vt]="none"}},Je=function(){vt&&(document.documentElement.style[vt]=Ye,Ye=void 0)}}function bt(){Et(window,"dragstart",Rt)}function wt(){It(window,"dragstart",Rt)}function xt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Tt(),Ke=e,Qe=e.style.outline,e.style.outline="none",Et(window,"keydown",Tt))}function Tt(){Ke&&(Ke.style.outline=Qe,Ke=void 0,Qe=void 0,It(window,"keydown",Tt))}function Ct(e){do{e=e.parentNode}while(!(e.offsetWidth&&e.offsetHeight||e===document.body));return e}function Lt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var St=(Object.freeze||Object)({TRANSFORM:Xe,TRANSITION:et,TRANSITION_END:tt,get:nt,getStyle:it,create:rt,remove:st,empty:ot,toFront:at,toBack:lt,hasClass:ut,addClass:ht,removeClass:ct,setClass:dt,getClass:pt,setOpacity:ft,testProp:mt,setTransform:gt,setPosition:_t,getPosition:yt,disableTextSelection:$e,enableTextSelection:Je,disableImageDrag:bt,enableImageDrag:wt,preventOutline:xt,restoreOutline:Tt,getSizedParentNode:Ct,getScale:Lt});function Et(e,t,n,i){if("object"==typeof t)for(var r in t)At(e,r,t[r],n);else for(var s=0,o=(t=d(t)).length;s<o;s++)At(e,t[s],n,i);return this}var Pt="_leaflet_events";function It(e,t,n,i){if("object"==typeof t)for(var r in t)kt(e,r,t[r],n);else if(t)for(var s=0,o=(t=d(t)).length;s<o;s++)kt(e,t[s],n,i);else{for(var a in e[Pt])kt(e,a,e[Pt][a]);delete e[Pt]}return this}function At(e,t,n,i){var s=t+o(n)+(i?"_"+o(i):"");if(e[Pt]&&e[Pt][s])return this;var a=function(t){return n.call(i||e,t||window.event)},l=a;we&&0===t.indexOf("touch")?function(e,t,n,i){"touchstart"===t?function(e,t,n){var i=r(function(e){if("mouse"!==e.pointerType&&e.MSPOINTER_TYPE_MOUSE&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){if(!(Re.indexOf(e.target.tagName)<0))return;Rt(e)}Ve(e,t)});e["_leaflet_touchstart"+n]=i,e.addEventListener(ke,i,!1),Fe||(document.documentElement.addEventListener(ke,Ue,!0),document.documentElement.addEventListener(Me,je,!0),document.documentElement.addEventListener(Oe,ze,!0),document.documentElement.addEventListener(De,ze,!0),Fe=!0)}(e,n,i):"touchmove"===t?function(e,t,n){var i=function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&Ve(e,t)};e["_leaflet_touchmove"+n]=i,e.addEventListener(Me,i,!1)}(e,n,i):"touchend"===t&&function(e,t,n){var i=function(e){Ve(e,t)};e["_leaflet_touchend"+n]=i,e.addEventListener(Oe,i,!1),e.addEventListener(De,i,!1)}(e,n,i)}(e,t,a,s):!xe||"dblclick"!==t||!He||we&&ae?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",a,!1):"mouseenter"===t||"mouseleave"===t?e.addEventListener("mouseenter"===t?"mouseover":"mouseout",a=function(t){t=t||window.event,Gt(e,t)&&l(t)},!1):("click"===t&&ne&&(a=function(e){!function(e,t){var n=e.timeStamp||e.originalEvent&&e.originalEvent.timeStamp,i=jt&&n-jt;i&&i>100&&i<500||e.target._simulatedClick&&!e._simulated?Nt(e):(jt=n,t(e))}(e,l)}),e.addEventListener(t,a,!1)):"attachEvent"in e&&e.attachEvent("on"+t,a):He(e,a,s),e[Pt]=e[Pt]||{},e[Pt][s]=a}function kt(e,t,n,i){var r=t+o(n)+(i?"_"+o(i):""),s=e[Pt]&&e[Pt][r];if(!s)return this;we&&0===t.indexOf("touch")?function(e,t,n){var i=e["_leaflet_"+t+n];"touchstart"===t?e.removeEventListener(ke,i,!1):"touchmove"===t?e.removeEventListener(Me,i,!1):"touchend"===t&&(e.removeEventListener(Oe,i,!1),e.removeEventListener(De,i,!1))}(e,t,r):!xe||"dblclick"!==t||!We||we&&ae?"removeEventListener"in e?e.removeEventListener("mousewheel"===t?"onwheel"in e?"wheel":"mousewheel":"mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,s,!1):"detachEvent"in e&&e.detachEvent("on"+t,s):We(e,r),e[Pt][r]=null}function Mt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,qt(e),this}function Ot(e){return At(e,"mousewheel",Mt),this}function Dt(e){return Et(e,"mousedown touchstart dblclick",Mt),At(e,"click",Vt),this}function Rt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Nt(e){return Rt(e),Mt(e),this}function Ft(e,t){if(!t)return new M(e.clientX,e.clientY);var n=Lt(t),i=n.boundingClientRect;return new M((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var Bt=de&&ae?2*window.devicePixelRatio:le?window.devicePixelRatio:1;function Ut(e){return ee?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Bt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}var jt,zt={};function Vt(e){zt[e.type]=!0}function qt(e){var t=zt[e.type];return zt[e.type]=!1,t}function Gt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e}var Zt=(Object.freeze||Object)({on:Et,off:It,stopPropagation:Mt,disableScrollPropagation:Ot,disableClickPropagation:Dt,preventDefault:Rt,stop:Nt,getMousePosition:Ft,getWheelDelta:Ut,fakeStop:Vt,skipped:qt,isExternalTarget:Gt,addListener:Et,removeListener:It}),Ht=k.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=yt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),_t(this._el,n),this.fire("step")},_complete:function(){E(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),Wt=k.extend({options:{crs:W,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(j(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=et&&ge&&!Te&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Et(this._proxy,tt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(j(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e=e||(ge?this.options.zoomDelta:1)),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e=e||(ge?this.options.zoomDelta:1)),t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),r=this.getSize().divideBy(2),s=(e instanceof M?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/i),o=this.containerPointToLatLng(r.add(s));return this.setView(o,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var n=D(t.paddingTopLeft||t.padding||[0,0]),i=D(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,n.add(i));if((r="number"==typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0)return{center:e.getCenter(),zoom:r};var s=i.subtract(n).divideBy(2),o=this.project(e.getSouthWest(),r),a=this.project(e.getNorthEast(),r);return{center:this.unproject(o.add(a).divideBy(2).add(s),r),zoom:r}},fitBounds:function(e,t){if(!(e=B(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=D(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ht,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){ht(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!ge)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),r=this.project(e),s=this.getSize(),o=this._zoom;e=j(e),t=void 0===t?o:t;var a=Math.max(s.x,s.y),l=a*this.getZoomScale(o,t),u=r.distanceTo(i)||1,h=2.0164;function c(e){var t=(l*l-a*a+(e?-1:1)*h*h*u*u)/(2*(e?l:a)*h*u),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function d(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}var f=c(0),m=Date.now(),g=(c(1)-f)/1.42,_=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),(function n(){var s=(Date.now()-m)/_,l=function(e){return 1-Math.pow(1-e,1.5)}(s)*g;s<=1?(this._flyToFrame=S(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(function(e){return a*(p(f)*(d(t=f+1.42*e)/p(t))-d(f))/h;var t}(l)/u)),o),this.getScaleZoom(a/function(e){return a*(p(f)/p(f+1.42*e))}(l),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}).call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return(e=B(e)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,B(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=D((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=D(t.paddingBottomRight||t.padding||[0,0]),r=this.getCenter(),s=this.project(r),o=this.project(e),a=this.getPixelBounds(),l=a.getSize().divideBy(2),u=N([a.min.add(n),a.max.subtract(i)]);if(!u.contains(o)){this._enforcingBounds=!0;var h=s.subtract(o),c=D(o.x+h.x,o.y+h.y);(o.x<u.min.x||o.x>u.max.x)&&(c.x=s.x-h.x,h.x>0?c.x+=l.x-n.x:c.x-=l.x-i.x),(o.y<u.min.y||o.y>u.max.y)&&(c.y=s.y-h.y,h.y>0?c.y+=l.y-n.y:c.y-=l.y-i.y),this.panTo(this.unproject(c),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),s=t.divideBy(2).round(),o=i.divideBy(2).round(),a=s.subtract(o);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=new U(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(t,i.maxZoom?Math.min(r,i.maxZoom):r)}var s={latlng:t,bounds:n,timestamp:e.timestamp};for(var o in e.coords)"number"==typeof e.coords[o]&&(s[o]=e.coords[o]);this.fire("locationfound",s)},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),st(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(E(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)st(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=rt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new F(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=B(e),n=D(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),s=this.getMaxZoom(),o=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(n),u=N(this.project(a,i),this.project(o,i)).getSize(),h=ge?this.options.zoomSnap:1,c=l.x/u.x,d=l.y/u.y,p=t?Math.max(c,d):Math.min(c,d);return i=this.getScaleZoom(p,i),h&&(i=Math.round(i/(h/100))*(h/100),i=t?Math.ceil(i/h)*h:Math.floor(i/h)*h),Math.max(r,Math.min(s,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new R(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs,i=n.zoom(e*n.scale(t=void 0===t?this._zoom:t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(j(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(D(e),t)},layerPointToLatLng:function(e){var t=D(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(j(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(j(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(j(e),j(t))},containerPointToLayerPoint:function(e){return D(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return D(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(D(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(e)))},mouseEventToContainerPoint:function(e){return Ft(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=nt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Et(t,"scroll",this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&ge,ht(e,"leaflet-container"+(xe?" leaflet-touch":"")+(Le?" leaflet-retina":"")+(X?" leaflet-oldie":"")+(ue?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=it(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_t(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ht(e.markerPane,"leaflet-zoom-hide"),ht(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){_t(this._mapPane,new M(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var i=this._zoom!==t;this._moveStart(i,!1)._move(e,t)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n){void 0===t&&(t=this._zoom);var i=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return E(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){_t(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?It:Et;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),ge&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){E(this._resizeRequest),this._resizeRequest=S(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,i=[],r="mouseout"===t||"mouseover"===t,s=e.target||e.srcElement,a=!1;s;){if((n=this._targets[o(s)])&&("click"===t||"preclick"===t)&&!e._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(r&&!Gt(s,e))break;if(i.push(n),r)break}if(s===this._container)break;s=s.parentNode}return i.length||a||r||!Gt(s,e)||(i=[this]),i},_handleDOMEvent:function(e){if(this._loaded&&!qt(e)){var t=e.type;"mousedown"!==t&&"keypress"!==t||xt(e.target||e.srcElement),this._fireDOMEvent(e,t)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type){var r=n({},e);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!e._stopped&&(i=(i||[]).concat(this._findEventTargets(e,t))).length){var s=i[0];"contextmenu"===t&&s.listens(t,!0)&&Rt(e);var o={originalEvent:e};if("keypress"!==e.type){var a=s.getLatLng&&(!s._radius||s._radius<=10);o.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(e),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=a?s.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(t,o,!0),o.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return yt(this._mapPane)||new M(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return N([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),r=this.getSize().divideBy(2),s=new R(i.subtract(r),i.add(r)),o=this._getBoundsOffset(s,n,t);return o.round().equals([0,0])?e:this.unproject(i.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new R(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=N(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),r=i.min.subtract(e.min),s=i.max.subtract(e.max);return new M(this._rebound(r.x,-s.x),this._rebound(r.y,-s.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=ge?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ct(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n)||(this.panBy(n,t),0))},_createAnimProxy:function(){var e=this._proxy=rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=Xe,n=this._proxy.style[t];gt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),t=this.getZoom();gt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){st(this._proxy),delete this._proxy},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(S(function(){this._moveStart(!0,!1)._animateZoom(e,t,!0)},this),0))},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,ht(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ct(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),S(function(){this._moveEnd(!0)},this))}}),$t=I.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return ht(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this},remove:function(){return this._map?(st(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Jt=function(e){return new $t(e)};Wt.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=rt("div",t+"control-container",this._container);function i(i,r){e[i+r]=rt("div",t+i+" "+t+r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)st(this._controlCorners[e]);st(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yt=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return $t.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){ht(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(ht(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):ct(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ct(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=rt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Dt(t),Ot(t);var i=this._section=rt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),ne||Et(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=rt("a",e+"-toggle",t);r.href="#",r.title="Layers",xe?(Et(r,"click",Nt),Et(r,"click",this.expand,this)):Et(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=rt("div",e+"-base",i),this._separator=rt("div",e+"-separator",i),this._overlaysList=rt("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ot(this._baseLayersList),ot(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,r=0;for(n=0;n<this._layers.length;n++)this._addItem(i=this._layers[n]),t=t||i.overlay,e=e||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(e=e&&r>1)?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers",i),this._layerControlInputs.push(t),t.layerId=o(e.layer),Et(t,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var s=document.createElement("div");return n.appendChild(s),s.appendChild(t),s.appendChild(r),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var e,t,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var s=n.length-1;s>=0;s--)t=this._getLayer((e=n[s]).layerId).layer,e.checked?i.push(t):e.checked||r.push(t);for(s=0;s<r.length;s++)this._map.hasLayer(r[s])&&this._map.removeLayer(r[s]);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])||this._map.addLayer(i[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=this._getLayer((e=n[r]).layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Kt=$t.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=rt("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,r){var s=rt("a",n,i);return s.innerHTML=e,s.href="#",s.title=t,s.setAttribute("role","button"),s.setAttribute("aria-label",t),Dt(s),Et(s,"click",Nt),Et(s,"click",r,this),Et(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";ct(this._zoomInButton,t),ct(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&ht(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&ht(this._zoomInButton,t)}});Wt.mergeOptions({zoomControl:!0}),Wt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kt,this.addControl(this.zoomControl))});var Qt=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t=rt("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",t),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),t},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=rt("div",t,n)),e.imperial&&(this._iScale=rt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e);this._updateScale(this._mScale,t<1e3?t+" m":t/1e3+" km",t/e)},_updateImperial:function(e){var t,n,i,r=3.2808399*e;r>5280?(n=this._getRoundNum(t=r/5280),this._updateScale(this._iScale,n+" mi",n/t)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Xt=$t.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=rt("div","leaflet-control-attribution"),Dt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}});Wt.mergeOptions({attributionControl:!0}),Wt.addInitHook(function(){this.options.attributionControl&&(new Xt).addTo(this)}),$t.Layers=Yt,$t.Zoom=Kt,$t.Scale=Qt,$t.Attribution=Xt,Jt.layers=function(e,t,n){return new Yt(e,t,n)},Jt.zoom=function(e){return new Kt(e)},Jt.scale=function(e){return new Qt(e)},Jt.attribution=function(e){return new Xt(e)};var en=I.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});en.addTo=function(e,t){return e.addHandler(t,this),this};var tn,nn={Events:A},rn=xe?"touchstart mousedown":"mousedown",sn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},on={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},an=k.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){p(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Et(this._dragStartTarget,rn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(an._dragging===this&&this.finishDrag(),It(this._dragStartTarget,rn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!e._simulated&&this._enabled&&(this._moved=!1,!ut(this._element,"leaflet-zoom-anim")&&!(an._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(an._dragging=this,this._preventOutline&&xt(this._element),bt(),$e(),this._moving)))){this.fire("down");var t=e.touches?e.touches[0]:e,n=Ct(this._element);this._startPoint=new M(t.clientX,t.clientY),this._parentScale=Lt(n),Et(document,on[e.type],this._onMove,this),Et(document,sn[e.type],this._onUp,this)}},_onMove:function(e){if(!e._simulated&&this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new M(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Rt(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=yt(this._element).subtract(n),ht(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ht(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,E(this._animRequest),this._lastEvent=e,this._animRequest=S(this._updatePosition,this,!0)))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),_t(this._element,this._newPos),this.fire("drag",e)},_onUp:function(e){!e._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var e in ct(document.body,"leaflet-dragging"),this._lastTarget&&(ct(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),on)It(document,on[e],this._onMove,this),It(document,sn[e],this._onUp,this);wt(),Je(),this._moved&&this._moving&&(E(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,an._dragging=!1}});function ln(e,t){if(!t||!e.length)return e.slice();var n=t*t;return function(e,t){var n=e.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function e(t,n,i,r,s){var o,a,l,u=0;for(a=r+1;a<=s-1;a++)(l=pn(t[a],t[r],t[s],!0))>u&&(o=a,u=l);u>i&&(n[o]=1,e(t,n,i,r,o),e(t,n,i,o,s))}(e,i,t,0,n-1);var r,s=[];for(r=0;r<n;r++)i[r]&&s.push(e[r]);return s}(e=function(e,t){for(var n=[e[0]],i=1,r=0,s=e.length;i<s;i++)(l=(a=e[r]).x-(o=e[i]).x)*l+(u=a.y-o.y)*u>t&&(n.push(e[i]),r=i);var o,a,l,u;return r<s-1&&n.push(e[s-1]),n}(e,n),n)}function un(e,t,n){return Math.sqrt(pn(e,t,n,!0))}function hn(e,t,n,i,r){var s,o,a,l=i?tn:dn(e,n),u=dn(t,n);for(tn=u;;){if(!(l|u))return[e,t];if(l&u)return!1;a=dn(o=cn(e,t,s=l||u,n,r),n),s===l?(e=o,l=a):(t=o,u=a)}}function cn(e,t,n,i,r){var s,o,a=t.x-e.x,l=t.y-e.y,u=i.min,h=i.max;return 8&n?(s=e.x+a*(h.y-e.y)/l,o=h.y):4&n?(s=e.x+a*(u.y-e.y)/l,o=u.y):2&n?(s=h.x,o=e.y+l*(h.x-e.x)/a):1&n&&(s=u.x,o=e.y+l*(u.x-e.x)/a),new M(s,o,r)}function dn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function pn(e,t,n,i){var r,s=t.x,o=t.y,a=n.x-s,l=n.y-o,u=a*a+l*l;return u>0&&((r=((e.x-s)*a+(e.y-o)*l)/u)>1?(s=n.x,o=n.y):r>0&&(s+=a*r,o+=l*r)),a=e.x-s,l=e.y-o,i?a*a+l*l:new M(s,o)}function fn(e){return!_(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function mn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fn(e)}var gn=(Object.freeze||Object)({simplify:ln,pointToSegmentDistance:un,closestPointOnSegment:function(e,t,n){return pn(e,t,n)},clipSegment:hn,_getEdgeIntersection:cn,_getBitCode:dn,_sqClosestPointOnSegment:pn,isFlat:fn,_flat:mn});function _n(e,t,n){var i,r,s,o,a,l,u,h,c,d=[1,4,2,8];for(r=0,u=e.length;r<u;r++)e[r]._code=dn(e[r],t);for(o=0;o<4;o++){for(h=d[o],i=[],r=0,s=(u=e.length)-1;r<u;s=r++)l=e[s],(a=e[r])._code&h?l._code&h||((c=cn(l,a,h,t,n))._code=dn(c,t),i.push(c)):(l._code&h&&((c=cn(l,a,h,t,n))._code=dn(c,t),i.push(c)),i.push(a));e=i}return e}var yn=(Object.freeze||Object)({clipPolygon:_n}),vn={project:function(e){return new M(e.lng,e.lat)},unproject:function(e){return new U(e.y,e.x)},bounds:new R([-180,-90],[180,90])},bn={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,r=this.R_MINOR/n,s=Math.sqrt(1-r*r),o=s*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-o)/(1+o),s/2);return i=-n*Math.log(Math.max(a,1e-10)),new M(e.lng*t*n,i)},unproject:function(e){for(var t,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,s=Math.sqrt(1-r*r),o=Math.exp(-e.y/i),a=Math.PI/2-2*Math.atan(o),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)t=s*Math.sin(a),t=Math.pow((1-t)/(1+t),s/2),a+=u=Math.PI/2-2*Math.atan(o*t)-a;return new U(a*n,e.x*n/i)}},wn=(Object.freeze||Object)({LonLat:vn,Mercator:bn,SphericalMercator:G}),xn=n({},q,{code:"EPSG:3395",projection:bn,transformation:function(){var e=.5/(Math.PI*bn.R);return H(e,.5,-e,.5)}()}),Tn=n({},q,{code:"EPSG:4326",projection:vn,transformation:H(1/180,1,-1/180,.5)}),Cn=n({},V,{projection:vn,transformation:H(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});V.Earth=q,V.EPSG3395=xn,V.EPSG3857=W,V.EPSG900913=$,V.EPSG4326=Tn,V.Simple=Cn;var Ln=k.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.getAttribution&&t.attributionControl&&t.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),t.fire("layeradd",{layer:this})}}});Wt.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=o(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&o(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?_(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){!isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),t=void 0===r.maxZoom?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Sn=Ln.extend({initialize:function(e,t){var n,i;if(p(this,t),this._layers={},e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o(e)}}),En=Sn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Sn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Sn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new F;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Pn=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];"number"==typeof i&&(i=[i,i]);var r=D(i),s=D("shadow"===t&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),s&&(e.style.marginLeft=-s.x+"px",e.style.marginTop=-s.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Le&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),In=Pn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return In.imagePath||(In.imagePath=this._detectIconPath()),(this.options.imagePath||In.imagePath)+Pn.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=rt("div","leaflet-default-icon-path",document.body),t=it(e,"background-image")||it(e,"backgroundImage");return document.body.removeChild(e),null===t||0!==t.indexOf("url")?"":t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),An=en.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new an(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ht(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ct(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,s=yt(t._icon),o=n.getPixelBounds(),a=n.getPixelOrigin(),l=N(o.min._subtract(a).add(r),o.max._subtract(a).subtract(r));if(!l.contains(s)){var u=D((Math.max(l.max.x,s.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(i);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),_t(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=S(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(E(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=yt(t._icon),r=t._map.layerPointToLatLng(i);n&&_t(n,i),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){E(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),kn=Ln.extend({options:{icon:new In,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=j(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=j(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),ht(n,t),e.keyboard&&(n.tabIndex="0"),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=e.icon.createShadow(this._shadow),s=!1;r!==this._shadow&&(this._removeShadow(),s=!0),r&&(ht(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&s&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),st(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&st(this._shadow),this._shadow=null},_setPos:function(e){_t(this._icon,e),this._shadow&&_t(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(ht(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),An)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new An(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;ft(this._icon,e),this._shadow&&ft(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Mn=Ln.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),On=Mn.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=j(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=j(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Mn.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new R(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Dn=On.extend({initialize:function(e,t,i){if("number"==typeof t&&(t=n({},i,{radius:t})),p(this,t),this._latlng=j(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Mn.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===q.distance){var r=Math.PI/180,s=this._mRadius/q.R/r,o=n.project([t+s,e]),a=n.project([t-s,e]),l=o.add(a).divideBy(2),u=n.unproject(l).lat,h=Math.acos((Math.cos(s*r)-Math.sin(t*r)*Math.sin(u*r))/(Math.cos(t*r)*Math.cos(u*r)))/r;(isNaN(h)||0===h)&&(h=s/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-n.project([u,e-h]).x,this._radiusY=l.y-o.y}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}}),Rn=Mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,i=1/0,r=null,s=pn,o=0,a=this._parts.length;o<a;o++)for(var l=this._parts[o],u=1,h=l.length;u<h;u++){var c=s(e,t=l[u-1],n=l[u],!0);c<i&&(i=c,r=s(e,t,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,n,i,r,s,o,a=this._rings[0],l=a.length;if(!l)return null;for(e=0,t=0;e<l-1;e++)t+=a[e].distanceTo(a[e+1])/2;if(0===t)return this._map.layerPointToLatLng(a[0]);for(e=0,i=0;e<l-1;e++)if((i+=n=(r=a[e]).distanceTo(s=a[e+1]))>t)return this._map.layerPointToLatLng([s.x-(o=(i-t)/n)*(s.x-r.x),s.y-o*(s.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=j(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new F,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return fn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=fn(e),i=0,r=e.length;i<r;i++)n?(t[i]=j(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e);var t=this._clickTolerance(),n=new M(t,t);this._bounds.isValid()&&e.isValid()&&(e.min._subtract(n),e.max._add(n),this._pxBounds=e)},_projectLatlngs:function(e,t,n){var i,r,s=e.length;if(e[0]instanceof U){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(e[i]),n.extend(r[i]);t.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(e[i],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,i,r,s,o,a,l=this._parts;for(t=0,i=0,r=this._rings.length;t<r;t++)for(n=0,s=(a=this._rings[t]).length;n<s-1;n++)(o=hn(a[n],a[n+1],e,n,!0))&&(l[i]=l[i]||[],l[i].push(o[0]),o[1]===a[n+1]&&n!==s-2||(l[i].push(o[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=ln(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,r,s,o,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,s=this._parts.length;n<s;n++)for(i=0,r=(o=(a=this._parts[n]).length)-1;i<o;r=i++)if((t||0!==i)&&un(e,a[r],a[i])<=l)return!0;return!1}});Rn._flat=mn;var Nn=Rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,n,i,r,s,o,a,l=this._rings[0],u=l.length;if(!u)return null;for(s=o=a=0,e=0,t=u-1;e<u;t=e++)o+=((n=l[e]).x+(i=l[t]).x)*(r=n.y*i.x-i.y*n.x),a+=(n.y+i.y)*r,s+=3*r;return this._map.layerPointToLatLng(0===s?l[0]:[o/s,a/s])},_convertLatLngs:function(e){var t=Rn.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof U&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){Rn.prototype._setLatLngs.call(this,e),fn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new M(t,t);if(e=new R(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,s=this._rings.length;r<s;r++)(i=_n(this._rings[r],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,i,r,s,o,a,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,a=this._parts.length;r<a;r++)for(s=0,o=(l=(t=this._parts[r]).length)-1;s<l;o=s++)(n=t[s]).y>e.y!=(i=t[o]).y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||Rn.prototype._containsPoint.call(this,e,!0)}}),Fn=En.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,r=_(e)?e:e.features;if(r){for(t=0,n=r.length;t<n;t++)((i=r[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var s=this.options;if(s.filter&&!s.filter(e))return this;var o=Bn(e,s);return o?(o.feature=Gn(e),o.defaultOptions=o.options,this.resetStyle(o),s.onEachFeature&&s.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}});function Bn(e,t){var n,i,r,s,o="Feature"===e.type?e.geometry:e,a=o?o.coordinates:null,l=[],u=t&&t.pointToLayer,h=t&&t.coordsToLatLng||Un;if(!a&&!o)return null;switch(o.type){case"Point":return n=h(a),u?u(e,n):new kn(n);case"MultiPoint":for(r=0,s=a.length;r<s;r++)n=h(a[r]),l.push(u?u(e,n):new kn(n));return new En(l);case"LineString":case"MultiLineString":return i=jn(a,"LineString"===o.type?0:1,h),new Rn(i,t);case"Polygon":case"MultiPolygon":return i=jn(a,"Polygon"===o.type?1:2,h),new Nn(i,t);case"GeometryCollection":for(r=0,s=o.geometries.length;r<s;r++){var c=Bn({geometry:o.geometries[r],type:"Feature",properties:e.properties},t);c&&l.push(c)}return new En(l);default:throw new Error("Invalid GeoJSON object.")}}function Un(e){return new U(e[1],e[0],e[2])}function jn(e,t,n){for(var i,r=[],s=0,o=e.length;s<o;s++)i=t?jn(e[s],t-1,n):(n||Un)(e[s]),r.push(i);return r}function zn(e,t){return t="number"==typeof t?t:6,void 0!==e.alt?[h(e.lng,t),h(e.lat,t),h(e.alt,t)]:[h(e.lng,t),h(e.lat,t)]}function Vn(e,t,n,i){for(var r=[],s=0,o=e.length;s<o;s++)r.push(t?Vn(e[s],t-1,n,i):zn(e[s],i));return!t&&n&&r.push(r[0]),r}function qn(e,t){return e.feature?n({},e.feature,{geometry:t}):Gn(t)}function Gn(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var Zn={toGeoJSON:function(e){return qn(this,{type:"Point",coordinates:zn(this.getLatLng(),e)})}};function Hn(e,t){return new Fn(e,t)}kn.include(Zn),Dn.include(Zn),On.include(Zn),Rn.include({toGeoJSON:function(e){var t=!fn(this._latlngs);return qn(this,{type:(t?"Multi":"")+"LineString",coordinates:Vn(this._latlngs,t?1:0,!1,e)})}}),Nn.include({toGeoJSON:function(e){var t=!fn(this._latlngs),n=t&&!fn(this._latlngs[0]),i=Vn(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),qn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Sn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),qn(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var r=t.toGeoJSON(e);if(n)i.push(r.geometry);else{var s=Gn(r);"FeatureCollection"===s.type?i.push.apply(i,s.features):i.push(s)}}}),n?qn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Wn=Hn,$n=Ln.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=B(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ht(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){st(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&at(this._image),this},bringToBack:function(){return this._map&&lt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:rt("img");ht(t,"leaflet-image-layer"),this._zoomAnimated&&ht(t,"leaflet-zoom-animated"),this.options.className&&ht(t,this.options.className),t.onselectstart=u,t.onmousemove=u,t.onload=r(this.fire,this,"load"),t.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;gt(this._image,n,t)},_reset:function(){var e=this._image,t=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();_t(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){ft(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),Jn=$n.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:rt("video");if(ht(t,"leaflet-image-layer"),this._zoomAnimated&&ht(t,"leaflet-zoom-animated"),t.onselectstart=u,t.onmousemove=u,t.onloadeddata=r(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],s=0;s<n.length;s++)i.push(n[s].src);this._url=n.length>0?i:[t.src]}else{_(this._url)||(this._url=[this._url]),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var a=rt("source");a.src=this._url[o],t.appendChild(a)}}}}),Yn=Ln.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){p(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&ft(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&ft(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(ft(this._container,0),this._removeTimeout=setTimeout(r(st,void 0,this._container),200)):st(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=j(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&at(this._container),this},bringToBack:function(){return this._map&&lt(this._container),this},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?_t(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Kn=Yn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){Yn.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mn||this._source.on("preclick",Mt))},onRemove:function(e){Yn.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mn||this._source.off("preclick",Mt))},getEvents:function(){var e=Yn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=rt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=rt("div",e+"-content-wrapper",t);if(this._contentNode=rt("div",e+"-content",n),Dt(n),Ot(this._contentNode),Et(n,"contextmenu",Mt),this._tipContainer=rt("div",e+"-tip-container",t),this._tip=rt("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=rt("a",e+"-close-button",t);i.href="#close",i.innerHTML="&#215;",Et(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=this.options.maxHeight;i&&e.offsetHeight>i?(t.height=i+"px",ht(e,"leaflet-popup-scrolled")):ct(e,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();_t(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var e=this._map,t=parseInt(it(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,r=new M(this._containerLeft,-n-this._containerBottom);r._add(yt(this._container));var s=e.layerPointToContainerPoint(r),o=D(this.options.autoPanPadding),a=D(this.options.autoPanPaddingTopLeft||o),l=D(this.options.autoPanPaddingBottomRight||o),u=e.getSize(),h=0,c=0;s.x+i+l.x>u.x&&(h=s.x+i-u.x+l.x),s.x-h-a.x<0&&(h=s.x-a.x),s.y+n+l.y>u.y&&(c=s.y+n-u.y+l.y),s.y-c-a.y<0&&(c=s.y-a.y),(h||c)&&e.fire("autopanstart").panBy([h,c])}},_onCloseButtonClick:function(e){this._close(),Nt(e)},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Wt.mergeOptions({closePopupOnClick:!0}),Wt.include({openPopup:function(e,t,n){return e instanceof Kn||(e=new Kn(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),Ln.include({bindPopup:function(e,t){return e instanceof Kn?(p(e,t),this._popup=e,e._source=this):(this._popup&&!t||(this._popup=new Kn(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){if(e instanceof Ln||(t=e,e=this),e instanceof En)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;this._popup&&this._map&&(Nt(e),t instanceof Mn?this.openPopup(e.layer||e.target,e.latlng):this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,e.latlng))},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Qn=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(e){Yn.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){Yn.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=Yn.prototype.getEvents.call(this);return xe&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=rt("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,n=this._container,i=t.latLngToContainerPoint(t.getCenter()),r=t.layerPointToContainerPoint(e),s=this.options.direction,o=n.offsetWidth,a=n.offsetHeight,l=D(this.options.offset),u=this._getAnchor();"top"===s?e=e.add(D(-o/2+l.x,-a+l.y+u.y,!0)):"bottom"===s?e=e.subtract(D(o/2-l.x,-l.y,!0)):"center"===s?e=e.subtract(D(o/2+l.x,a/2-u.y+l.y,!0)):"right"===s||"auto"===s&&r.x<i.x?(s="right",e=e.add(D(l.x+u.x,u.y-a/2+l.y,!0))):(s="left",e=e.subtract(D(o+u.x-l.x,a/2-u.y-l.y,!0))),ct(n,"leaflet-tooltip-right"),ct(n,"leaflet-tooltip-left"),ct(n,"leaflet-tooltip-top"),ct(n,"leaflet-tooltip-bottom"),ht(n,"leaflet-tooltip-"+s),_t(n,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&ft(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Wt.include({openTooltip:function(e,t,n){return e instanceof Qn||(e=new Qn(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),Ln.include({bindTooltip:function(e,t){return e instanceof Qn?(p(e,t),this._tooltip=e,e._source=this):(this._tooltip&&!t||(this._tooltip=new Qn(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),xe&&(n.click=this._openTooltip)),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){if(e instanceof Ln||(t=e,e=this),e instanceof En)for(var n in this._layers){e=this._layers[n];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=e,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(ht(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ct(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(e){this._tooltip&&this._map&&this.openTooltip(e.layer||e.target,this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Xn=Pn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=D(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});Pn.Default=In;var ei=Ln.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_e,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),st(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(at(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(lt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof M?e:new M(e,e)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,i=-e(-1/0,1/0),r=0,s=n.length;r<s;r++)t=n[r].style.zIndex,n[r]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!X){ft(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var s=Math.min(1,(e-r.loaded)/200);ft(r.el,s),s<1?t=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(E(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(st(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],r=this._map;return i||((i=this._levels[e]={}).el=rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,r.getCenter(),r.getZoom()),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)st(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),s=Math.floor(t/2),o=n-1,a=new M(+r,+s);a.z=+o;var l=this._tileCoordsToKey(a),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),o>i&&this._retainParent(r,s,o,i))},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var s=2*t;s<2*t+2;s++){var o=new M(r,s);o.z=n+1;var a=this._tileCoordsToKey(o),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,s,n+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var r=this._clampZoom(Math.round(t));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0),i&&!(this.options.updateWhenZooming&&r!==this._tileZoom)||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),r=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();ge?gt(e.el,r,i):_t(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),r=t.project(e,this._tileZoom).floor(),s=t.getSize().divideBy(2*i);return new R(r.subtract(s),r.add(s))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(i),s=r.getCenter(),o=[],a=this.options.keepBuffer,l=new R(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var h=this._tiles[u].coords;h.z===this._tileZoom&&l.contains(new M(h.x,h.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var c=r.min.y;c<=r.max.y;c++)for(var d=r.min.x;d<=r.max.x;d++){var p=new M(d,c);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:o.push(p)}}if(o.sort(function(e,t){return e.distanceTo(s)-t.distanceTo(s)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),r=i.add(n);return[t.unproject(i,e.z),t.unproject(r,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new F(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new M(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(st(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){ht(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=u,e.onmousemove=u,X&&this.options.opacity<1&&ft(e,this.options.opacity),ne&&!ie&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),r(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&S(r(this._tileReady,this,e,null,s)),_t(s,n),this._tiles[i]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(ft(n.el,0),E(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(ht(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),X||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new M(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new R(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),ti=ei.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Le&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=Math.max(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),ne||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Et(n,"load",r(this._tileOnLoad,this,t,n)),Et(n,"error",r(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Le?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){X?setTimeout(r(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom;return this.options.zoomReverse&&(e=this.options.maxZoom-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=u,t.onerror=u,t.complete||(t.src=v,st(t),delete this._tiles[e]))},_removeTile:function(e){var t=this._tiles[e];if(t)return se||t.el.setAttribute("src",v),ei.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==v))return ei.prototype._tileReady.call(this,e,t,n)}});function ni(e,t){return new ti(e,t)}var ii=ti.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=n({},this.defaultWmsParams);for(var r in t)r in this.options||(i[r]=t[r]);var s=(t=p(this,t)).detectRetina&&Le?2:1,o=this.getTileSize();i.width=o.x*s,i.height=o.y*s,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,ti.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=N(n.project(t[0]),n.project(t[1])),r=i.min,s=i.max,o=(this._wmsVersion>=1.3&&this._crs===Tn?[r.y,r.x,s.y,s.x]:[r.x,r.y,s.x,s.y]).join(","),a=ti.prototype.getTileUrl.call(this,e);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});ti.WMS=ii,ni.wms=function(e,t){return new ii(e,t)};var ri=Ln.extend({options:{padding:.1,tolerance:0},initialize:function(e){p(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ht(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=yt(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,t),o=this._map.project(e,t).subtract(s),a=r.multiplyBy(-n).add(i).add(r).subtract(o);ge?gt(this._container,a,n):_t(this._container,a)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new R(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),si=ri.extend({getEvents:function(){var e=ri.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Et(e,"mousemove",a(this._onMouseMove,32,this),this),Et(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Et(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){E(this._redrawRequest),delete this._ctx,st(this._container),It(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ri.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=Le?2:1;_t(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Le&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"==typeof e.options.dashArray){var t,n,i=e.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(t=Number(i[n]),isNaN(t))return;r.push(t)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,r,s,o=e._parts,a=o.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(i=0,r=o[n].length;i<r;i++)l[i?"lineTo":"moveTo"]((s=o[n][i]).x,s.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(t.x,t.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,i=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(i)&&!this._map._draggableMoved(t)&&(n=t);n&&(Vt(e),this._fireEvent([n],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(ct(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(e,t){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(ht(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e)},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function oi(e){return Se?new si(e):null}var ai=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),li={_initContainer:function(){this._container=rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ri.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=ai("shape");ht(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=ai("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;st(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,r=e._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(t||(t=e._stroke=ai("stroke")),r.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,t.dashStyle=i.dashArray?_(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):"",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(r.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=ai("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){at(e._container)},_bringToBack:function(e){lt(e._container)}},ui=Pe?ai:J,hi=ri.extend({getEvents:function(){var e=ri.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=ui("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ui("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){st(this._container),It(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ri.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),_t(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=ui("path");e.options.className&&ht(t,e.options.className),e.options.interactive&&ht(t,"leaflet-interactive"),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){st(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Y(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",r=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,r)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){at(e._path)},_bringToBack:function(e){lt(e._path)}});function ci(e){return Ee||Pe?new hi(e):null}Pe&&hi.include(li),Wt.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&oi(e)||ci(e)}});var di=Nn.extend({initialize:function(e,t){Nn.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=B(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});hi.create=ui,hi.pointsToPath=Y,Fn.geometryToLayer=Bn,Fn.coordsToLatLng=Un,Fn.coordsToLatLngs=jn,Fn.latLngToCoords=zn,Fn.latLngsToCoords=Vn,Fn.getFeature=qn,Fn.asFeature=Gn,Wt.mergeOptions({boxZoom:!0});var pi=en.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Et(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){st(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),$e(),bt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Et(document,{contextmenu:Nt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=rt("div","leaflet-zoom-box",this._container),ht(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new R(this._point,this._startPoint),n=t.getSize();_t(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(st(this._box),ct(this._container,"leaflet-crosshair")),Je(),wt(),It(document,{contextmenu:Nt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var t=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}});Wt.addInitHook("addHandler","boxZoom",pi),Wt.mergeOptions({doubleClickZoom:!0});var fi=en.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,r=e.originalEvent.shiftKey?n-i:n+i;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});Wt.addInitHook("addHandler","doubleClickZoom",fi),Wt.mergeOptions({dragging:!0,inertia:!ie,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mi=en.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new an(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}ht(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ct(this._map._container,"leaflet-grab"),ct(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-t+n)%e+t-n,s=(i+t+n)%e-t-n,o=Math.abs(r+n)<Math.abs(s+n)?r:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),s=n.easeLinearity,o=r.multiplyBy(s/((this._lastTime-this._times[0])/1e3)),a=o.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,a),u=o.multiplyBy(l/a),h=l/(n.inertiaDeceleration*s),c=u.multiplyBy(-h/2).round();c.x||c.y?(c=t._limitOffset(c,t.options.maxBounds),S(function(){t.panBy(c,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});Wt.addInitHook("addHandler","dragging",mi),Wt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gi=en.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Et(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),It(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,i=this._panKeys={},r=this.keyCodes;for(t=0,n=r.left.length;t<n;t++)i[r.left[t]]=[-1*e,0];for(t=0,n=r.right.length;t<n;t++)i[r.right[t]]=[e,0];for(t=0,n=r.down.length;t<n;t++)i[r.down[t]]=[0,e];for(t=0,n=r.up.length;t<n;t++)i[r.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,i=this._zoomKeys={},r=this.keyCodes;for(t=0,n=r.zoomIn.length;t<n;t++)i[r.zoomIn[t]]=e;for(t=0,n=r.zoomOut.length;t<n;t++)i[r.zoomOut[t]]=-e},_addHooks:function(){Et(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){It(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(t=this._panKeys[n],e.shiftKey&&(t=D(t).multiplyBy(3)),i.panBy(t),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Nt(e)}}});Wt.addInitHook("addHandler","keyboard",gi),Wt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _i=en.extend({addHooks:function(){Et(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){It(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Ut(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Nt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,s=e._limitZoom(t+(this._delta>0?r:-r))-t;this._delta=0,this._startTime=null,s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});Wt.addInitHook("addHandler","scrollWheelZoom",_i),Wt.mergeOptions({tap:!0,tapTolerance:15});var yi=en.extend({addHooks:function(){Et(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(Rt(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var t=e.touches[0],n=t.target;this._startPos=this._newPos=new M(t.clientX,t.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&ht(n,"leaflet-active"),this._holdTimeout=setTimeout(r(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))},this),1e3),this._simulateEvent("mousedown",t),Et(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),It(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],n=t.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&ct(n,"leaflet-active"),this._simulateEvent("mouseup",t),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new M(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(e,t){var n=document.createEvent("MouseEvents");n._simulated=!0,t.target._simulatedClick=!0,n.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}});xe&&!we&&Wt.addInitHook("addHandler","tap",yi),Wt.mergeOptions({touchZoom:xe&&!ie,bounceAtZoomLimits:!0});var vi=en.extend({addHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),Et(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ct(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Et(document,"touchmove",this._onTouchMove,this),Et(document,"touchend",this._onTouchEnd,this),Rt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),s=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var o=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),E(this._animRequest);var a=r(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=S(a,this,!0),Rt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,E(this._animRequest),It(document,"touchmove",this._onTouchMove),It(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Wt.addInitHook("addHandler","touchZoom",vi),Wt.BoxZoom=pi,Wt.DoubleClickZoom=fi,Wt.Drag=mi,Wt.Keyboard=gi,Wt.ScrollWheelZoom=_i,Wt.Tap=yi,Wt.TouchZoom=vi,Object.freeze=t,e.version="1.4.0",e.Control=$t,e.control=Jt,e.Browser=Ae,e.Evented=k,e.Mixin=nn,e.Util=P,e.Class=I,e.Handler=en,e.extend=n,e.bind=r,e.stamp=o,e.setOptions=p,e.DomEvent=Zt,e.DomUtil=St,e.PosAnimation=Ht,e.Draggable=an,e.LineUtil=gn,e.PolyUtil=yn,e.Point=M,e.point=D,e.Bounds=R,e.bounds=N,e.Transformation=Z,e.transformation=H,e.Projection=wn,e.LatLng=U,e.latLng=j,e.LatLngBounds=F,e.latLngBounds=B,e.CRS=V,e.GeoJSON=Fn,e.geoJSON=Hn,e.geoJson=Wn,e.Layer=Ln,e.LayerGroup=Sn,e.layerGroup=function(e,t){return new Sn(e,t)},e.FeatureGroup=En,e.featureGroup=function(e){return new En(e)},e.ImageOverlay=$n,e.imageOverlay=function(e,t,n){return new $n(e,t,n)},e.VideoOverlay=Jn,e.videoOverlay=function(e,t,n){return new Jn(e,t,n)},e.DivOverlay=Yn,e.Popup=Kn,e.popup=function(e,t){return new Kn(e,t)},e.Tooltip=Qn,e.tooltip=function(e,t){return new Qn(e,t)},e.Icon=Pn,e.icon=function(e){return new Pn(e)},e.DivIcon=Xn,e.divIcon=function(e){return new Xn(e)},e.Marker=kn,e.marker=function(e,t){return new kn(e,t)},e.TileLayer=ti,e.tileLayer=ni,e.GridLayer=ei,e.gridLayer=function(e){return new ei(e)},e.SVG=hi,e.svg=ci,e.Renderer=ri,e.Canvas=si,e.canvas=oi,e.Path=Mn,e.CircleMarker=On,e.circleMarker=function(e,t){return new On(e,t)},e.Circle=Dn,e.circle=function(e,t,n){return new Dn(e,t,n)},e.Polyline=Rn,e.polyline=function(e,t){return new Rn(e,t)},e.Polygon=Nn,e.polygon=function(e,t){return new Nn(e,t)},e.Rectangle=di,e.rectangle=function(e,t){return new di(e,t)},e.Map=Wt,e.map=function(e,t){return new Wt(e,t)};var bi=window.L;e.noConflict=function(){return window.L=bi,this},window.L=e}(t)},"5oMp":function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"6MUB":function(e,t,n){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(r){var s=encodeURIComponent(i(r))+n;return Array.isArray(e[r])?e[r].map(function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[r]))}).join(t):r?encodeURIComponent(i(r))+n+encodeURIComponent(i(e)):""}},"9rSQ":function(e,t,n){"use strict";var i=n("xTJ+");function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},"9s/0":function(e,t,n){!function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var r=function(e){function t(t){var n=e.call(this,t)||this;return n.status=500,n.statusCode=500,n.error=null,n}return i(t,e),t.prototype.setError=function(e){this.error=e},t.prototype.setStatus=function(e){this.status=this.statusCode=e},t}(Error),s={DATASET:"dcat:Dataset",SERVICE:"regp:Service",LAYER:"Layer",MAP:"Map",GALLERY:"Gallery",COMMUNITY:"Community",APPLICATION:"Application",TOPIC:"Topic",WEBSITE:"WebSite",ORGANIZATION:"org:Organization",CONTACT:"vcard:VCard",PERSON:"foaf:Person",CONCEPT:"skos:Concept",CONCEPT_SCHEME:"skos:ConceptScheme",STANDARD:"dct:Standard",RIGHTS_STATEMENT:"dct:RightsStatement"},o={};o[s.DATASET]="Dataset",o[s.SERVICE]="Service",o[s.LAYER]="Layer",o[s.MAP]="Map",o[s.GALLERY]="Gallery",o[s.COMMUNITY]="Community",o[s.APPLICATION]="Application",o[s.TOPIC]="Topic",o[s.WEBSITE]="WebSite",o[s.ORGANIZATION]="Organization",o[s.CONTACT]="Contact",o[s.PERSON]="Person",o[s.CONCEPT]="Concept",o[s.CONCEPT_SCHEME]="Concept Scheme",o[s.STANDARD]="Standard",o[s.RIGHTS_STATEMENT]="Rights Statement";var a="http://www.geoplatform.gov",l=["http://www.geoplatform.gov/spec/esri-feature-rest","http://www.geoplatform.gov/spec/esri-image-rest","http://www.geoplatform.gov/spec/esri-map-rest","http://www.geoplatform.gov/spec/esri-tile-rest"];function u(e){if(null===e)return"";if("string"==typeof e)return e.toLowerCase().replace(/\s/g,"");if("object"==typeof e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];null!=i&&(t+=(i+"").toLowerCase().replace(/\s/g,""))}return t}return""}var h={factories:{},register:function(e,t){this.factories[e]=t},create:function(e,t){if(!e||!e.type)return null;if("function"!=typeof t)throw new Error("Must specify a MD5 function when using URIFactory");var n=this.factories[e.type];return n?n(e,t):null}};h.register(s.DATASET,function(e,t){var n=(e.publisher||e.publishers||[]).map(function(e){return e.label||""}).join(""),i=u({title:e.title,pub:n});return a+"/id/dataset/"+t(i)}),h.register(s.SERVICE,function(e,t){var n=u(function(e){!function(e){if(e){var t=e.serviceType||e.conformsTo;if(t&&l.indexOf(t.uri)>=0){var n=e.href||e.accessURL,i=n.match(/(Map|Feature|Image)(Server\/\d+)/i);i&&i.length>2&&(n=n.replace(i[2],"Server/"),e.href&&(e.href=n),e.accessURL&&(e.accessURL=n))}}}(e);var t=e.accessURL||e.href;if(!t||!t.length)return null;var n=(t=(t=(t=(t+"").trim().toLowerCase()).replace(/http(s)?:\/\//,"")).replace(/&?request=[A-Za-z]+/i,"").replace(/&?service=(WMS|WFS|WCS|CSW)/i,"").replace(/&?version=[0-9\.]*/i,"").replace(/&?layers=[A-Za-z0-9\-\:_,]*/i,"").replace(/&?srs=[A-Za-z0-9\:]*/i,"").replace(/&?crs=[A-Za-z0-9\:]*/i,"").replace(/&?format=[A-Za-z\/]*/i,"").replace(/&?bbox=[0-9,\.]*/i,""))[t.length-1];return"/"!==n&&"?"!==n||(t=t.substring(0,t.length-1)),t}(e));return a+"/id/service/"+t(n)}),h.register(s.LAYER,function(e,t){var n="",i=e.servicedBy||e.services;i&&i.length&&(n=i[0].accessURL||i[0].href||"");var r=n+(e.layerName||"")+(e.accessURL||e.href||"");if(!r.length)return null;var s=u(r);return a+"/id/layer/"+t(s)}),h.register(s.MAP,function(e,t){var n=e.createdBy||e._createdBy||"",i=(e.identifiers||e.identifier||[]).join(""),r=u({title:e.title,author:n,identifiers:i});return a+"/id/map/"+t(r)}),h.register(s.GALLERY,function(e,t){var n=u({title:e.title,author:e.createdBy||e._createdBy||""});return a+"/id/gallery/"+t(n)}),h.register(s.COMMUNITY,function(e,t){var n=u({title:e.title});return a+"/id/community/"+t(n)}),h.register(s.ORGANIZATION,function(e,t){var n=u(e.label||e.name);return a+"/id/organization/"+t(n)}),h.register(s.PERSON,function(e,t){var n=u(e.name);return a+"/id/person/"+t(n)}),h.register(s.CONTACT,function(e,t){var n={};return(e.email||e.hasEmail)&&(n.email=e.email||e.hasEmail),e.tel&&(n.tel=e.tel),(e.orgName||e["organization-name"])&&(n.orgName=e.orgName||e["organization-name"]),e.positionTitle&&(n.positionTitle=e.positionTitle),n=u(n),a+"/id/contact/"+t(n)}),h.register(s.CONCEPT,function(e,t){var n=e.inScheme||e.scheme,i=u(n?n.label||n.prefLabel:""),r=u(e.label||e.prefLabel);return a+"/id/metadata-codelists/"+t(i)+"/"+t(r)}),h.register(s.CONCEPT_SCHEME,function(e,t){var n=u(e.label||e.prefLabel);return a+"/id/metadata-codelists/"+t(n)}),h.register(s.APPLICATION,function(e,t){if(!e||!e.title)return null;var n=u({title:e.title,author:e.createdBy||e._createdBy||""});return a+"/id/application/"+t(n)}),h.register(s.TOPIC,function(e,t){if(!e||!e.title)return null;var n=u({title:e.title,author:e.createdBy||e._createdBy||""});return a+"/id/topic/"+t(n)}),h.register(s.WEBSITE,function(e,t){if(!e||!e.landingPage)return null;var n=u(e.landingPage);return a+"/id/website/"+t(n)});var c={ALTERNATE_TITLE:"alternateTitles",BEGINS:"startDate.min",CLASSIFIERS:"classifiers",CREATED:"created",CREATED_BEFORE:"created.max",CREATED_AFTER:"created.min",CREATED_BY:"createdBy",CREATOR:"creator.id",CONTRIBUTED_BY:"contributedBy",ENDS:"endDate.max",EXTENT:"extent",IDENTIFIERS:"identifiers",KEYWORDS:"keywords",LAST_MODIFIED_BY:"lastModifiedBy",MODIFIED:"modified",MODIFIED_BEFORE:"modified.max",MODIFIED_AFTER:"modified.min",PUBLISHERS_ID:"publisher.id",PUBLISHERS_LABEL:"publisher.label",PUBLISHERS_URI:"publisher.uri",CONTACTS_ID:"contacts.id",CONTACTS_LABEL:"contacts.label",CONTACTS_URI:"contacts.uri",QUERY:"q",SCHEMES_ID:"scheme.id",SCHEMES_LABEL:"scheme.label",SCHEMES_URI:"scheme.uri",SIMILAR_TO:"similarTo",STATUS:"status",SERVICE_TYPES:"serviceType.id",THEMES_ID:"theme.id",THEMES_LABEL:"theme.label",THEMES_URI:"theme.uri",TOPICS_ID:"topic.id",TOPICS_LABEL:"topic.label",TOPICS_URI:"topic.uri",TYPES:"type",URI:"uri",USED_BY_ID:"usedBy.id",USED_BY_LABEL:"usedBy.label",USED_BY_URI:"usedBy.uri",VISIBILITY:"visibility",RESOURCE_TYPE:"resourceType",DATASET:"dataset",LANDING_PAGE:"landingPage",PURPOSE:"purpose",RELIABILITY:"reliability",RELIABILITY_MIN:"reliability.min",RELIABILITY_MAX:"reliability.max",ONLINE:"online",COMPLIANT:"compliant",SPEED:"speed",SPEED_MIN:"speed.min",SPEED_MAX:"speed.max",LIKES:"likes",LIKES_MIN:"likes.min",LIKES_MAX:"likes.max",VIEWS:"views",VIEWS_MIN:"views.min",VIEWS_MAX:"views.max",HREF:"href",LAYER_TYPE:"layerType",LAYER_NAME:"layerName",PARENT_LAYER:"parentLayer",SUB_LAYER:"subLayer",SERVICE:"service",MAP_LAYER:"mapLayer",GALLERY_ITEM:"galleryItem",FACETS:"includeFacets",FIELDS:"fields",SORT:"sort",PAGE:"page",PAGE_SIZE:"size",FOR_TYPES:"for"},d=[{value:"label,asc",label:"Name (A-Z)"},{value:"label,desc",label:"Name (Z-A)"},{value:"type,asc",label:"Type (A-Z)"},{value:"type,desc",label:"Type (Z-A)"},{value:"modified,desc",label:"Most recently modified"},{value:"modified,asc",label:"Least recently modified"},{value:"_score,desc",label:"Relevance"}],p=function(){function e(){this.defaultQuery={page:0,size:10,sort:"modified,desc"},this.query={page:0,size:10,sort:"modified,desc"}}return e.prototype.getQuery=function(){var e={};for(var t in this.query){var n=this.query[t];null!==n&&void 0!==n.push&&(n=n.join(",")),e[t]=n}return e},e.prototype.parameter=function(e,t){return this.setParameter(e,t),this},e.prototype.setParameter=function(e,t){null==t?delete this.query[e]:this.query[e]=t},e.prototype.getParameter=function(e){return this.query[e]},e.prototype.applyParameters=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setParameter(t,e[t])},e.prototype.q=function(e){return this.setQ(e),this},e.prototype.setQ=function(e){this.setParameter(c.QUERY,e)},e.prototype.getQ=function(){return this.getParameter(c.QUERY)},e.prototype.classifiers=function(e){return this.setClassifiers(e),this},e.prototype.setClassifiers=function(e){e&&("string"==typeof e&&(e=e=[e]),this.setParameter(c.TYPES,e))},e.prototype.getClassifiers=function(){return this.getParameter(c.TYPES)},e.prototype.types=function(e){return this.setTypes(e),this},e.prototype.setTypes=function(e){e&&("string"==typeof e&&(e=[e]),this.setParameter(c.FOR_TYPES,e))},e.prototype.getTypes=function(){return this.getParameter(c.FOR_TYPES)},e.prototype.page=function(e){return this.setPage(e),this},e.prototype.setPage=function(e){isNaN(e)||1*e<0||(this.query.page=1*e)},e.prototype.getPage=function(){return this.query.page},e.prototype.nextPage=function(){this.setPage(this.query.page+1)},e.prototype.previousPage=function(){this.setPage(this.query.page-1)},e.prototype.pageSize=function(e){return this.setPageSize(e),this},e.prototype.setPageSize=function(e){isNaN(e)||1*e<0||(this.query.size=1*e)},e.prototype.getPageSize=function(){return this.query.size},e.prototype.sort=function(e,t){return this.setSort(e,t),this},e.prototype.setSort=function(e,t){t=t||"desc",e&&e.indexOf(",")<0&&(e=e+","+t),this.query.sort=e},e.prototype.getSort=function(){return this.query.sort},e.prototype.getSortField=function(){return this.query.sort.split(",")[0]},e.prototype.getSortOrder=function(){return"asc"===this.query.sort.split(",")[1]},e.prototype.getSortOptions=function(){return d.slice(0)},e.prototype.clear=function(){this.query=this.defaultQuery},e}(),f={PURPOSE:"purpose",FUNCTION:"function",TOPIC_PRIMARY:"primaryTopic",TOPIC_SECONDARY:"secondaryTopic",SUBJECT_PRIMARY:"primarySubject",SUBJECT_SECONDARY:"secondarySubject",COMMUNITY:"community",AUDIENCE:"audience",PLACE:"place",CATEGORY:"category"},m={ACCESS_RIGHTS:"rights",ALTERNATE_TITLES:"alternateTitles",ANNOTATIONS:"annotations",CLASSIFIERS:"classifiers",CONCEPT_SCHEME:"scheme",CONTACTS:"contacts",CREATED:"created",CREATED_BY:"createdBy",DATASETS:"datasets",DESCRIPTION:"description",DISTRIBUTIONS:"distributions",EXTENT:"extent",GALLERY_ITEMS:"items",HREF:"href",IDENTIFIERS:"identifiers",KEYWORDS:"keywords",LABEL:"label",LAST_MODIFIED_BY:"lastModifiedBy",LAYERS:"layers",LAYER_TYPE:"layerType",LAYER_NAME:"layerName",LEGEND:"legend",MODIFIED:"modified",PARENT_LAYER:"parentLayer",PUBLISHERS:"publishers",RESOURCE_TYPES:"resourceTypes",SERVICE_TYPE:"serviceType",SERVICES:"services",SPATIAL:"spatial",STATISTICS:"statistics",STATUS:"status",SUB_LAYERS:"subLayers",TEMPORAL:"temporal",THEMES:"themes",THUMBNAIL:"thumbnail",TOPICS:"topics",USED_BY:"usedBy",VISIBILITY:"visibility",LANDING_PAGE:"landingPage"},g=[m.CREATED,m.MODIFIED,m.CREATED_BY,m.PUBLISHERS,m.THEMES,m.DESCRIPTION],_={ALTERNATE_TITLES:"alternateTitles",CONCEPT_SCHEMES:"schemes",CREATED_BY:"createdBy",HREF:"href",IDENTIFIERS:"identifiers",LAYER_TYPE:"layerType",LAYER_NAME:"layerName",LIKES:"likes",ONLINE:"online",PUBLISHERS:"publishers",CONTACTS:"contacts",RELIABILITY:"reliability",SERVICE_TYPES:"serviceTypes",SPEED:"speed",STATUS:"status",THEMES:"themes",TOPICS:"topics",TYPES:"type",USED_BY:"usedBy",VIEWS:"views",VISIBILITY:"visibility"},y=[_.TYPES,_.PUBLISHERS,_.SERVICE_TYPES,_.CONCEPT_SCHEMES,_.VISIBILITY,_.CREATED_BY],v={};v[_.TYPES]=c.TYPES,v[_.THEMES]=c.THEMES_ID,v[_.TOPICS]=c.TOPICS_ID,v[_.PUBLISHERS]=c.PUBLISHERS_ID,v[_.CONTACTS]=c.CONTACTS_ID,v[_.CONCEPT_SCHEMES]=c.SCHEMES_ID,v[_.USED_BY]=c.USED_BY_ID;var b=[{value:"label,asc",label:"Name (A-Z)"},{value:"label,desc",label:"Name (Z-A)"},{value:"type,asc",label:"Type (A-Z)"},{value:"type,desc",label:"Type (Z-A)"},{value:"modified,desc",label:"Most recently modified"},{value:"modified,asc",label:"Least recently modified"},{value:"_score,desc",label:"Relevance"}],w=/^\-?\d+(\.\d*)?,\-?\d+(\.\d*)?,\-?\d+(\.\d*)?,\-?\d+(\.\d*)?$/;function x(e){var t=e;return null!==t&&void 0===t.push&&(t=[t]),null===t||t.length||(t=null),t}var T=function(){function e(e){this.defaultQuery={},this.defaultQuery[c.PAGE.toString()]=0,this.defaultQuery[c.PAGE_SIZE.toString()]=10,this.defaultQuery[c.SORT.toString()]="modified,desc",this.defaultQuery[c.FIELDS.toString()]=g.slice(0),this.defaultQuery[c.FACETS.toString()]=y.slice(0),e&&e.defaults&&(Object.assign(this.defaultQuery,e.defaults),delete e.defaults),this.query=JSON.parse(JSON.stringify(this.defaultQuery)),e&&this.applyParameters(e)}return e.prototype.getQuery=function(){var e={};for(var t in this.query){var n=this.query[t];null!==n&&void 0!==n.push&&(n=n.join(",")),e[t]=n}return e},e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this.query));return t.applyParameters(n),t},e.prototype.parameter=function(e,t){return this.setParameter(e,t),this},e.prototype.setParameter=function(e,t){null==t||void 0!==t.push&&!t.length?delete this.query[e]:this.query[e]=t},e.prototype.getParameter=function(e){return this.query[e]},e.prototype.clearParameter=function(e){delete this.query[e]},e.prototype.applyParameters=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setParameter(t,e[t])},e.prototype.setFacetParameter=function(e,t){var n=v[e];n||console.log("WARN : Query.applyFacetParameter() - unable to map facet to known parameter '"+e+"', using as direct parameter which may not operate as intended"),this.setParameter(n||e,t)},e.prototype.q=function(e){return this.setQ(e),this},e.prototype.setQ=function(e){this.setParameter(c.QUERY,e)},e.prototype.getQ=function(){return this.getParameter(c.QUERY)},e.prototype.keywords=function(e){return this.setKeywords(e),this},e.prototype.setKeywords=function(e){this.setParameter(c.KEYWORDS,x(e))},e.prototype.getKeywords=function(){return this.getParameter(c.KEYWORDS)},e.prototype.uri=function(e){return this.setUri(e),this},e.prototype.setUri=function(e){this.setParameter(c.URI,e)},e.prototype.getUri=function(){return this.getParameter(c.URI)},e.prototype.types=function(e){return this.setTypes(e),this},e.prototype.setTypes=function(e){this.setParameter(c.TYPES,x(e))},e.prototype.getTypes=function(){return this.getParameter(c.TYPES)},e.prototype.createdBy=function(e){return this.setCreatedBy(e),this},e.prototype.setCreatedBy=function(e){this.setParameter(c.CREATED_BY,e)},e.prototype.getCreatedBy=function(){return this.getParameter(c.CREATED_BY)},e.prototype.lastModifiedBy=function(e){return this.setLastModifiedBy(e),this},e.prototype.setLastModifiedBy=function(e){this.setParameter(c.LAST_MODIFIED_BY,e)},e.prototype.getLastModifiedBy=function(){return this.getParameter(c.LAST_MODIFIED_BY)},e.prototype.themes=function(e,t){return this.setThemes(e,t),this},e.prototype.setThemes=function(e,t){this.setParameter(c.THEMES_ID,null),this.setParameter(c.THEMES_LABEL,null),this.setParameter(c.THEMES_URI,null),this.setParameter(t||c.THEMES_ID,x(e))},e.prototype.getThemes=function(){return this.getParameter(c.THEMES_ID)||this.getParameter(c.THEMES_LABEL)||this.getParameter(c.THEMES_URI)},e.prototype.topics=function(e,t){return this.setTopics(e,t),this},e.prototype.setTopics=function(e,t){this.setParameter(c.TOPICS_ID,null),this.setParameter(c.TOPICS_LABEL,null),this.setParameter(c.TOPICS_URI,null),this.setParameter(t||c.TOPICS_ID,x(e))},e.prototype.getTopics=function(){return this.getParameter(c.TOPICS_ID)||this.getParameter(c.TOPICS_LABEL)||this.getParameter(c.TOPICS_URI)},e.prototype.publishers=function(e,t){return this.setPublishers(e,t),this},e.prototype.setPublishers=function(e,t){this.setParameter(c.PUBLISHERS_ID,null),this.setParameter(c.PUBLISHERS_LABEL,null),this.setParameter(c.PUBLISHERS_URI,null),this.setParameter(t||c.PUBLISHERS_ID,x(e))},e.prototype.getPublishers=function(){return this.getParameter(c.PUBLISHERS_ID)||this.getParameter(c.PUBLISHERS_LABEL)||this.getParameter(c.PUBLISHERS_URI)},e.prototype.contacts=function(e,t){return this.setContacts(e,t),this},e.prototype.setContacts=function(e,t){this.setParameter(c.CONTACTS_ID,null),this.setParameter(c.CONTACTS_LABEL,null),this.setParameter(c.CONTACTS_URI,null),this.setParameter(t||c.CONTACTS_ID,x(e))},e.prototype.getContacts=function(){return this.getParameter(c.CONTACTS_ID)||this.getParameter(c.CONTACTS_LABEL)||this.getParameter(c.CONTACTS_URI)},e.prototype.usedBy=function(e,t){return this.setUsedBy(e,t),this},e.prototype.setUsedBy=function(e,t){this.setParameter(c.USED_BY_ID,null),this.setParameter(c.USED_BY_LABEL,null),this.setParameter(c.USED_BY_URI,null),this.setParameter(t||c.USED_BY_ID,x(e))},e.prototype.getUsedBy=function(){return this.getParameter(c.USED_BY_ID)||this.getParameter(c.USED_BY_LABEL)||this.getParameter(c.USED_BY_URI)},e.prototype.schemes=function(e,t){return this.setSchemes(e,t),this},e.prototype.setSchemes=function(e,t){this.setParameter(c.SCHEMES_ID,null),this.setParameter(c.SCHEMES_LABEL,null),this.setParameter(c.SCHEMES_URI,null),this.setParameter(t||c.SCHEMES_ID,x(e))},e.prototype.getSchemes=function(){return this.getParameter(c.SCHEMES_ID)||this.getParameter(c.SCHEMES_LABEL)||this.getParameter(c.SCHEMES_URI)},e.prototype.serviceTypes=function(e){return this.setServiceTypes(e),this},e.prototype.setServiceTypes=function(e){this.setParameter(c.SERVICE_TYPES,x(e))},e.prototype.getServiceTypes=function(){return this.getParameter(c.SERVICE_TYPES)},e.prototype.visibility=function(e){return this.setVisibility(e),this},e.prototype.setVisibility=function(e){this.setParameter(c.VISIBILITY,e)},e.prototype.getVisibility=function(){return this.getParameter(c.VISIBILITY)},e.prototype.status=function(e){return this.setStatus(e),this},e.prototype.setStatus=function(e){this.setParameter(c.STATUS,e)},e.prototype.getStatus=function(){return this.getParameter(c.STATUS)},e.prototype.extent=function(e){return this.setExtent(e),this},e.prototype.setExtent=function(e){if(e)if(void 0!==e.toBboxString)e=e.toBboxString();else if(void 0!==e.push&&e.length&&void 0!==e[0].push)e=e[0][1]+","+e[0][0]+","+e[1][1]+","+e[1][0];else{if("string"!=typeof e)throw new Error("Invalid argument: bbox must be one of Leaflet.Bounds, nested array, or bbox string");if(!w.test(e))throw new Error("Invalid argument: bbox string must be in form of 'minx,miny,maxx,maxy'")}this.setParameter(c.EXTENT,e)},e.prototype.getExtent=function(){return this.getParameter(c.EXTENT)},e.prototype.classifier=function(e,t){return this.setClassifier(e,t),this},e.prototype.setClassifier=function(e,t){var n=x(t);this.setParameter(c.CLASSIFIERS+"."+e,n)},e.prototype.getClassifier=function(e){return this.getParameter(c.CLASSIFIERS+"."+e)||[]},e.prototype.classifiers=function(e){return this.setClassifiers(e),this},e.prototype.setClassifiers=function(e){var t=this,n=Object.keys(f).map(function(e){return f[e]});e&&"object"==typeof e&&!Array.isArray(e)?Object.keys(e).forEach(function(i){~n.indexOf(i)&&t.setClassifier(i,e[i])}):n.forEach(function(e){t.clearParameter(c.CLASSIFIERS+"."+e)})},e.prototype.getClassifiers=function(){var e=this,t={};return Object.keys(f).map(function(e){return f[e]}).forEach(function(n){t[n]=e.getClassifier(n)}),t},e.prototype.modified=function(e,t){return this.setModified(e,t),this},e.prototype.setModified=function(e,t){if(!e)return this.setParameter(c.MODIFIED_BEFORE,null),void this.setParameter(c.MODIFIED_AFTER,null);e instanceof Date||(e=new Date(e));var n=t&&(!0===t||"true"===t),i=n?c.MODIFIED_BEFORE:c.MODIFIED_AFTER,r=n?c.MODIFIED_AFTER:c.MODIFIED_BEFORE,s=e&&e.getTime?e.getTime():e;this.setParameter(r,null),this.setParameter(i,s)},e.prototype.getModified=function(){var e=this.getParameter(c.MODIFIED_BEFORE)||this.getParameter(c.MODIFIED_AFTER);return e&&"number"==typeof e&&(e=new Date(e)),e},e.prototype.created=function(e,t){return this.setCreated(e,t),this},e.prototype.setCreated=function(e,t){if(!e)return this.setParameter(c.CREATED_BEFORE,null),void this.setParameter(c.CREATED_AFTER,null);e instanceof Date||(e=new Date(e));var n=t&&(!0===t||"true"===t),i=n?c.CREATED_BEFORE:c.CREATED_AFTER,r=n?c.CREATED_AFTER:c.CREATED_BEFORE,s=e&&e.getTime?e.getTime():e;this.setParameter(r,null),this.setParameter(i,s)},e.prototype.getCreated=function(){var e=this.getParameter(c.CREATED_BEFORE)||this.getParameter(c.CREATED_AFTER);return e&&"number"==typeof e&&(e=new Date(e)),e},e.prototype.begins=function(e){return this.setBeginDate(e),this},e.prototype.setBeginDate=function(e){e&&e instanceof Date&&(e=e.getTime()),this.setParameter(c.BEGINS,e)},e.prototype.getBeginDate=function(){var e=this.getParameter(c.BEGINS);return e&&(e=new Date(e)),e},e.prototype.ends=function(e){return this.setEndDate(e),this},e.prototype.setEndDate=function(e){e&&e instanceof Date&&(e=e.getTime()),this.setParameter(c.ENDS,e)},e.prototype.getEndDate=function(){var e=this.getParameter(c.ENDS);return e&&(e=new Date(e)),e},e.prototype.between=function(e,t){return this.setBetween(e,t),this},e.prototype.setBetween=function(e,t){this.begins(e),this.ends(t)},e.prototype.resourceTypes=function(e){return this.setResourceTypes(e),this},e.prototype.setResourceTypes=function(e){this.setParameter(c.RESOURCE_TYPE,x(e))},e.prototype.getResourceTypes=function(){return this.getParameter(c.RESOURCE_TYPE)},e.prototype.facets=function(e){return this.setFacets(e),this},e.prototype.setFacets=function(e){this.setParameter(c.FACETS,x(e))},e.prototype.getFacets=function(){return this.getParameter(c.FACETS)},e.prototype.addFacet=function(e){var t=this.getFacets()||[];t.push(e),this.setFacets(t)},e.prototype.removeFacet=function(e){var t=this.getFacets()||[],n=t.indexOf(e);n>=0&&(t.splice(n,1),this.setFacets(t))},e.prototype.fields=function(e){return this.setFields(e),this},e.prototype.setFields=function(e){this.setParameter(c.FIELDS,x(e))},e.prototype.getFields=function(){return this.getParameter(c.FIELDS)},e.prototype.addField=function(e){var t=this.getFields()||[];t.push(e),this.setFields(t)},e.prototype.removeField=function(e){var t=this.getFields()||[],n=t.indexOf(e);n>=0&&(t.splice(n,1),this.setFields(t))},e.prototype.page=function(e){return this.setPage(e),this},e.prototype.setPage=function(e){isNaN(e)||1*e<0||this.setParameter(c.PAGE,1*e)},e.prototype.getPage=function(){return this.getParameter(c.PAGE)},e.prototype.nextPage=function(){this.setPage(this.getPage()+1)},e.prototype.previousPage=function(){this.setPage(this.getPage()-1)},e.prototype.pageSize=function(e){return this.setPageSize(e),this},e.prototype.setPageSize=function(e){isNaN(e)||1*e<0||this.setParameter(c.PAGE_SIZE,1*e)},e.prototype.getPageSize=function(){return this.getParameter(c.PAGE_SIZE)},e.prototype.sort=function(e,t){return this.setSort(e,t),this},e.prototype.setSort=function(e,t){t=t||"desc",e&&e.indexOf(",")<0&&(e=e+","+t),this.setParameter(c.SORT,e)},e.prototype.getSort=function(){return this.getParameter(c.SORT)},e.prototype.getSortField=function(){var e=this.getSort();return e&&e.length?e.split(",")[0]:null},e.prototype.getSortOrder=function(){var e=this.getSort();return e&&e.length?e.split(",")[1]:null},e.prototype.getSortOptions=function(){return b.slice(0)},e.prototype.clear=function(){this.query=JSON.parse(JSON.stringify(this.defaultQuery))},e}(),C={ualUrl:"https://ual.geoplatform.gov",configure:function(e){Object.assign(this,e)}},L=function(){function e(e){this.timeout=5e3,this.setTimeout((e=e||{}).timeout||3e4),this.setAuthToken(e.token)}return e.prototype.setTimeout=function(e){this.timeout=e},e.prototype.setAuthToken=function(e){e&&"string"==typeof e?this.token=function(){return e}:e&&"function"==typeof e&&(this.token=e)},e.prototype.getToken=function(){return this.token&&"function"==typeof this.token?this.token():this.token||null},e.prototype.createRequestOpts=function(e){throw new Error("Must implement 'createRequestOpts' in a sub-class")},e.prototype.execute=function(e){return Promise.reject(new Error("Must overrdie 'execute' in a sub-class"))},e}(),S=function(e){function n(t){return e.call(this,t)||this}return i(n,e),n.prototype.createRequestOpts=function(e){var t={method:e.method,url:e.url,timeout:e.timeout||this.timeout};if(!0===e.json&&(t.responseType="json"),e.params&&(t.params=e.params),e.data&&(t.data=e.data,t.contentType="application/json"),this.token){var n=this.token();n&&(t.headers=t.headers||{},t.headers.Authorization="Bearer "+n,t.withCredentials=!0)}if(e.options)for(var i in e.options)e.options.hasOwnProperty(i)&&(t[i]=e.options[i]);return t},n.prototype.execute=function(e){if(void 0===t)throw new Error("Axios not found, check that you have included it as a dependency of the application or use a different HttpClient implementation");return t(e).then(function(e){return e.data}).catch(function(e){var t=new r(e.message);throw e.response&&(t=new r(e.response.data)),t})},n}(L),E=function(){function e(e,t){this._timeout=3e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"],this.setUrl(e),this.client=t}return e.prototype.setUrl=function(e){this.apiBase=e,this.baseUrl=e+"/api/items"},e.prototype.setTimeout=function(e){this._timeout=e},e.prototype.timeout=function(e){return this.setTimeout(e),this},e.prototype.getClient=function(){return this.client},e.prototype.createPromise=function(e){return new Promise(e)},e.prototype.createAndResolvePromise=function(e){return Promise.resolve(e)},e.prototype.createAndRejectPromise=function(e){return Promise.reject(e)},e.prototype.setLogger=function(e){this.logger=e},e.prototype.logError=function(e){this.logger&&this.logger.error&&this.logger.error(e)},e.prototype.logDebug=function(e){this.logger&&this.logger.debug&&this.logger.debug(e)},e.prototype.buildRequest=function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this._timeout||3e4,this.createRequestOpts(e)},e.prototype.createRequestOpts=function(e){var t=this.client.createRequestOpts(e);return this.logDebug("BaseService.createRequestOpts() - "+JSON.stringify(t)),t},e.prototype.execute=function(e){var t=this;return this.client.execute(e).catch(function(e){return null==e&&(e=new Error("Request failed but didn't return an error. This is most likely because the request timed out")),t.createAndRejectPromise(e)})},e}(),P=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.get=function(e,t){var n=this,i=this.baseUrl+"/"+e;return t&&t.version&&(i+="/versions/"+t.version),this.createAndResolvePromise(i).then(function(e){var i=n.buildRequest({method:"GET",url:e,options:t});return n.execute(i)}).catch(function(t){var i=new Error("Error fetching item "+e+": "+t.message);throw Object.assign(i,t),n.logError("ItemService.get() - "+i.message),i})},t.prototype.save=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i="POST",r=n.baseUrl;if(e.id)i="PUT",r+="/"+e.id;else if(!e.uri)return n.getUri(e,t).then(function(s){e.uri=s;var o=n.buildRequest({method:i,url:r,data:e,options:t});return n.execute(o)});var s=n.buildRequest({method:i,url:r,data:e,options:t});return n.execute(s)}).catch(function(e){var t=new Error("Error saving item: "+e.message);throw Object.assign(t,e),n.logError("ItemService.save() - "+t.message),t})},t.prototype.remove=function(e,t){var n=this;return this.createAndResolvePromise(this.baseUrl+"/"+e).then(function(e){var i=n.buildRequest({method:"DELETE",url:e,options:t});return n.execute(i)}).then(function(){return!0}).catch(function(t){var i=new Error("Error deleting item "+e+": "+t.message);throw Object.assign(i,t),n.logError("ItemService.remove() - "+i.message),i})},t.prototype.patch=function(e,t,n){var i=this;return this.createAndResolvePromise(this.baseUrl+"/"+e).then(function(e){var r=i.buildRequest({method:"PATCH",url:e,data:t,options:n});return i.execute(r)}).catch(function(t){var n=new Error("Error patching item "+e+": "+t.message);throw Object.assign(n,t),i.logError("ItemService.patch() - "+n.message),n})},t.prototype.clone=function(e,t,n){var i=this;return this.createAndResolvePromise(this.baseUrl+"/"+e+"/clone").then(function(e){var r=i.buildRequest({method:"POST",url:e,data:t,options:n});return i.execute(r)}).catch(function(t){var n=new Error("Error cloning item "+e+": "+t.message);throw Object.assign(n,t),i.logError("ItemService.clone() - "+n.message),n})},t.prototype.search=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i;i=e&&"function"==typeof e.getQuery?e.getQuery():"object"==typeof e?e:{};var r=n.buildRequest({method:"GET",url:n.baseUrl,params:i,options:t});return n.execute(r)}).catch(function(e){var t=new Error("Error searching items: "+e.message);throw Object.assign(t,e),n.logError("ItemService.search() - "+t.message),t})},t.prototype.import=function(e,t,n){var i=this;return this.createAndResolvePromise(!0).then(function(){if(null==e)throw new Error("Must provide a valid URL or File");var r={method:"POST",url:i.apiBase+"/api/import",processData:!0,formData:!0,options:n};"string"!=typeof e?(r.file=e,r.data={format:t}):(r.formData=!1,r.data={url:e,format:t}),n&&n.overwrite&&(r.data.overwrite=!!n.overwrite+"",delete n.overwrite);var s=i.buildRequest(r);return i.execute(s)}).catch(function(e){var t=new Error("Error importing item: "+e.message);throw Object.assign(t,e),(409===e.status||~e.message.indexOf("Item already exists"))&&Object.assign(t,{status:409}),e.item&&Object.assign(t,{item:e.item}),i.logError("ItemService.import() - "+t.message),t})},t.prototype.export=function(e,t,n){var i=this;return this.createAndResolvePromise(!0).then(function(){var r=i.buildRequest({method:"GET",url:i.baseUrl+"/"+e+"/export",params:{format:t},json:!1,options:n});return i.execute(r)}).catch(function(e){var n=e.message;(e.statusCode&&406===e.statusCode||"406"===e.statusCode)&&(n="Unsupported export format specified '"+t+"'");var r=new Error("Error exporting item: "+n);throw Object.assign(r,e),i.logError("ItemService.export() - "+r.message),r})},t.prototype.getUri=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){if(!e||!e.type)throw new Error("Must provide an object with a type property");var i=n.apiBase+"/api/utils/uri";(t=t||{}).responseType="text";var r=n.buildRequest({method:"POST",url:i,data:e,options:t});return n.execute(r)}).catch(function(e){var t=new Error("Error getting URI for item: "+e.message);throw Object.assign(t,e),n.logError("ItemService.getUri() - "+t.message),t})},t.prototype.getMultiple=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i=n.buildRequest({method:"POST",url:n.apiBase+"/api/fetch",data:e,options:t});return n.execute(i)}).catch(function(e){var t=new Error("Error fetching items: "+e.message);throw Object.assign(t,e),n.logError("ItemService.getMultiple() - "+t.message),t})},t.prototype.exists=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i=n.buildRequest({method:"POST",url:n.apiBase+"/api/utils/exists",data:e,options:t});return n.execute(i)}).catch(function(e){var t=new Error("Error resolving items: "+e.message);throw Object.assign(t,e),n.logError("ItemService.exists() - "+t.message),t})},t.prototype.like=function(e,t){var n=this;return this.createAndResolvePromise(e.id).then(function(e){var i=n.buildRequest({method:"PUT",url:n.apiBase+"/api/items/"+e+"/likes",options:t});return n.execute(i)}).catch(function(t){var i=new Error("Error liking item "+e.id+": "+t.message);throw Object.assign(i,t),n.logError("ItemService.like() - "+i.message),i})},t.prototype.view=function(e,t){var n=this;return this.createAndResolvePromise(e.id).then(function(e){var i=n.buildRequest({method:"PUT",url:n.apiBase+"/api/items/"+e+"/views",options:t});return n.execute(i)}).catch(function(t){var i=new Error("Error incrementing views for item "+e.id+": "+t.message);throw Object.assign(i,t),n.logError("ItemService.like() - "+i.message),i})},t.prototype.associations=function(e,t,n){var i=this;return this.createAndResolvePromise(e).then(function(e){var r=i.buildRequest({method:"GET",url:i.baseUrl+"/"+e+"/associations",params:t||{},options:n});return i.execute(r)}).catch(function(t){var n=new Error("Error fetching associations for item "+e+": "+t.message);throw Object.assign(n,t),i.logError("ItemService.associations() - "+n.message),n})},t.prototype.versions=function(e,t,n){var i=this;return this.createAndResolvePromise(e).then(function(e){var r=i.buildRequest({method:"GET",url:i.baseUrl+"/"+e+"/versions",params:t,options:n});return i.execute(r)}).catch(function(t){var n=new Error("Error fetching versions for item "+e+": "+t.message);throw Object.assign(n,t),i.logError("ItemService.versions() - "+n.message),n})},t}(E),I=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.setUrl=function(t){e.prototype.setUrl.call(this,t),this.baseUrl=t+"/api/datasets"},t}(P),A=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.setUrl=function(t){e.prototype.setUrl.call(this,t),this.baseUrl=t+"/api/maps"},t}(P),k=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.setUrl=function(t){e.prototype.setUrl.call(this,t),this.baseUrl=t+"/api/layers"},t.prototype.style=function(e,t){var n=this;return Promise.resolve(e).then(function(e){var i=n.buildRequest({method:"GET",url:n.baseUrl+"/"+e+"/style",options:t});return n.execute(i)}).catch(function(e){var t=new Error("Error fetching style: "+e.message);throw Object.assign(t,e),n.logError("LayerService.style() - "+t.message),t})},t.prototype.describe=function(e,t,n){var i=this;return Promise.resolve(t).then(function(t){if(!t)throw new Error("Must provide describe parameters to use");var r=["bbox","height","width","x","y"].find(function(e){return!t[e]});if(r)throw new Error("Must specify "+r+" in describe req");var s=i.buildRequest({method:"GET",url:i.baseUrl+"/"+e+"/describe",params:{srs:"EPSG:4326",bbox:t.bbox,height:t.height,width:t.width,info_format:"text/xml",x:t.x,y:t.y,i:t.x,j:t.y},options:n});return i.execute(s)}).catch(function(e){var t=new Error("Error describing layer feature: "+e.message);throw Object.assign(t,e),i.logError("LayerService.describe() - "+t.message),t})},t.prototype.validate=function(e,t,n){var i=this;return Promise.resolve(t).then(function(t){if(!t)throw new Error("Must provide parameters to use in layer validation");var r=i.buildRequest({method:"GET",url:i.baseUrl+"/"+e+"/validate",params:t,options:n});return i.execute(r)}).catch(function(e){var t=new Error("Error validating layer request: "+e.message);throw Object.assign(t,e),i.logError("LayerService.describe() - "+t.message),t})},t}(P),M=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.setUrl=function(t){e.prototype.setUrl.call(this,t),this.baseUrl=t+"/api/services"},t.prototype.about=function(e,t){var n=this;return Promise.resolve(e).then(function(e){if(!e)throw new Error("Must provide service to get metadata about");var i=n.buildRequest({method:"POST",url:n.baseUrl+"/about",data:e,options:t});return n.execute(i)}).catch(function(e){var t=new Error("Error describing service: "+e.message);throw Object.assign(t,e),n.logError("ServiceService.about() - "+t.message),t})},t.prototype.types=function(e){var t=this,n=(new T).types(s.STANDARD).resourceTypes("ServiceType").pageSize(50).getQuery();return Promise.resolve(n).then(function(n){var i=t.buildRequest({method:"GET",url:t.apiBase+"/api/items",params:n,options:e});return t.execute(i)}).then(function(e){return e.results}).catch(function(e){var n=new Error("Error fetching service types: "+e.message);throw Object.assign(n,e),t.logError("ServiceService.types() - "+n.message),n})},t.prototype.import=function(e,t){var n=this;return Promise.resolve(e).then(function(e){var i=n.buildRequest({method:"POST",url:n.baseUrl+"/import",data:e,options:t});return n.execute(i)}).catch(function(e){var t=new Error("Error importing service: "+e.message);throw Object.assign(t,e),n.logError("ServiceService.import() - "+t.message),t})},t.prototype.harvest=function(e,t){var n=this;return Promise.resolve(e).then(function(e){var i=n.buildRequest({method:"GET",url:n.baseUrl+"/"+e+"/harvest",options:t});return n.execute(i)}).catch(function(e){var t=new Error("Error harvesting layers from service: "+e.message);throw Object.assign(t,e),n.logError("ServiceService.harvest() - "+t.message),t})},t.prototype.liveTest=function(e,t){var n=this;return Promise.resolve(e).then(function(e){var i=n.buildRequest({method:"GET",url:n.baseUrl+"/"+e+"/test",options:t});return n.execute(i)}).catch(function(e){var t=new Error("Error testing service: "+e.message);throw Object.assign(t,e),n.logError("ServiceService.liveTest() - "+t.message),t})},t.prototype.statistics=function(e,t){var n=this;return Promise.resolve(e).then(function(e){var i=n.buildRequest({method:"GET",url:n.baseUrl+"/"+e+"/statistics",options:t});return n.execute(i)}).catch(function(e){var t=new Error("Error getting service statistics: "+e.message);throw Object.assign(t,e),n.logError("ServiceService.statistics() - "+t.message),t})},t}(P),O=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.setUrl=function(t){e.prototype.setUrl.call(this,t),this.baseUrl=t+"/api/galleries"},t.prototype.addItem=function(e,t,n){var i=this;return Promise.resolve(!0).then(function(){var r=i.buildRequest({method:"POST",url:i.baseUrl+"/"+e+"/items",data:t,options:n});return i.execute(r)}).catch(function(e){var t=new Error("Error adding item: "+e.message);throw Object.assign(t,e),i.logError("GalleryService.addItem() - "+t.message),t})},t.prototype.removeItem=function(e,t,n){var i=this;return Promise.resolve(this.baseUrl+"/"+e+"/items/"+t).then(function(e){var t=i.buildRequest({method:"DELETE",url:e,options:n});return i.execute(t)}).then(function(){return!0}).catch(function(e){var t=new Error("Error adding item: "+e.message);throw Object.assign(t,e),i.logError("GalleryService.addItem() - "+t.message),t})},t}(P),D=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.setTimeout(3e4),i}return i(t,e),t.prototype.setUrl=function(t){e.prototype.setUrl.call(this,t),this.baseUrl=t},t.prototype.capabilities=function(e,t,n){var i=this,r=this.baseUrl+"/api/capabilities";return e&&(r+="/"+e),this.createAndResolvePromise(r).then(function(e){var r=i.buildRequest({method:"GET",url:e,params:t||{},options:n});return i.execute(r)}).catch(function(e){var t=new Error("Error getting capabilities: "+e.message);throw Object.assign(t,e),i.logError("UtilsService.capabilities() - "+t.message),t})},t.prototype.parseFile=function(e,t,n){var i=this;return this.createAndResolvePromise(this.baseUrl+"/api/utils/parse").then(function(r){var s=i.buildRequest({method:"POST",url:r,data:{format:t},file:e,formData:!0,options:n});return i.execute(s)}).then(function(e){return e}).catch(function(e){var t=new Error("Error parsing file: "+e.message);throw Object.assign(t,e),i.logError("UtilsService.parseFile() - "+t.message),t})},t.prototype.locate=function(e,t){var n=this;return this.createAndResolvePromise(this.baseUrl+"/api/utils/gazetteer").then(function(i){var r=n.buildRequest({method:"GET",url:i,params:{location:e},options:t});return n.execute(r)}).then(function(e){return e}).catch(function(e){var t=new Error("Error resolving location: "+e.message);throw Object.assign(t,e),n.logError("UtilsService.locate() - "+t.message),t})},t}(E),R=function(){function e(){this._query={page:0,size:10}}return e.prototype.getQuery=function(){var e={};for(var t in this._query){var n=this._query[t];null!==n&&void 0!==n.push&&(n=n.join(",")),e[t]=n}return e},e.prototype.q=function(e){return this.setQ(e),this},e.prototype.setQ=function(e){this._query.q=e},e.prototype.getQ=function(){return this._query.q},e.prototype.types=function(e){return this.setTypes(e),this},e.prototype.setTypes=function(e){var t;t=e&&Array.isArray(e)?e.join(","):e,this._query.types=t},e.prototype.getTypes=function(){return this._query.types},e.prototype.groups=function(e){return this.setGroups(e),this},e.prototype.setGroups=function(e){var t;t=e&&Array.isArray(e)?e.join(","):e,this._query.groups=t},e.prototype.getGroups=function(){return this._query.groups},e.prototype.orgs=function(e){return this.setOrgs(e),this},e.prototype.setOrgs=function(e){var t;t=e&&Array.isArray(e)?e.join(","):e,this._query.orgs=t},e.prototype.getOrgs=function(){return this._query.orgs},e.prototype.extent=function(e){return this.setExtent(e),this},e.prototype.setExtent=function(e){this._query.bbox=e},e.prototype.getExtent=function(){return this._query.bbox},e.prototype.sort=function(e,t){return this.setSort(e,t),this},e.prototype.setSort=function(e,t){t=t||"desc",e&&e.indexOf(",")<0&&(e=e+","+t),this._query.sort=e},e.prototype.getSort=function(){return this._query.sort},e.prototype.getSortField=function(){return this._query.sort.split(",")[0]},e.prototype.getSortOrder=function(){return"asc"===this._query.sort.split(",")[1]},e.prototype.page=function(e){return this.setPage(e),this},e.prototype.setPage=function(e){isNaN(e)||1*e<0||(this._query.page=1*e)},e.prototype.getPage=function(){return this._query.page},e.prototype.nextPage=function(){this.setPage(this._query.page+1)},e.prototype.previousPage=function(){this.setPage(this._query.page-1)},e.prototype.pageSize=function(e){return this.setPageSize(e),this},e.prototype.setPageSize=function(e){isNaN(e)||1*e<0||(this._query.size=1*e)},e.prototype.getPageSize=function(){return this._query.size},e}(),N=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.setTimeout(3e4),i}return i(t,e),t.prototype.setUrl=function(t){e.prototype.setUrl.call(this,t),this.baseUrl=t+"/api/agol"},t.prototype.getOrg=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i=n.buildRequest({method:"GET",url:n.baseUrl+"/orgs/"+e,options:t});return n.execute(i)}).catch(function(t){var n=new Error("AgolService.getOrg() - Error fetching org "+e+": "+t.message);throw Object.assign(n,t),n})},t.prototype.searchOrgs=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i=e.getQuery(),r=n.buildRequest({method:"GET",url:n.baseUrl+"/orgs",params:i,options:t});return n.execute(r)}).catch(function(e){var t=new Error("AgolService.searchOrgs() - Error searching orgs: "+e.message);throw Object.assign(t,e),t})},t.prototype.getGroup=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i=n.buildRequest({method:"GET",url:n.baseUrl+"/groups/"+e,options:t});return n.execute(i)}).catch(function(t){var n=new Error("AgolService.getGroup() - Error fetching group "+e+": "+t.message);throw Object.assign(n,t),n})},t.prototype.searchGroups=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i=e.getQuery(),r=n.buildRequest({method:"GET",url:n.baseUrl+"/groups",params:i,options:t});return n.execute(r)}).catch(function(e){var t=new Error("AgolService.searchGroups() - Error searching groups: "+e.message);throw Object.assign(t,e),t})},t.prototype.getItem=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i=n.buildRequest({method:"GET",url:n.baseUrl+"/items/"+e,options:t});return n.execute(i)}).catch(function(t){var n=new Error("AgolService.getItem() - Error fetching item "+e+": "+t.message);throw Object.assign(n,t),n})},t.prototype.searchItems=function(e,t){var n=this;return this.createAndResolvePromise(e).then(function(e){var i=e.getQuery(),r=n.buildRequest({method:"GET",url:n.baseUrl+"/items",params:i,options:t});return n.execute(r)}).catch(function(e){var t=new Error("AgolService.searchItems() - Error searching items: "+e.message);throw Object.assign(t,e),t})},t.prototype.getAgolId=function(e){if(!e)return null;if(!e.type)return null;if(s.ORGANIZATION===e.type||"Group"===e.type)return e.id;if(!e.identifiers||!e.identifiers.length)return null;var t=e.identifiers.filter(function(e){return~e.indexOf("agol:")});return t.length?t[0].replace("agol:",""):null},t}(E),F={UNKNOWN:"Unknown Category",DATASET:"Dataset",SERVICE:"Service",LAYER:"Layer",MAP:"Map",GALLERY:"Gallery",COMMUNITY:"Community",CONTACT:"Contact",ORGANIZATION:"Organization",CONCEPT:"Concept",CONCEPT_SCHEME:"Concept Scheme",APPLICATION:"Application",TOPIC:"Topic",WEBSITE:"WebSite",IMAGE_PRODUCT:"Image Product",RIGHTS_STATEMENT:"RightsStatement",KNOWLEDGE_GRAPH:"Knowledge Graph",USER:"User",COMMUNITY_POST:"Community Post",COMMUNITY_PAGE:"Community Page",APP_PAGE:"Application Page"},B={ACCESSED:"Accessed",DISPLAYED:"Displayed",VIEWED:"Viewed",CREATED:"Created",EDITED:"Edited",DELETED:"Deleted",CLONED:"Cloned",ADDED:"Added",REMOVED:"Removed",EXPORTED:"Exported",IMPORTED:"Imported"},U=function(){function e(e,t,n,i){if(this.item=null,this.related=null,!e||!t)throw new Error("TrackingService Event - Must specific an event category and event type when constructing events");this.category=e,this.type=t,this.setItem(n),this.setRelated(i)}return e.prototype.getCategory=function(){return this.category},e.prototype.getType=function(){return this.type},e.prototype.getItem=function(){return this.item},e.prototype.setItem=function(e){this.item=e?e.id||e:null},e.prototype.getRelated=function(){return this.related},e.prototype.setRelated=function(e){this.related=e?e.id||e:null},e}(),j=function(){function e(){}return e.prototype.logEvent=function(e,t,n,i){console.log("Event ("+e+") - "+t+" : "+n)},e.prototype.logPageView=function(e,t){console.log("Page View "+e+(t?" : "+JSON.stringify(t):""))},e.prototype.logSearch=function(e,t){console.log("Query : "+JSON.stringify(e)+" found "+t+" matches")},e}(),z=function(){function e(e){this.provider=null,e&&"object"==typeof e&&Object.assign(this,e),this.provider||this.setProvider(new j)}return e.prototype.setProvider=function(e){e&&(this.provider=e)},e.prototype.event=function(e){return this.logEvent(e),this},e.prototype.logEvent=function(e){var t=this;if(this.provider&&this.provider.logEvent&&e)if(Array.isArray(e))e.forEach(function(e){return t.logEvent(e)});else{var n=e;try{this.provider.logEvent(n.getCategory(),n.getType(),n.getItem(),n.getRelated())}catch(i){console.log("TrackingService.logEvent() - Error logging event ("+n.getCategory()+", "+n.getType()+", "+n.getItem()+") - "+i.message)}}},e.prototype.pageView=function(e,t){return this.logPageView(e,t),this},e.prototype.logPageView=function(e,t){this.provider&&this.provider.logPageView?this.provider.logPageView(e,t):this.logEvent(new U(F.APP_PAGE,B.VIEWED,e))},e.prototype.logSearch=function(e,t){this.provider.logSearch&&this.provider.logSearch(e,t)},e}(),V=function(){function e(e,t){this.timeout=3e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"],this.setUrl(e),this.client=t}return e.prototype.setUrl=function(e){this.apiBase=e,this.baseUrl=e+"/api/recommender"},e.prototype.suggest=function(e,t){return this._search(this.baseUrl+"/suggest",e,t).catch(function(e){var t=new Error("KGService.suggest() - Error suggesting concepts: "+e.message);throw Object.assign(t,e),t})},e.prototype.types=function(e,t){return this._search(this.baseUrl+"/types",e,t).catch(function(e){var t=new Error("KGService.types() - Error searching types: "+e.message);throw Object.assign(t,e),t})},e.prototype.sources=function(e,t){return this._search(this.baseUrl+"/sources",e,t).catch(function(e){var t=new Error("KGService.sources() - Error searching sources: "+e.message);throw Object.assign(t,e),t})},e.prototype._search=function(e,t,n){var i=this;return Promise.resolve(!0).then(function(){var r=t.getQuery(),s=i.buildRequest({method:"GET",url:e,params:r,options:n});return i.execute(s)})},e.prototype.buildRequest=function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this.timeout||C.timeout||3e4,this.createRequestOpts(e)},e.prototype.createRequestOpts=function(e){return this.client.createRequestOpts(e)},e.prototype.execute=function(e){return this.client.execute(e).catch(function(e){throw null==e&&(e=new Error("KGService.execute() - Request failed but didn't return an error. This is most likely because the request timed out")),e})},e}();"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},writable:!0,configurable:!0}),e.ClientVersion="0.3.0",e.GPError=r,e.ItemTypes=s,e.ItemTypeLabels=o,e.QueryParameters=c,e.QueryFacets=_,e.Query=T,e.QueryFactory=function(){return new T},e.QueryFields=m,e.KGQuery=p,e.KGClassifiers=f,e.URIFactory=function(e){if("function"!=typeof e)throw new Error("Must specify a MD5 function when using URIFactory");return function(t){return h.create(t,e)}},e.Config=C,e.GPHttpClient=L,e.XHRHttpClient=S,e.ItemService=P,e.DatasetService=I,e.MapService=A,e.LayerService=k,e.ServiceService=M,e.GalleryService=O,e.UtilsService=D,e.KGService=V,e.ServiceFactory=function(e,t,n){var i="string"==typeof e?e:e&&e.type?e.type:null;if(!i)throw new Error("Must provide a type or object with a type specified");if(!t)throw new Error("Must provide a base url");if(!n)throw new Error("Must provide an http client to use to make requests");switch(i){case s.LAYER:return new k(t,n);case s.SERVICE:return new M(t,n);case s.MAP:return new A(t,n);case s.GALLERY:return new O(t,n);case s.DATASET:return new I(t,n);default:return new P(t,n)}},e.AgolService=N,e.AgolQuery=R,e.TrackingEvent=U,e.TrackingService=z,e.TrackingCategories=F,e.TrackingTypes=B,e.TrackingEventFactory=function e(t,n){var i=[];if(t&&n&&n.type)if(s.MAP===n.type){if(i.push(new U(F.MAP,t,n)),B.DISPLAYED===t&&(n.layers.forEach(function(n){if(n.layer){var r=e(t,n.layer).filter(function(e){return null!==e});r&&r.length&&(i=i.concat(r))}}),n.baseLayer)){var r=e(t,n.baseLayer).filter(function(e){return null!==e});r&&r.length&&(i=i.concat(r))}}else if(s.LAYER===n.type)i.push(new U(F.LAYER,t,n)),B.DISPLAYED===t&&n.services&&n.services.length&&i.push(new U(F.SERVICE,t,n.services[0]));else{var o=function(e){var t=F.UNKNOWN;if(e){var n=Object.keys(F).map(function(e){return F[e]});if(~n.indexOf(e))return e;if(~e.indexOf(":")){var i=e.split(":")[1];if(~n.indexOf(i))return i}}return t}(n.type);i.push(new U(o,t,n))}return i},Object.defineProperty(e,"__esModule",{value:!0})}(t,n("vDqi"))},ArNd:function(e,t,n){!function(e,t){"use strict";var n="default"in t?t.default:t,i=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,r=""===document.documentElement.style.pointerEvents,s={cors:i,pointerEvents:r},o={attributionWidthOffset:55},a=0;function l(e){var t="";for(var n in e.f=e.f||"json",e)if(e.hasOwnProperty(n)){var i,r=e[n],s=Object.prototype.toString.call(r);t.length&&(t+="&"),i="[object Array]"===s?"[object Object]"===Object.prototype.toString.call(r[0])?JSON.stringify(r):r.join(","):"[object Object]"===s?JSON.stringify(r):"[object Date]"===s?r.valueOf():r,t+=encodeURIComponent(n)+"="+encodeURIComponent(i)}return t}function u(e,n){var i=new window.XMLHttpRequest;return i.onerror=function(r){i.onreadystatechange=t.Util.falseFn,e.call(n,{error:{code:500,message:"XMLHttpRequest error"}},null)},i.onreadystatechange=function(){var r,s;if(4===i.readyState){try{r=JSON.parse(i.responseText)}catch(o){r=null,s={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!s&&r.error&&(s=r.error,r=null),i.onerror=t.Util.falseFn,e.call(n,s,r)}},i.ontimeout=function(){this.onerror()},i}function h(e,t,n,i){var r=u(n,i);return r.open("POST",e),null!=i&&void 0!==i.options&&(r.timeout=i.options.timeout),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(l(t)),r}function c(e,t,n,i){var r=u(n,i);return r.open("GET",e+"?"+l(t),!0),null!=i&&void 0!==i.options&&(r.timeout=i.options.timeout),r.send(null),r}function d(e,t,n,i){var r=l(t),o=u(n,i),a=(e+"?"+r).length;if(a<=2e3&&s.cors?o.open("GET",e+"?"+r):a>2e3&&s.cors&&(o.open("POST",e),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=i&&void 0!==i.options&&(o.timeout=i.options.timeout),a<=2e3&&s.cors)o.send(null);else{if(!(a>2e3&&s.cors))return a<=2e3&&!s.cors?p(e,t,n,i):void N("a request to "+e+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");o.send(r)}return o}function p(e,n,i,r){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var s="c"+a;n.callback="window._EsriLeafletCallbacks."+s,window._EsriLeafletCallbacks[s]=function(e){if(!0!==window._EsriLeafletCallbacks[s]){var t,n=Object.prototype.toString.call(e);"[object Object]"!==n&&"[object Array]"!==n&&(t={error:{code:500,message:"Expected array or object as JSONP response"}},e=null),!t&&e.error&&(t=e,e=null),i.call(r,t,e),window._EsriLeafletCallbacks[s]=!0}};var o=t.DomUtil.create("script",null,document.body);return o.type="text/javascript",o.src=e+"?"+l(n),o.id=s,t.DomUtil.addClass(o,"esri-leaflet-jsonp"),a++,{id:s,url:o.src,abort:function(){window._EsriLeafletCallbacks._callback[s]({code:0,message:"Request aborted."})}}}var f=s.cors?c:p;f.CORS=c,f.JSONP=p;var m={request:d,get:f,post:h};function g(e){return function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(e[0],e[e.length-1])||e.push(e[0]),e}function _(e){for(var t,n=0,i=0,r=e.length,s=e[i];i<r-1;i++)n+=((t=e[i+1])[0]-s[0])*(t[1]+s[1]),s=t;return n>=0}function y(e,t,n,i){var r=(i[1]-n[1])*(t[0]-e[0])-(i[0]-n[0])*(t[1]-e[1]);if(0!==r){var s=((i[0]-n[0])*(e[1]-n[1])-(i[1]-n[1])*(e[0]-n[0]))/r,o=((t[0]-e[0])*(e[1]-n[1])-(t[1]-e[1])*(e[0]-n[0]))/r;if(s>=0&&s<=1&&o>=0&&o<=1)return!0}return!1}function v(e,t){for(var n=0;n<e.length-1;n++)for(var i=0;i<t.length-1;i++)if(y(e[n],e[n+1],t[i],t[i+1]))return!0;return!1}function b(e,t){var n=v(e,t),i=function(e,t){for(var n=!1,i=-1,r=e.length,s=r-1;++i<r;s=i)(e[i][1]<=t[1]&&t[1]<e[s][1]||e[s][1]<=t[1]&&t[1]<e[i][1])&&t[0]<(e[s][0]-e[i][0])*(t[1]-e[i][1])/(e[s][1]-e[i][1])+e[i][0]&&(n=!n);return n}(e,t[0]);return!(n||!i)}function w(e){var t=[],n=e.slice(0),i=g(n.shift().slice(0));if(i.length>=4){_(i)||i.reverse(),t.push(i);for(var r=0;r<n.length;r++){var s=g(n[r].slice(0));s.length>=4&&(_(s)&&s.reverse(),t.push(s))}}return t}function x(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function T(e,t){return function e(t,n){n=n||"OBJECTID";var i,r={wkid:4326},s={};switch(t.type){case"Point":s.x=t.coordinates[0],s.y=t.coordinates[1],s.spatialReference=r;break;case"MultiPoint":s.points=t.coordinates.slice(0),s.spatialReference=r;break;case"LineString":s.paths=[t.coordinates.slice(0)],s.spatialReference=r;break;case"MultiLineString":s.paths=t.coordinates.slice(0),s.spatialReference=r;break;case"Polygon":s.rings=w(t.coordinates.slice(0)),s.spatialReference=r;break;case"MultiPolygon":s.rings=function(e){for(var t=[],n=0;n<e.length;n++)for(var i=w(e[n]),r=i.length-1;r>=0;r--){var s=i[r].slice(0);t.push(s)}return t}(t.coordinates.slice(0)),s.spatialReference=r;break;case"Feature":t.geometry&&(s.geometry=e(t.geometry,n)),s.attributes=t.properties?x(t.properties):{},t.id&&(s.attributes[n]=t.id);break;case"FeatureCollection":for(s=[],i=0;i<t.features.length;i++)s.push(e(t.features[i],n));break;case"GeometryCollection":for(s=[],i=0;i<t.geometries.length;i++)s.push(e(t.geometries[i],n))}return s}(e,t)}function C(e,t){return function e(t,n){var i={};return"number"==typeof t.x&&"number"==typeof t.y&&(i.type="Point",i.coordinates=[t.x,t.y],"number"==typeof t.z&&i.coordinates.push(t.z)),t.points&&(i.type="MultiPoint",i.coordinates=t.points.slice(0)),t.paths&&(1===t.paths.length?(i.type="LineString",i.coordinates=t.paths[0].slice(0)):(i.type="MultiLineString",i.coordinates=t.paths.slice(0))),t.rings&&(i=function(e){for(var t,n,i=[],r=[],s=0;s<e.length;s++){var o=g(e[s].slice(0));o.length<4||(_(o)?i.push([o]):r.push(o))}for(var a=[];r.length;){n=r.pop();var l=!1;for(t=i.length-1;t>=0;t--)if(b(i[t][0],n)){i[t].push(n),l=!0;break}l||a.push(n)}for(;a.length;){n=a.pop();var u=!1;for(t=i.length-1;t>=0;t--)if(v(i[t][0],n)){i[t].push(n),u=!0;break}u||i.push([n.reverse()])}return 1===i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}(t.rings.slice(0))),(t.geometry||t.attributes)&&(i.type="Feature",i.geometry=t.geometry?e(t.geometry):null,i.properties=t.attributes?x(t.attributes):null,t.attributes&&(i.id=t.attributes[n]||t.attributes.OBJECTID||t.attributes.FID)),JSON.stringify(i.geometry)===JSON.stringify({})&&(i.geometry=null),i}(e,t)}function S(e){if("NaN"!==e.xmin&&"NaN"!==e.ymin&&"NaN"!==e.xmax&&"NaN"!==e.ymax){var n=t.latLng(e.ymin,e.xmin),i=t.latLng(e.ymax,e.xmax);return t.latLngBounds(n,i)}return null}function E(e){return{xmin:(e=t.latLngBounds(e)).getSouthWest().lng,ymin:e.getSouthWest().lat,xmax:e.getNorthEast().lng,ymax:e.getNorthEast().lat,spatialReference:{wkid:4326}}}var P=/^(OBJECTID|FID|OID|ID)$/i;function I(e){var t;if(e.objectIdFieldName)t=e.objectIdFieldName;else if(e.fields){for(var n=0;n<=e.fields.length-1;n++)if("esriFieldTypeOID"===e.fields[n].type){t=e.fields[n].name;break}if(!t)for(n=0;n<=e.fields.length-1;n++)if(e.fields[n].name.match(P)){t=e.fields[n].name;break}}return t}function A(e){for(var t in e.attributes)if(t.match(P))return t}function k(e,t){var n,i=e.features||e.results,r=i.length;n=t||I(e);var s={type:"FeatureCollection",features:[]};if(r)for(var o=i.length-1;o>=0;o--){var a=C(i[o],n||A(i[o]));s.features.push(a)}return s}function M(e){return"/"!==(e=t.Util.trim(e))[e.length-1]&&(e+="/"),e}function O(e){if(-1!==e.url.indexOf("?")){e.requestParams=e.requestParams||{};var t=e.url.substring(e.url.indexOf("?")+1);e.url=e.url.split("?")[0],e.requestParams=JSON.parse('{"'+decodeURI(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return e.url=M(e.url.split("?")[0]),e}function D(e){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(e)}function R(e){var t;switch(e){case"Point":t="esriGeometryPoint";break;case"MultiPoint":t="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":t="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":t="esriGeometryPolygon"}return t}function N(){console&&console.warn&&console.warn.apply(console,arguments)}function F(e){return e.getSize().x-o.attributionWidthOffset+"px"}function B(e){if(e.attributionControl&&!e.attributionControl._esriAttributionAdded){e.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>');var n=document.createElement("style");n.type="text/css",n.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(n),t.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover");var i=document.createElement("style");i.type="text/css",i.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+F(e)+";}",document.getElementsByTagName("head")[0].appendChild(i),t.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution"),e.on("resize",function(t){e.attributionControl._container.style.maxWidth=F(t.target)}),e.on("unload",function(){n.parentNode.removeChild(n),i.parentNode.removeChild(i);for(var e=document.querySelectorAll(".esri-leaflet-jsonp"),t=0;t<e.length;t++)e.item(t).parentNode.removeChild(e.item(t))}),e.attributionControl._esriAttributionAdded=!0}}function U(e){var n={geometry:null,geometryType:null};return e instanceof t.LatLngBounds?(n.geometry=E(e),n.geometryType="esriGeometryEnvelope",n):(e.getLatLng&&(e=e.getLatLng()),e instanceof t.LatLng&&(e={type:"Point",coordinates:[e.lng,e.lat]}),e instanceof t.GeoJSON&&(e=e.getLayers()[0].feature.geometry,n.geometry=T(e),n.geometryType=R(e.type)),e.toGeoJSON&&(e=e.toGeoJSON()),"Feature"===e.type&&(e=e.geometry),"Point"===e.type||"LineString"===e.type||"Polygon"===e.type||"MultiPolygon"===e.type?(n.geometry=T(e),n.geometryType=R(e.type),n):void N("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function j(e,n){p(e,{},t.Util.bind(function(e,i){if(!e){n._esriAttributions=[];for(var r=0;r<i.contributors.length;r++)for(var s=i.contributors[r],o=0;o<s.coverageAreas.length;o++){var a=s.coverageAreas[o],l=t.latLng(a.bbox[0],a.bbox[1]),u=t.latLng(a.bbox[2],a.bbox[3]);n._esriAttributions.push({attribution:s.attribution,score:a.score,bounds:t.latLngBounds(l,u),minZoom:a.zoomMin,maxZoom:a.zoomMax})}n._esriAttributions.sort(function(e,t){return t.score-e.score}),z({target:n})}},this))}function z(e){var n=e.target,i=n._esriAttributions;if(n&&n.attributionControl&&i){for(var r="",s=n.getBounds(),o=t.latLngBounds(s.getSouthWest().wrap(),s.getNorthEast().wrap()),a=n.getZoom(),l=0;l<i.length;l++){var u=i[l],h=u.attribution;!r.match(h)&&u.bounds.intersects(o)&&a>=u.minZoom&&a<=u.maxZoom&&(r+=", "+h)}r=r.substr(2);var c=n.attributionControl._container.querySelector(".esri-dynamic-attribution");c.innerHTML=r,c.style.maxWidth=F(n),n.fire("attributionupdated",{attribution:r})}}var V={warn:N,cleanUrl:M,getUrlParams:O,isArcgisOnline:D,geojsonTypeToArcGIS:R,responseToFeatureCollection:k,geojsonToArcGIS:T,arcgisToGeoJSON:C,boundsToExtent:E,extentToBounds:S,calcAttributionWidth:F,setEsriAttribution:B,_setGeometry:U,_getAttributionData:j,_updateMapAttribution:z,_findIdAttributeFromFeature:A,_findIdAttributeFromResponse:I},q=t.Class.extend({options:{proxy:!1,useCors:i},generateSetter:function(e,n){return t.Util.bind(function(t){return this.params[e]=t,this},n)},initialize:function(e){if(e.request&&e.options?(this._service=e,t.Util.setOptions(this,e.options)):(t.Util.setOptions(this,e),this.options.url=M(e.url)),this.params=t.Util.extend({},this.params||{}),this.setters)for(var n in this.setters)this[n]=this.generateSetter(this.setters[n],this)},token:function(e){return this._service?this._service.authenticate(e):this.params.token=e,this},format:function(e){return this.params.returnUnformattedValues=!e,this},request:function(e,t){return this.options.requestParams&&L.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,e,t):this._request("request",this.path,this.params,e,t)},_request:function(e,t,n,i,r){var s=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return"get"!==e&&"request"!==e||this.options.useCors?m[e](s,n,i,r):m.get.JSONP(s,n,i,r)}}),G=q.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSr:4326,outFields:"*"},within:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(e,n){return e=t.latLng(e),this.params.geometry=[e.lng,e.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=n,this.params.inSr=4326,this},where:function(e){return this.params.where=e,this},between:function(e,t){return this.params.time=[e.valueOf(),t.valueOf()],this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},orderBy:function(e,t){return t=t||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[e,t].join(" "),this},run:function(e,t){return this._cleanParams(),this.options.isModern||D(this.options.url)?(this.params.f="geojson",this.request(function(n,i){this._trapSQLerrors(n),e.call(t,n,i,i)},this)):this.request(function(n,i){this._trapSQLerrors(n),e.call(t,n,i&&k(i),i)},this)},count:function(e,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(t,n){e.call(this,t,n&&n.count,n)},t)},ids:function(e,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(t,n){e.call(this,t,n&&n.objectIds,n)},t)},bounds:function(e,t){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(n,i){i&&i.extent&&S(i.extent)?e.call(t,n,S(i.extent),i):e.call(t,n={message:"Invalid Bounds"},null,i)},t)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(e){var n=t.point(e);return this.params.pixelSize=[n.x,n.y],this},layer:function(e){return this.path=e+"/query",this},_trapSQLerrors:function(e){e&&"400"===e.code&&N("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(e){this.params.inSr=4326;var t=U(e);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function Z(e){return new G(e)}var H=q.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(e,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[e,t].join(":"),this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},run:function(e,t){return this.request(function(n,i){e.call(t,n,i&&k(i),i)},t)}});function W(e){return new H(e)}var $=q.extend({path:"identify",between:function(e,t){return this.params.time=[e.valueOf(),t.valueOf()],this}}),J=$.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(e){var t=E(e.getBounds()),n=e.getSize();return this.params.imageDisplay=[n.x,n.y,96],this.params.mapExtent=[t.xmin,t.ymin,t.xmax,t.ymax],this},at:function(e){return 2===e.length&&(e=t.latLng(e)),this._setGeometryParams(e),this},layerDef:function(e,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[e,t].join(":"),this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},run:function(e,t){return this.request(function(n,i){if(n)e.call(t,n,void 0,i);else{var r=k(i);i.results=i.results.reverse();for(var s=0;s<r.features.length;s++)r.features[s].layerId=i.results[s].layerId;e.call(t,void 0,r,i)}})},_setGeometryParams:function(e){var t=U(e);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function Y(e){return new J(e)}var K=$.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(e){return e=t.latLng(e),this.params.geometry=JSON.stringify({x:e.lng,y:e.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(e,t){return this.request(function(n,i){e.call(t,n,i&&this._responseToGeoJSON(i),i)},this)},_responseToGeoJSON:function(e){var t=e.location,n=e.catalogItems,i=e.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},crs:{type:"EPSG",properties:{code:t.spatialReference.wkid}},properties:{OBJECTID:e.objectId,name:e.name,value:e.value},id:e.objectId}};if(e.properties&&e.properties.Values&&(r.pixel.properties.values=e.properties.Values),n&&n.features&&(r.catalogItems=k(n),i&&i.length===r.catalogItems.features.length))for(var s=i.length-1;s>=0;s--)r.catalogItems.features[s].properties.catalogItemVisibility=i[s];return r}});function Q(e){return new K(e)}var X=t.Evented.extend({options:{proxy:!1,useCors:i,timeout:0},initialize:function(e){e=e||{},this._requestQueue=[],this._authenticating=!1,t.Util.setOptions(this,e),this.options.url=M(this.options.url)},get:function(e,t,n,i){return this._request("get",e,t,n,i)},post:function(e,t,n,i){return this._request("post",e,t,n,i)},request:function(e,t,n,i){return this._request("request",e,t,n,i)},metadata:function(e,t){return this._request("get","",{},e,t)},authenticate:function(e){return this._authenticating=!1,this.options.token=e,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(e){this.options.timeout=e},_request:function(e,t,n,i,r){this.fire("requeststart",{url:this.options.url+t,params:n,method:e},!0);var s=this._createServiceCallback(e,t,n,i,r);if(this.options.token&&(n.token=this.options.token),this.options.requestParams&&L.extend(n,this.options.requestParams),!this._authenticating){var o=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return"get"!==e&&"request"!==e||this.options.useCors?m[e](o,n,s,r):m.get.JSONP(o,n,s,r)}this._requestQueue.push([e,t,n,i,r])},_createServiceCallback:function(e,n,i,r,s){return t.Util.bind(function(o,a){!o||499!==o.code&&498!==o.code||(this._authenticating=!0,this._requestQueue.push([e,n,i,r,s]),this.fire("authenticationrequired",{authenticate:t.Util.bind(this.authenticate,this)},!0),o.authenticate=t.Util.bind(this.authenticate,this)),r.call(s,o,a),o?this.fire("requesterror",{url:this.options.url+n,params:i,message:o.message,code:o.code,method:e},!0):this.fire("requestsuccess",{url:this.options.url+n,params:i,response:a,method:e},!0),this.fire("requestend",{url:this.options.url+n,params:i,method:e},!0)},this)},_runQueue:function(){for(var e=this._requestQueue.length-1;e>=0;e--){var t=this._requestQueue[e];this[t.shift()].apply(this,t)}this._requestQueue=[]}}),ee=X.extend({identify:function(){return Y(this)},find:function(){return W(this)},query:function(){return Z(this)}});function te(e){return new ee(e)}var ne=X.extend({query:function(){return Z(this)},identify:function(){return Q(this)}});function ie(e){return new ne(e)}var re=X.extend({options:{idAttribute:"OBJECTID"},query:function(){return Z(this)},addFeature:function(e,t,n){return delete e.id,e=T(e),this.post("addFeatures",{features:[e]},function(e,i){t&&t.call(n,e||i.addResults[0].error,i&&i.addResults?i.addResults[0]:void 0)},n)},updateFeature:function(e,t,n){return e=T(e,this.options.idAttribute),this.post("updateFeatures",{features:[e]},function(e,i){t&&t.call(n,e||i.updateResults[0].error,i&&i.updateResults?i.updateResults[0]:void 0)},n)},deleteFeature:function(e,t,n){return this.post("deleteFeatures",{objectIds:e},function(e,i){t&&t.call(n,e||i.deleteResults[0].error,i&&i.deleteResults?i.deleteResults[0]:void 0)},n)},deleteFeatures:function(e,t,n){return this.post("deleteFeatures",{objectIds:e},function(e,i){t&&t.call(n,e||i.deleteResults[0].error,i&&i.deleteResults?i.deleteResults:void 0)},n)}});function se(e){return new re(e)}var oe="https:"!==window.location.protocol?"http:":"https:",ae=t.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:oe+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:oe+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane"}},NationalGeographic:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community"}},ImageryLabels:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:r?"esri-labels":"tilePane"}},ShadedRelief:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:oe+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}}}},initialize:function(e,n){var i;if("object"==typeof e&&e.urlTemplate&&e.options)i=e;else{if("string"!=typeof e||!ae.TILES[e])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=ae.TILES[e]}var r=t.Util.extend(i.options,n);t.Util.setOptions(this,r),this.options.token&&(i.urlTemplate+="?token="+this.options.token),t.TileLayer.prototype.initialize.call(this,i.urlTemplate,r)},onAdd:function(e){B(e),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&j(this.options.attributionUrl,e),e.on("moveend",z),t.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){e.off("moveend",z),t.TileLayer.prototype.onRemove.call(this,e)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var e=this._map.createPane(this.options.pane);e.style.pointerEvents="none",e.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var e='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return e}}),le=t.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(e){e=O(e=t.Util.setOptions(this,e)),this.tileUrl=e.url+"tile/{z}/{y}/{x}"+(e.requestParams&&Object.keys(e.requestParams).length>0?t.Util.getParamString(e.requestParams):""),-1!==e.url.indexOf("{s}")&&e.subdomains&&(e.url=e.url.replace("{s}",e.subdomains[0])),this.service=te(e),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(e.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),e.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),t.TileLayer.prototype.initialize.call(this,this.tileUrl,e)},getTileUrl:function(e){var n=this._getZoomForUrl();return t.Util.template(this.tileUrl,t.Util.extend({s:this._getSubdomain(e),x:e.x,y:e.y,z:this._lodMap&&this._lodMap[n]?this._lodMap[n]:n},this.options))},createTile:function(e,t){var n=document.createElement("img");return L.DomEvent.on(n,"load",L.bind(this._tileOnLoad,this,t,n)),L.DomEvent.on(n,"error",L.bind(this._tileOnError,this,t,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?n.src=this.getTileUrl(e):this.once("lodmap",function(){n.src=this.getTileUrl(e)},this),n},onAdd:function(e){B(e),this._lodMap||this.metadata(function(t,n){if(!t&&n.spatialReference){var i=n.spatialReference.latestWkid||n.spatialReference.wkid;if(!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution())),e.options.crs!==L.CRS.EPSG3857||102100!==i&&3857!==i)proj4||N("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var r=n.tileInfo.lods,s=le.MercatorZoomLevels,o=0;o<r.length;o++){var a=r[o];for(var l in s)if(this._withinPercentage(a.resolution,s[l],this.options.zoomOffsetAllowance)){this._lodMap[l]=a.level;break}}this.fire("lodmap")}}},this),t.TileLayer.prototype.onAdd.call(this,e)},metadata:function(e,t){return this.service.metadata(e,t),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(e){var t="?token="+e;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,t):this.tileUrl+t,this.options.token=e,this.service.authenticate(e),this},_withinPercentage:function(e,t,n){return Math.abs(e/t-1)<n}}),ue=t.ImageOverlay.extend({onAdd:function(e){this._topLeft=e.getPixelBounds().min,t.ImageOverlay.prototype.onAdd.call(this,e)},_reset:function(){this._map.options.crs===t.CRS.EPSG3857?t.ImageOverlay.prototype._reset.call(this):t.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),he=t.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:i,attribution:null,interactive:!1,alt:""},onAdd:function(e){B(e),this._update=t.Util.throttle(this._update,this.options.updateInterval,this),e.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?e.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,n){!t&&!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(e){this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(e,n){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=t.popup(n),this._popupFunction=e,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(e){return this.options.opacity=e,this._currentImage&&this._currentImage.setOpacity(e),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,t){return this.options.from=e,this.options.to=t,this._update(),this},metadata:function(e,t){return this.service.metadata(e,t),this},authenticate:function(e){return this.service.authenticate(e),this},redraw:function(){this._update()},_renderImage:function(e,t,n){if(this._map){n&&(e="data:"+n+";base64,"+e);var i=new ue(e,t,{opacity:0,crossOrigin:this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function(e){if(i.off("error",r,this),this._map){var n=e.target,s=this._currentImage;n._bounds.equals(t)&&n._bounds.equals(this._map.getBounds())?(this._currentImage=n,"front"===this.options.position?this.bringToFront():this.bringToBack(),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),s&&this._map&&this._map.removeLayer(s),s&&s._map&&s._map.removeLayer(s)):this._map.removeLayer(n)}this.fire("load",{bounds:t})};i.once("error",function(){this._map.removeLayer(i),this.fire("error"),i.off("load",r,this)},this),i.once("load",r,this),this.fire("loading",{bounds:t})}},_update:function(){if(this._map){var e=this._map.getZoom(),t=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress))if(e>this.options.maxZoom||e<this.options.minZoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var n=this._buildExportParams();L.extend(n,this.options.requestParams),n?this._requestExport(n,t):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(e,n,i,r){if(e=t.latLng(e),this._shouldRenderPopup&&this._lastClick.equals(e)){var s=this._popupFunction(n,i,r);s&&this._popup.setLatLng(e).setContent(s).openOn(this._map)}},_resetPopupState:function(e){this._shouldRenderPopup=!1,this._lastClick=e.latlng},_calculateBbox:function(){var e=this._map.getPixelBounds(),n=this._map.unproject(e.getBottomLeft()),i=this._map.unproject(e.getTopRight()),r=this._map.options.crs.project(i),s=this._map.options.crs.project(n),o=t.bounds(r,s);return[o.getBottomLeft().x,o.getBottomLeft().y,o.getTopRight().x,o.getTopRight().y].join(",")},_calculateImageSize:function(){var e=this._map.getPixelBounds(),t=this._map.getSize(),n=this._map.unproject(e.getBottomLeft()),i=this._map.unproject(e.getTopRight()),r=this._map.latLngToLayerPoint(i).y,s=this._map.latLngToLayerPoint(n).y;return(r>0||s<t.y)&&(t.y=s-r),t.x+","+t.y}}),ce=he.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(e){e=O(e),this.service=ie(e),this.service.addEventParent(this),t.Util.setOptions(this,e)},setPixelType:function(e){return this.options.pixelType=e,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(e){return this.options.bandIds=t.Util.isArray(e)?e.join(","):e.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(e,n){return this.options.noData=t.Util.isArray(e)?e.join(","):e.toString(),n&&(this.options.noDataInterpretation=n),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(e){this.options.renderingRule=e,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(e){this.options.mosaicRule=e,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(e){var n=t.Util.bind(function(n,i,r){n||setTimeout(t.Util.bind(function(){this._renderPopup(e.latlng,n,i,r)},this),300)},this),i=this.identify().at(e.latlng);this.options.mosaicRule&&i.setMosaicRule(this.options.mosaicRule),i.run(n),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var e=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:e,imageSR:e};return this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(t.pixelType=this.options.pixelType),this.options.interpolation&&(t.interpolation=this.options.interpolation),this.options.compressionQuality&&(t.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(t.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(t.noData=this.options.noData),this.options.noDataInterpretation&&(t.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(t.token=this.service.options.token),this.options.renderingRule&&(t.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(t.mosaicRule=JSON.stringify(this.options.mosaicRule)),t},_requestExport:function(e,n){"json"===this.options.f?this.service.request("exportImage",e,function(e,t){e||(this.options.token&&(t.href+="?token="+this.options.token),this._renderImage(t.href,n))},this):(e.f="image",this._renderImage(this.options.url+"exportImage"+t.Util.getParamString(e),n))}}),de=he.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png24",transparent:!0,f:"json"},initialize:function(e){e=O(e),this.service=te(e),this.service.addEventParent(this),(e.proxy||e.token)&&"json"!==e.f&&(e.f="json"),t.Util.setOptions(this,e)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(e){return this.options.dynamicLayers=e,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(e){return this.options.layers=e,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(e){return this.options.layerDefs=e,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(e){return this.options.timeOptions=e,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(e){var n,i=t.Util.bind(function(n,i,r){n||setTimeout(t.Util.bind(function(){this._renderPopup(e.latlng,n,i,r)},this),300)},this);if((n=this.options.popup?this.options.popup.on(this._map).at(e.latlng):this.identify().on(this._map).at(e.latlng)).params.maxAllowableOffset||n.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||n.layers(this.options.layers?"visible:"+this.options.layers.join(","):"visible"),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!n.params.layerDefs)for(var r in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(r)&&n.layerDef(r,this.options.layerDefs[r]);n.run(i),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var e=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:e,imageSR:e};if(this.options.dynamicLayers&&(t.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;t.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(t.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(t.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(t.token=this.service.options.token),this.options.proxy&&(t.proxy=this.options.proxy),this.options.disableCache&&(t._ts=Date.now()),t},_requestExport:function(e,n){"json"===this.options.f?this.service.request("export",e,function(e,t){e||(this.options.token&&(t.href+="?token="+this.options.token),this.options.proxy&&(t.href=this.options.proxy+"?"+t.href),t.href?this._renderImage(t.href,n):this._renderImage(t.imageData,n,t.contentType))},this):(e.f="image",this._renderImage(this.options.url+"export"+t.Util.getParamString(e),n))}}),pe=n.Layer.extend({options:{cellSize:512,updateInterval:150},initialize:function(e){e=n.setOptions(this,e),this._zooming=!1},onAdd:function(e){this._map=e,this._update=n.Util.throttle(this._update,this.options.updateInterval,this),this._reset(),this._update()},onRemove:function(){this._map.removeEventListener(this.getEvents(),this),this._removeCells()},getEvents:function(){return{moveend:this._update,zoomstart:this._zoomstart,zoomend:this._reset}},addTo:function(e){return e.addLayer(this),this},removeFrom:function(e){return e.removeLayer(this),this},_zoomstart:function(){this._zooming=!0},_reset:function(){this._removeCells(),this._cells={},this._activeCells={},this._cellsToLoad=0,this._cellsTotal=0,this._cellNumBounds=this._getCellNumBounds(),this._resetWrap(),this._zooming=!1},_resetWrap:function(){var e=this._map,t=e.options.crs;if(!t.infinite){var n=this._getCellSize();t.wrapLng&&(this._wrapLng=[Math.floor(e.project([0,t.wrapLng[0]]).x/n),Math.ceil(e.project([0,t.wrapLng[1]]).x/n)]),t.wrapLat&&(this._wrapLat=[Math.floor(e.project([t.wrapLat[0],0]).y/n),Math.ceil(e.project([t.wrapLat[1],0]).y/n)])}},_getCellSize:function(){return this.options.cellSize},_update:function(){if(this._map){var e=this._map.getPixelBounds(),t=this._getCellSize(),i=n.bounds(e.min.divideBy(t).floor(),e.max.divideBy(t).floor());this._removeOtherCells(i),this._addCells(i),this.fire("cellsupdated")}},_addCells:function(e){var t,i,r,s=[],o=e.getCenter(),a=this._map.getZoom();for(t=e.min.y;t<=e.max.y;t++)for(i=e.min.x;i<=e.max.x;i++)(r=n.point(i,t)).z=a,this._isValidCell(r)&&s.push(r);var l=s.length;if(0!==l)for(this._cellsToLoad+=l,this._cellsTotal+=l,s.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),i=0;i<l;i++)this._addCell(s[i])},_isValidCell:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._cellNumBounds;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}if(!this.options.bounds)return!0;var r=this._cellCoordsToBounds(e);return n.latLngBounds(this.options.bounds).intersects(r)},_cellCoordsToBounds:function(e){var t=this._map,i=this.options.cellSize,r=e.multiplyBy(i),s=r.add([i,i]),o=t.wrapLatLng(t.unproject(r,e.z)),a=t.wrapLatLng(t.unproject(s,e.z));return n.latLngBounds(o,a)},_cellCoordsToKey:function(e){return e.x+":"+e.y},_keyToCellCoords:function(e){var t=e.split(":"),i=parseInt(t[0],10),r=parseInt(t[1],10);return n.point(i,r)},_removeOtherCells:function(e){for(var t in this._cells)e.contains(this._keyToCellCoords(t))||this._removeCell(t)},_removeCell:function(e){var t=this._activeCells[e];t&&(delete this._activeCells[e],this.cellLeave&&this.cellLeave(t.bounds,t.coords),this.fire("cellleave",{bounds:t.bounds,coords:t.coords}))},_removeCells:function(){for(var e in this._cells){var t=this._cells[e].bounds,n=this._cells[e].coords;this.cellLeave&&this.cellLeave(t,n),this.fire("cellleave",{bounds:t,coords:n})}},_addCell:function(e){this._wrapCoords(e);var t=this._cellCoordsToKey(e),n=this._cells[t];n&&!this._activeCells[t]&&(this.cellEnter&&this.cellEnter(n.bounds,e),this.fire("cellenter",{bounds:n.bounds,coords:e}),this._activeCells[t]=n),n||(n={coords:e,bounds:this._cellCoordsToBounds(e)},this._cells[t]=n,this._activeCells[t]=n,this.createCell&&this.createCell(n.bounds,e),this.fire("cellcreate",{bounds:n.bounds,coords:e}))},_wrapCoords:function(e){e.x=this._wrapLng?n.Util.wrapNum(e.x,this._wrapLng):e.x,e.y=this._wrapLat?n.Util.wrapNum(e.y,this._wrapLat):e.y},_getCellNumBounds:function(){var e=this._map.getPixelWorldBounds(),t=this._getCellSize();return e?n.bounds(e.min.divideBy(t).floor(),e.max.divideBy(t).ceil().subtract([1,1])):null}});function fe(e){this.values=[].concat(e||[])}fe.prototype.query=function(e){var t=this.getIndex(e);return this.values[t]},fe.prototype.getIndex=function(e){this.dirty&&this.sort();for(var t,n,i=0,r=this.values.length-1;i<=r;)if(t=(i+r)/2|0,+(n=this.values[Math.round(t)]).value<+e)i=t+1;else{if(!(+n.value>+e))return t;r=t-1}return Math.abs(~r)},fe.prototype.between=function(e,t){var n=this.getIndex(e),i=this.getIndex(t);if(0===n&&0===i)return[];for(;this.values[n-1]&&this.values[n-1].value===e;)n--;for(;this.values[i+1]&&this.values[i+1].value===t;)i++;return this.values[i]&&this.values[i].value===t&&this.values[i+1]&&i++,this.values.slice(n,i)},fe.prototype.insert=function(e){return this.values.splice(this.getIndex(e.value),0,e),this},fe.prototype.bulkAdd=function(e,t){return this.values=this.values.concat([].concat(e||[])),t?this.sort():this.dirty=!0,this},fe.prototype.sort=function(){return this.values.sort(function(e,t){return+t.value-+e.value}).reverse(),this.dirty=!1,this};var me=pe.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6},initialize:function(e){if(pe.prototype.initialize.call(this,e),e=O(e),e=t.Util.setOptions(this,e),this.service=se(e),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var n=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(n=!0);!1===n&&N("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new fe,this._endTimeIndex=new fe):this.options.timeField&&(this._timeIndex=new fe),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(e){return B(e),this.service.metadata(function(t,n){if(!t){var i=n.supportedQueryFormats,r=!1;!1===this.service.options.isModern&&(r=!0),!r&&i&&-1!==i.indexOf("geoJSON")&&(this.service.options.isModern=!0),!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution()))}},this),e.on("zoomend",this._handleZoomChange,this),pe.prototype.onAdd.call(this,e)},onRemove:function(e){return e.off("zoomend",this._handleZoomChange,this),pe.prototype.onRemove.call(this,e)},getAttribution:function(){return this.options.attribution},createCell:function(e,t){this._visibleZoom()&&this._requestFeatures(e,t)},_requestFeatures:function(e,n,i){return this._activeRequests++,1===this._activeRequests&&this.fire("loading",{bounds:e},!0),this._buildQuery(e).run(function(r,s,o){o&&o.exceededTransferLimit&&this.fire("drawlimitexceeded"),!r&&s&&s.features.length&&t.Util.requestAnimFrame(t.Util.bind(function(){this._addFeatures(s.features,n),this._postProcessFeatures(e)},this)),r||!s||s.features.length||this._postProcessFeatures(e),r&&this._postProcessFeatures(e),i&&i.call(this,r,s)},this)},_postProcessFeatures:function(e){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:e})},_cacheKey:function(e){return e.z+":"+e.x+":"+e.y},_addFeatures:function(e,t){var n=this._cacheKey(t);this._cache[n]=this._cache[n]||[];for(var i=e.length-1;i>=0;i--){var r=e[i].id;-1===this._currentSnapshot.indexOf(r)&&this._currentSnapshot.push(r),-1===this._cache[n].indexOf(r)&&this._cache[n].push(r)}this.options.timeField&&this._buildTimeIndexes(e),this.createLayers(e)},_buildQuery:function(e){var t=this.service.query().intersects(e).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.requestParams&&L.extend(t.params,this.options.requestParams),this.options.simplifyFactor&&t.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&t.between(this.options.from,this.options.to),t},setWhere:function(e,n,i){this.options.where=e&&e.length?e:"1=1";for(var r=[],s=[],o=0,a=null,l=t.Util.bind(function(e,l){if(e&&(a=e),l)for(var u=l.features.length-1;u>=0;u--)s.push(l.features[u].id);--o<=0&&this._visibleZoom()&&(this._currentSnapshot=s,t.Util.requestAnimFrame(t.Util.bind(function(){this.removeLayers(r),this.addLayers(s),n&&n.call(i,a)},this)))},this),u=this._currentSnapshot.length-1;u>=0;u--)r.push(this._currentSnapshot[u]);for(var h in this._activeCells){o++;var c=this._keyToCellCoords(h),d=this._cellCoordsToBounds(c);this._requestFeatures(d,h,l)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,n,i,r){var s=this.options.from,o=this.options.to,a=0,l=null,u=t.Util.bind(function(t){t&&(l=t),this._filterExistingFeatures(s,o,e,n),a--,i&&a<=0&&i.call(r,l)},this);if(this.options.from=e,this.options.to=n,this._filterExistingFeatures(s,o,e,n),"server"===this.options.timeFilterMode)for(var h in this._activeCells){a++;var c=this._keyToCellCoords(h),d=this._cellCoordsToBounds(c);this._requestFeatures(d,h,u)}return this},refresh:function(){for(var e in this._activeCells){var t=this._keyToCellCoords(e),n=this._cellCoordsToBounds(t);this._requestFeatures(n,e)}this.redraw&&this.once("load",function(){this.eachFeature(function(e){this._redraw(e.feature.id)},this)},this)},_filterExistingFeatures:function(e,n,i,r){var s=e&&n?this._getFeaturesInTimeRange(e,n):this._currentSnapshot,o=this._getFeaturesInTimeRange(i,r);if(o.indexOf)for(var a=0;a<o.length;a++){var l=s.indexOf(o[a]);l>=0&&s.splice(l,1)}t.Util.requestAnimFrame(t.Util.bind(function(){this.removeLayers(s),this.addLayers(o)},this))},_getFeaturesInTimeRange:function(e,t){var n,i=[];if(this.options.timeField.start&&this.options.timeField.end){var r=this._startTimeIndex.between(e,t),s=this._endTimeIndex.between(e,t);n=r.concat(s)}else n=this._timeIndex.between(e,t);for(var o=n.length-1;o>=0;o--)i.push(n[o].id);return i},_buildTimeIndexes:function(e){var t,n;if(this.options.timeField.start&&this.options.timeField.end){var i=[],r=[];for(t=e.length-1;t>=0;t--)i.push({id:(n=e[t]).id,value:new Date(n.properties[this.options.timeField.start])}),r.push({id:n.id,value:new Date(n.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(r)}else{var s=[];for(t=e.length-1;t>=0;t--)s.push({id:(n=e[t]).id,value:new Date(n.properties[this.options.timeField])});this._timeIndex.bulkAdd(s)}},_featureWithinTimeRange:function(e){if(!this.options.from||!this.options.to)return!0;var t=+this.options.from.valueOf(),n=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var i=+e.properties[this.options.timeField];return i>=t&&i<=n}if(this.options.timeField.start&&this.options.timeField.end){var r=+e.properties[this.options.timeField.start],s=+e.properties[this.options.timeField.end];return r>=t&&r<=n||s>=t&&s<=n}},_visibleZoom:function(){if(!this._map)return!1;var e=this._map.getZoom();return!(e>this.options.maxZoom||e<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var e in this._activeCells){var t=this._cacheKey(this._activeCells[e].coords);this._cache[t]&&this.addLayers(this._cache[t])}else this.removeLayers(this._currentSnapshot),this._currentSnapshot=[]},authenticate:function(e){return this.service.authenticate(e),this},metadata:function(e,t){return this.service.metadata(e,t),this},query:function(){return this.service.query()},_getMetadata:function(e){this._metadata?e(void 0,this._metadata):this.metadata(t.Util.bind(function(t,n){this._metadata=n,e(t,this._metadata)},this))},addFeature:function(e,n,i){this._getMetadata(t.Util.bind(function(r,s){r?n&&n.call(this,r,null):this.service.addFeature(e,t.Util.bind(function(t,r){t||(e.properties[s.objectIdField]=r.objectId,e.id=r.objectId,this.createLayers([e])),n&&n.call(i,t,r)},this))},this))},updateFeature:function(e,t,n){this.service.updateFeature(e,function(i,r){i||(this.removeLayers([e.id],!0),this.createLayers([e])),t&&t.call(n,i,r)},this)},deleteFeature:function(e,t,n){this.service.deleteFeature(e,function(e,i){!e&&i.objectId&&this.removeLayers([i.objectId],!0),t&&t.call(n,e,i)},this)},deleteFeatures:function(e,t,n){return this.service.deleteFeatures(e,function(e,i){if(!e&&i.length>0)for(var r=0;r<i.length;r++)this.removeLayers([i[r].objectId],!0);t&&t.call(n,e,i)},this)}}),ge=me.extend({options:{cacheLayers:!0},initialize:function(e){me.prototype.initialize.call(this,e),this._originalStyle=this.options.style,this._layers={}},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t]),this.fire("removefeature",{feature:this._layers[t].feature,permanent:!1},!0);return me.prototype.onRemove.call(this,e)},createNewLayer:function(e){var n=t.GeoJSON.geometryToLayer(e,this.options);return n.defaultOptions=n.options,n},_updateLayer:function(e,n){var i=[],r=this.options.coordsToLatLng||t.GeoJSON.coordsToLatLng;switch(n.properties&&(e.feature.properties=n.properties),n.geometry.type){case"Point":i=t.GeoJSON.coordsToLatLng(n.geometry.coordinates),e.setLatLng(i);break;case"LineString":i=t.GeoJSON.coordsToLatLngs(n.geometry.coordinates,0,r),e.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=t.GeoJSON.coordsToLatLngs(n.geometry.coordinates,1,r),e.setLatLngs(i);break;case"MultiPolygon":i=t.GeoJSON.coordsToLatLngs(n.geometry.coordinates,2,r),e.setLatLngs(i)}},createLayers:function(e){for(var t=e.length-1;t>=0;t--){var n,i=e[t],r=this._layers[i.id];this._visibleZoom()&&r&&!this._map.hasLayer(r)&&(this._map.addLayer(r),this.fire("addfeature",{feature:r.feature},!0)),r&&this.options.simplifyFactor>0&&(r.setLatLngs||r.setLatLng)&&this._updateLayer(r,i),r||((n=this.createNewLayer(i)).feature=i,n.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(n.feature,n),this._layers[n.feature.id]=n,this.setFeatureStyle(n.feature.id,this.options.style),this.fire("createfeature",{feature:n.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(i))&&this._map.addLayer(n))}},addLayers:function(e){for(var t=e.length-1;t>=0;t--){var n=this._layers[e[t]];n&&this._map.addLayer(n)}},removeLayers:function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n],r=this._layers[i];r&&(this.fire("removefeature",{feature:r.feature,permanent:t},!0),this._map.removeLayer(r)),r&&t&&delete this._layers[i]}},cellEnter:function(e,n){this._visibleZoom()&&!this._zooming&&this._map&&t.Util.requestAnimFrame(t.Util.bind(function(){var e=this._cacheKey(n),t=this._cellCoordsToKey(n),i=this._cache[e];this._activeCells[t]&&i&&this.addLayers(i)},this))},cellLeave:function(e,n){this._zooming||t.Util.requestAnimFrame(t.Util.bind(function(){if(this._map){var e=this._cacheKey(n),t=this._cellCoordsToKey(n),i=this._cache[e],r=this._map.getBounds();if(!this._activeCells[t]&&i){for(var s=!0,o=0;o<i.length;o++){var a=this._layers[i[o]];a&&a.getBounds&&r.intersects(a.getBounds())&&(s=!1)}s&&this.removeLayers(i,!this.options.cacheLayers),!this.options.cacheLayers&&s&&(delete this._cache[e],delete this._cells[t],delete this._activeCells[t])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(e){this.resetFeatureStyle(e.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(e){var n=this._layers[e],i=this._originalStyle||L.Path.prototype.options;return n&&(t.Util.extend(n.options,n.defaultOptions),this.setFeatureStyle(e,i)),this},setFeatureStyle:function(e,t){var n=this._layers[e];return"function"==typeof t&&(t=t(n.feature)),n.setStyle&&n.setStyle(t),this},eachActiveFeature:function(e,t){if(this._map){var n=this._map.getBounds();for(var i in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[i].feature.id)&&("function"==typeof this._layers[i].getLatLng&&n.contains(this._layers[i].getLatLng())?e.call(t,this._layers[i]):"function"==typeof this._layers[i].getBounds&&n.intersects(this._layers[i].getBounds())&&e.call(t,this._layers[i]))}return this},eachFeature:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getFeature:function(e){return this._layers[e]},bringToBack:function(){this.eachFeature(function(e){e.bringToBack&&e.bringToBack()})},bringToFront:function(){this.eachFeature(function(e){e.bringToFront&&e.bringToFront()})},redraw:function(e){return e&&this._redraw(e),this},_redraw:function(e){var n=this._layers[e],i=n.feature;if(n&&n.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var r=this.options.pointToLayer(i,t.latLng(i.geometry.coordinates[1],i.geometry.coordinates[0]));n.setIcon(r.options.icon)}if(n&&n.setStyle&&this.options.pointToLayer){var s=this.options.pointToLayer(i,t.latLng(i.geometry.coordinates[1],i.geometry.coordinates[0]));this.setFeatureStyle(i.id,s.options)}n&&n.setStyle&&this.options.style&&this.resetStyle(i.id)}});e.VERSION="2.1.2",e.Support=s,e.options=o,e.Util=V,e.get=f,e.post=h,e.request=d,e.Task=q,e.task=function(e){return e=O(e),new q(e)},e.Query=G,e.query=Z,e.Find=H,e.find=W,e.Identify=$,e.identify=function(e){return new $(e)},e.IdentifyFeatures=J,e.identifyFeatures=Y,e.IdentifyImage=K,e.identifyImage=Q,e.Service=X,e.service=function(e){return e=O(e),new X(e)},e.MapService=ee,e.mapService=te,e.ImageService=ne,e.imageService=ie,e.FeatureLayerService=re,e.featureLayerService=se,e.BasemapLayer=ae,e.basemapLayer=function(e,t){return new ae(e,t)},e.TiledMapLayer=le,e.tiledMapLayer=function(e,t){return new le(e,t)},e.RasterLayer=he,e.ImageMapLayer=ce,e.imageMapLayer=function(e,t){return new ce(e,t)},e.DynamicMapLayer=de,e.dynamicMapLayer=function(e,t){return new de(e,t)},e.FeatureManager=me,e.FeatureLayer=ge,e.featureLayer=function(e){return new ge(e)}}(t,n("4R65"))},CgaS:function(e,t,n){"use strict";var i=n("xTJ+"),r=n("MLWZ"),s=n("9rSQ"),o=n("UnBK"),a=n("SntB");function l(e){this.defaults=e,this.interceptors={request:new s,response:new s}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=a(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){l.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){l.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=l},DfZB:function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},EVdn:function(e,t,n){var i;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,r){"use strict";var s=[],o=n.document,a=Object.getPrototypeOf,l=s.slice,u=s.concat,h=s.push,c=s.indexOf,d={},p=d.toString,f=d.hasOwnProperty,m=f.toString,g=m.call(Object),_={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},b={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var i,r,s=(n=n||o).createElement("script");if(s.text=e,t)for(i in b)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[p.call(e)]||"object":typeof e}var T=function(e,t){return new T.fn.init(e,t)},C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function L(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!y(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}T.fn=T.prototype={jquery:"3.4.0",constructor:T,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return T.each(this,e)},map:function(e){return this.pushStack(T.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:s.sort,splice:s.splice},T.extend=T.fn.extend=function(){var e,t,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&o!==i&&(u&&i&&(T.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[t],s=r&&!Array.isArray(n)?[]:r||T.isPlainObject(n)?n:{},r=!1,o[t]=T.extend(u,s,i)):void 0!==i&&(o[t]=i));return o},T.extend({expando:"jQuery"+("3.4.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==p.call(e)||(t=a(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||m.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){w(e,{nonce:t&&t.nonce})},each:function(e,t){var n,i=0;if(L(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(L(Object(e))?T.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,s=e.length,o=!n;r<s;r++)!t(e[r],r)!==o&&i.push(e[r]);return i},map:function(e,t,n){var i,r,s=0,o=[];if(L(e))for(i=e.length;s<i;s++)null!=(r=t(e[s],s,n))&&o.push(r);else for(s in e)null!=(r=t(e[s],s,n))&&o.push(r);return u.apply([],o)},guid:1,support:_}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=s[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()});var S=function(e){var t,n,i,r,s,o,a,l,u,h,c,d,p,f,m,g,_,y,v,b="sizzle"+1*new Date,w=e.document,x=0,T=0,C=le(),L=le(),S=le(),E=le(),P=function(e,t){return e===t&&(c=!0),0},I={}.hasOwnProperty,A=[],k=A.pop,M=A.push,O=A.push,D=A.slice,R=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",z=new RegExp(F+"+","g"),V=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),q=new RegExp("^"+F+"*,"+F+"*"),G=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),Z=new RegExp(F+"|>"),H=new RegExp(j),W=new RegExp("^"+B+"$"),$={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},se=function(){d()},oe=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{O.apply(A=D.call(w.childNodes),w.childNodes)}catch(Le){O={apply:A.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,i,r){var s,a,u,h,c,f,_,y=t&&t.ownerDocument,x=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return i;if(!r&&((t?t.ownerDocument||t:w)!==p&&d(t),t=t||p,m)){if(11!==x&&(c=X.exec(e)))if(s=c[1]){if(9===x){if(!(u=t.getElementById(s)))return i;if(u.id===s)return i.push(u),i}else if(y&&(u=y.getElementById(s))&&v(t,u)&&u.id===s)return i.push(u),i}else{if(c[2])return O.apply(i,t.getElementsByTagName(e)),i;if((s=c[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(s)),i}if(n.qsa&&!E[e+" "]&&(!g||!g.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(_=e,y=t,1===x&&Z.test(e)){for((h=t.getAttribute("id"))?h=h.replace(ie,re):t.setAttribute("id",h=b),a=(f=o(e)).length;a--;)f[a]="#"+h+" "+ve(f[a]);_=f.join(","),y=ee.test(e)&&_e(t.parentNode)||t}try{return O.apply(i,y.querySelectorAll(_)),i}catch(T){E(e,!0)}finally{h===b&&t.removeAttribute("id")}}}return l(e.replace(V,"$1"),t,i,r)}function le(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ue(e){return e[b]=!0,e}function he(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(Le){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function de(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ue(function(t){return t=+t,ue(function(n,i){for(var r,s=e([],n.length,t),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function _e(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},s=ae.isXML=function(e){var t=(e.ownerDocument||e).documentElement;return!J.test(e.namespaceURI||t&&t.nodeName||"HTML")},d=ae.setDocument=function(e){var t,r,o=e?e.ownerDocument||e:w;return o!==p&&9===o.nodeType&&o.documentElement?(f=(p=o).documentElement,m=!s(p),w!==p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",se,!1):r.attachEvent&&r.attachEvent("onunload",se)),n.attributes=he(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=he(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=he(function(e){return f.appendChild(e).id=b,!p.getElementsByName||!p.getElementsByName(b).length}),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,r,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(r=t.getElementsByName(e),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},_=[],g=[],(n.qsa=Q.test(p.querySelectorAll))&&(he(function(e){f.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+b+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]")}),he(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=Q.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&he(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),_.push("!=",j)}),g=g.length&&new RegExp(g.join("|")),_=_.length&&new RegExp(_.join("|")),t=Q.test(f.compareDocumentPosition),v=t||Q.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return c=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===p||e.ownerDocument===w&&v(w,e)?-1:t===p||t.ownerDocument===w&&v(w,t)?1:h?R(h,e)-R(h,t):0:4&i?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,i=0,r=e.parentNode,s=t.parentNode,o=[e],a=[t];if(!r||!s)return e===p?-1:t===p?1:r?-1:s?1:h?R(h,e)-R(h,t):0;if(r===s)return de(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?de(o[i],a[i]):o[i]===w?-1:a[i]===w?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&d(e),n.matchesSelector&&m&&!E[t+" "]&&(!_||!_.test(t))&&(!g||!g.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(Le){E(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==p&&d(e),v(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==p&&d(e);var r=i.attrHandle[t.toLowerCase()],s=r&&I.call(i.attrHandle,t.toLowerCase())?r(e,t,!m):void 0;return void 0!==s?s:n.attributes||!m?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ae.escape=function(e){return(e+"").replace(ie,re)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,i=[],r=0,s=0;if(c=!n.detectDuplicates,h=!n.sortStable&&e.slice(0),e.sort(P),c){for(;t=e[s++];)t===e[s]&&(r=i.push(s));for(;r--;)e.splice(i[r],1)}return h=null,e},r=ae.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=ae.selectors={cacheLength:50,createPseudo:ue,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&H.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=ae.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(z," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,h,c,d,p,f,m=s!==o?"nextSibling":"previousSibling",g=t.parentNode,_=a&&t.nodeName.toLowerCase(),y=!l&&!a,v=!1;if(g){if(s){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===_:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(v=(p=(u=(h=(c=(d=g)[b]||(d[b]={}))[d.uniqueID]||(c[d.uniqueID]={}))[e]||[])[0]===x&&u[1])&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(v=p=0)||f.pop();)if(1===d.nodeType&&++v&&d===t){h[e]=[x,p,v];break}}else if(y&&(v=p=(u=(h=(c=(d=t)[b]||(d[b]={}))[d.uniqueID]||(c[d.uniqueID]={}))[e]||[])[0]===x&&u[1]),!1===v)for(;(d=++p&&d&&d[m]||(v=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==_:1!==d.nodeType)||!++v||(y&&((h=(c=d[b]||(d[b]={}))[d.uniqueID]||(c[d.uniqueID]={}))[e]=[x,v]),d!==t)););return(v-=r)===i||v%i==0&&v/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,n){for(var i,s=r(e,t),o=s.length;o--;)e[i=R(e,s[o])]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ue(function(e){var t=[],n=[],i=a(e.replace(V,"$1"));return i[b]?ue(function(e,t,n,r){for(var s,o=i(e,null,r,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,r,s){return t[0]=e,i(t,null,s,n),t[0]=null,!n.pop()}}),has:ue(function(e){return function(t){return ae(e,t).length>0}}),contains:ue(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||r(t)).indexOf(e)>-1}}),lang:ue(function(e){return W.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge(function(){return[0]}),last:ge(function(e,t){return[t-1]}),eq:ge(function(e,t,n){return[n<0?n+t:n]}),even:ge(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ge(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ge(function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:ge(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=fe(t);function ye(){}function ve(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function be(e,t,n){var i=t.dir,r=t.next,s=r||i,o=n&&"parentNode"===s,a=T++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r);return!1}:function(t,n,l){var u,h,c,d=[x,a];if(l){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(h=(c=t[b]||(t[b]={}))[t.uniqueID]||(c[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((u=h[s])&&u[0]===x&&u[1]===a)return d[2]=u[2];if(h[s]=d,d[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function xe(e,t,n,i,r){for(var s,o=[],a=0,l=e.length,u=null!=t;a<l;a++)(s=e[a])&&(n&&!n(s,i,r)||(o.push(s),u&&t.push(a)));return o}function Te(e,t,n,i,r,s){return i&&!i[b]&&(i=Te(i)),r&&!r[b]&&(r=Te(r,s)),ue(function(s,o,a,l){var u,h,c,d=[],p=[],f=o.length,m=s||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ae(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?m:xe(m,d,e,a,l),_=n?r||(s?e:f||i)?[]:o:g;if(n&&n(g,_,a,l),i)for(u=xe(_,p),i(u,[],a,l),h=u.length;h--;)(c=u[h])&&(_[p[h]]=!(g[p[h]]=c));if(s){if(r||e){if(r){for(u=[],h=_.length;h--;)(c=_[h])&&u.push(g[h]=c);r(null,_=[],u,l)}for(h=_.length;h--;)(c=_[h])&&(u=r?R(s,c):d[h])>-1&&(s[u]=!(o[u]=c))}}else _=xe(_===o?_.splice(f,_.length):_),r?r(null,o,_,l):O.apply(o,_)})}function Ce(e){for(var t,n,r,s=e.length,o=i.relative[e[0].type],a=o||i.relative[" "],l=o?1:0,h=be(function(e){return e===t},a,!0),c=be(function(e){return R(t,e)>-1},a,!0),d=[function(e,n,i){var r=!o&&(i||n!==u)||((t=n).nodeType?h(e,n,i):c(e,n,i));return t=null,r}];l<s;l++)if(n=i.relative[e[l].type])d=[be(we(d),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(r=++l;r<s&&!i.relative[e[r].type];r++);return Te(l>1&&we(d),l>1&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(V,"$1"),n,l<r&&Ce(e.slice(l,r)),r<s&&Ce(e=e.slice(r)),r<s&&ve(e))}d.push(n)}return we(d)}return ye.prototype=i.filters=i.pseudos,i.setFilters=new ye,o=ae.tokenize=function(e,t){var n,r,s,o,a,l,u,h=L[e+" "];if(h)return t?0:h.slice(0);for(a=e,l=[],u=i.preFilter;a;){for(o in n&&!(r=q.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=G.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(V," ")}),a=a.slice(n.length)),i.filter)!(r=$[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):L(e,l).slice(0)},a=ae.compile=function(e,t){var n,r=[],s=[],a=S[e+" "];if(!a){for(t||(t=o(e)),n=t.length;n--;)(a=Ce(t[n]))[b]?r.push(a):s.push(a);(a=S(e,function(e,t){var n=t.length>0,r=e.length>0,s=function(s,o,a,l,h){var c,f,g,_=0,y="0",v=s&&[],b=[],w=u,T=s||r&&i.find.TAG("*",h),C=x+=null==w?1:Math.random()||.1,L=T.length;for(h&&(u=o===p||o||h);y!==L&&null!=(c=T[y]);y++){if(r&&c){for(f=0,o||c.ownerDocument===p||(d(c),a=!m);g=e[f++];)if(g(c,o||p,a)){l.push(c);break}h&&(x=C)}n&&((c=!g&&c)&&_--,s&&v.push(c))}if(_+=y,n&&y!==_){for(f=0;g=t[f++];)g(v,b,o,a);if(s){if(_>0)for(;y--;)v[y]||b[y]||(b[y]=k.call(l));b=xe(b)}O.apply(l,b),h&&!s&&b.length>0&&_+t.length>1&&ae.uniqueSort(l)}return h&&(x=C,u=w),v};return n?ue(s):s}(s,r))).selector=e}return a},l=ae.select=function(e,t,n,r){var s,l,u,h,c,d="function"==typeof e&&e,p=!r&&o(e=d.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&m&&i.relative[l[1].type]){if(!(t=(i.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(s=$.needsContext.test(e)?0:l.length;s--&&!i.relative[h=(u=l[s]).type];)if((c=i.find[h])&&(r=c(u.matches[0].replace(te,ne),ee.test(l[0].type)&&_e(t.parentNode)||t))){if(l.splice(s,1),!(e=r.length&&ve(l)))return O.apply(n,r),n;break}}return(d||a(e,p))(r,t,!m,n,!t||ee.test(e)&&_e(t.parentNode)||t),n},n.sortStable=b.split("").sort(P).join("")===b,n.detectDuplicates=!!c,d(),n.sortDetached=he(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),he(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&he(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),he(function(e){return null==e.getAttribute("disabled")})||ce(N,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),ae}(n);T.find=S,T.expr=S.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=S.uniqueSort,T.text=S.getText,T.isXMLDoc=S.isXML,T.contains=S.contains,T.escapeSelector=S.escape;var E=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&T(e).is(n))break;i.push(e)}return i},P=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},I=T.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(e,t,n){return y(t)?T.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?T.grep(e,function(e){return e===t!==n}):"string"!=typeof t?T.grep(e,function(e){return c.call(t,e)>-1!==n}):T.filter(t,e,n)}T.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?T.find.matchesSelector(i,e)?[i]:[]:T.find.matches(e,T.grep(t,function(e){return 1===e.nodeType}))},T.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(T(e).filter(function(){for(t=0;t<i;t++)if(T.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)T.find(e,r[t],n);return i>1?T.uniqueSort(n):n},filter:function(e){return this.pushStack(M(this,e||[],!1))},not:function(e){return this.pushStack(M(this,e||[],!0))},is:function(e){return!!M(this,"string"==typeof e&&I.test(e)?T(e):e||[],!1).length}});var O,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||O,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:D.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(T.merge(this,T.parseHTML(i[1],(t=t instanceof T?t[0]:t)&&t.nodeType?t.ownerDocument||t:o,!0)),k.test(i[1])&&T.isPlainObject(t))for(i in t)y(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=o.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(T):T.makeArray(e,this)}).prototype=T.fn,O=T(o);var R=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(T.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,s=[],o="string"!=typeof e&&T(e);if(!I.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?T.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?c.call(T(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return P((e.parentNode||{}).firstChild,e)},children:function(e){return P(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},function(e,t){T.fn[e]=function(n,i){var r=T.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=T.filter(i,r)),this.length>1&&(N[e]||T.uniqueSort(r),R.test(e)&&r.reverse()),this.pushStack(r)}});var B=/[^\x20\t\r\n\f]+/g;function U(e){return e}function j(e){throw e}function z(e,t,n,i){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(n):e&&y(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}T.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return T.each(e.match(B)||[],function(e,n){t[n]=!0}),t}(e):T.extend({},e);var t,n,i,r,s=[],o=[],a=-1,l=function(){for(r=r||e.once,i=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},u={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){T.each(n,function(n,i){y(i)?e.unique&&u.has(i)||s.push(i):i&&i.length&&"string"!==x(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return T.each(arguments,function(e,t){for(var n;(n=T.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--}),this},has:function(e){return e?T.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||t||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},T.extend({Deferred:function(e){var t=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return T.Deferred(function(n){T.each(t,function(t,i){var r=y(e[i[4]])&&e[i[4]];s[i[1]](function(){var e=r&&r.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(e,i,r){var s=0;function o(e,t,i,r){return function(){var a=this,l=arguments,u=function(){var n,u;if(!(e<s)){if((n=i.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");y(u=n&&("object"==typeof n||"function"==typeof n)&&n.then)?r?u.call(n,o(s,t,U,r),o(s,t,j,r)):u.call(n,o(++s,t,U,r),o(s,t,j,r),o(s,t,U,t.notifyWith)):(i!==U&&(a=void 0,l=[n]),(r||t.resolveWith)(a,l))}},h=r?u:function(){try{u()}catch(n){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(n,h.stackTrace),e+1>=s&&(i!==j&&(a=void 0,l=[n]),t.rejectWith(a,l))}};e?h():(T.Deferred.getStackHook&&(h.stackTrace=T.Deferred.getStackHook()),n.setTimeout(h))}}return T.Deferred(function(n){t[0][3].add(o(0,n,y(r)?r:U,n.notifyWith)),t[1][3].add(o(0,n,y(e)?e:U)),t[2][3].add(o(0,n,y(i)?i:j))}).promise()},promise:function(e){return null!=e?T.extend(e,r):r}},s={};return T.each(t,function(e,n){var o=n[2],a=n[5];r[n[1]]=o.add,a&&o.add(function(){i=a},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(n[3].fire),s[n[0]]=function(){return s[n[0]+"With"](this===s?void 0:this,arguments),this},s[n[0]+"With"]=o.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,i=Array(n),r=l.call(arguments),s=T.Deferred(),o=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?l.call(arguments):n,--t||s.resolveWith(i,r)}};if(t<=1&&(z(e,s.done(o(n)).resolve,s.reject,!t),"pending"===s.state()||y(r[n]&&r[n].then)))return s.then();for(;n--;)z(r[n],o(n),s.reject);return s.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&V.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){n.setTimeout(function(){throw e})};var q=T.Deferred();function G(){o.removeEventListener("DOMContentLoaded",G),n.removeEventListener("load",G),T.ready()}T.fn.ready=function(e){return q.then(e).catch(function(e){T.readyException(e)}),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==e&&--T.readyWait>0||q.resolveWith(o,[T]))}}),T.ready.then=q.then,"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?n.setTimeout(T.ready):(o.addEventListener("DOMContentLoaded",G),n.addEventListener("load",G));var Z=function(e,t,n,i,r,s,o){var a=0,l=e.length,u=null==n;if("object"===x(n))for(a in r=!0,n)Z(e,t,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,y(i)||(o=!0),u&&(o?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(T(e),n)})),t))for(;a<l;a++)t(e[a],n,o?i:i.call(e[a],a,t(e[a],n)));return r?e:u?t.call(e):l?t(e[0],n):s},H=/^-ms-/,W=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function J(e){return e.replace(H,"ms-").replace(W,$)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=T.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[J(t)]=n;else for(i in t)r[J(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(J):(t=J(t))in i?[t]:t.match(B)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||T.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var Q=new K,X=new K,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(r){}X.set(e,t,n)}else n=void 0;return n}T.extend({hasData:function(e){return X.hasData(e)||Q.hasData(e)},data:function(e,t,n){return X.access(e,t,n)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),T.fn.extend({data:function(e,t){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=X.get(s),1===s.nodeType&&!Q.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=J(i.slice(5)),ne(s,i,r[i]));Q.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){X.set(this,e)}):Z(this,function(t){var n;if(s&&void 0===t)return void 0!==(n=X.get(s,e))?n:void 0!==(n=ne(s,e))?n:void 0;this.each(function(){X.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){X.remove(this,e)})}}),T.extend({queue:function(e,t,n){var i;if(e)return i=Q.get(e,t=(t||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=Q.access(e,t,T.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){var n=T.queue(e,t=t||"fx"),i=n.length,r=n.shift(),s=T._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,function(){T.dequeue(e,t)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:T.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),T.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?T.queue(this[0],e):void 0===t?this:this.each(function(){var n=T.queue(this,e,t);T._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&T.dequeue(this,e)})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=T.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=Q.get(s[o],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],oe=o.documentElement,ae=function(e){return T.contains(e.ownerDocument,e)},le={composed:!0};oe.attachShadow&&(ae=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===T.css(e,"display")},he=function(e,t,n,i){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in r=n.apply(e,i||[]),t)e.style[s]=o[s];return r};function ce(e,t,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return T.css(e,t,"")},l=a(),u=n&&n[3]||(T.cssNumber[t]?"":"px"),h=e.nodeType&&(T.cssNumber[t]||"px"!==u&&+l)&&re.exec(T.css(e,t));if(h&&h[3]!==u){for(u=u||h[3],h=+(l/=2)||1;o--;)T.style(e,t,h+u),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),h/=s;T.style(e,t,(h*=2)+u),n=n||[]}return n&&(h=+h||+l||0,r=n[1]?h+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=h,i.end=r)),r}var de={};function pe(e){var t,n=e.ownerDocument,i=e.nodeName,r=de[i];return r||(t=n.body.appendChild(n.createElement(i)),r=T.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),de[i]=r,r)}function fe(e,t){for(var n,i,r=[],s=0,o=e.length;s<o;s++)(i=e[s]).style&&(n=i.style.display,t?("none"===n&&(r[s]=Q.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&ue(i)&&(r[s]=pe(i))):"none"!==n&&(r[s]="none",Q.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}T.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ue(this)?T(this).show():T(this).hide()})}});var me=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,_e=/^$|^module$|\/(?:java|ecma)script/i,ye={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?T.merge([e],n):n}function be(e,t){for(var n=0,i=e.length;n<i;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ye.optgroup=ye.option,ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td;var we,xe,Te=/<|&#?\w+;/;function Ce(e,t,n,i,r){for(var s,o,a,l,u,h,c=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((s=e[p])||0===s)if("object"===x(s))T.merge(d,s.nodeType?[s]:s);else if(Te.test(s)){for(o=o||c.appendChild(t.createElement("div")),a=(ge.exec(s)||["",""])[1].toLowerCase(),o.innerHTML=(l=ye[a]||ye._default)[1]+T.htmlPrefilter(s)+l[2],h=l[0];h--;)o=o.lastChild;T.merge(d,o.childNodes),(o=c.firstChild).textContent=""}else d.push(t.createTextNode(s));for(c.textContent="",p=0;s=d[p++];)if(i&&T.inArray(s,i)>-1)r&&r.push(s);else if(u=ae(s),o=ve(c.appendChild(s),"script"),u&&be(o),n)for(h=0;s=o[h++];)_e.test(s.type||"")&&n.push(s);return c}we=o.createDocumentFragment().appendChild(o.createElement("div")),(xe=o.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),we.appendChild(xe),_.checkClone=we.cloneNode(!0).cloneNode(!0).lastChild.checked,we.innerHTML="<textarea>x</textarea>",_.noCloneChecked=!!we.cloneNode(!0).lastChild.defaultValue;var Le=/^key/,Se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function Pe(){return!0}function Ie(){return!1}function Ae(e,t){return e===function(){try{return o.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,i,r,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)ke(e,a,n,i,t[a],s);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Ie;else if(!r)return e;return 1===s&&(o=r,(r=function(e){return T().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=T.guid++)),e.each(function(){T.event.add(this,t,r,i,n)})}function Me(e,t,n){n?(Q.set(e,t,!1),T.event.add(e,t,{namespace:!1,handler:function(e){var i,r,s=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(s)(T.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=l.call(arguments),Q.set(this,t,s),i=n(this,t),this[t](),s!==(r=Q.get(this,t))||i?Q.set(this,t,!1):r=void 0,s!==r)return e.stopImmediatePropagation(),e.preventDefault(),r}else s&&(Q.set(this,t,T.event.trigger(T.extend(s.shift(),T.Event.prototype),s,this)),e.stopImmediatePropagation())}})):T.event.add(e,t,Pe)}T.event={global:{},add:function(e,t,n,i,r){var s,o,a,l,u,h,c,d,p,f,m,g=Q.get(e);if(g)for(n.handler&&(n=(s=n).handler,r=s.selector),r&&T.find.matchesSelector(oe,r),n.guid||(n.guid=T.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)p=m=(a=Ee.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(c=T.event.special[p]||{},c=T.event.special[p=(r?c.delegateType:c.bindType)||p]||{},h=T.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=l[p])||((d=l[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,i,f,o)||e.addEventListener&&e.addEventListener(p,o)),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),T.event.global[p]=!0)},remove:function(e,t,n,i,r){var s,o,a,l,u,h,c,d,p,f,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(B)||[""]).length;u--;)if(p=m=(a=Ee.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(c=T.event.special[p]||{},d=l[p=(i?c.delegateType:c.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)h=d[s],!r&&m!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||i&&i!==h.selector&&("**"!==i||!h.selector)||(d.splice(s,1),h.selector&&d.delegateCount--,c.remove&&c.remove.call(e,h));o&&!d.length&&(c.teardown&&!1!==c.teardown.call(e,f,g.handle)||T.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)T.event.remove(e,p+t[u],n,i,!0);T.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,s,o,a=T.event.fix(e),l=new Array(arguments.length),u=(Q.get(this,"events")||{})[a.type]||[],h=T.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(o=T.event.handlers.call(this,a,u),t=0;(r=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==s.namespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(i=((T.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,i,r,s,o,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(s=[],o={},n=0;n<l;n++)void 0===o[r=(i=t[n]).selector+" "]&&(o[r]=i.needsContext?T(r,this).index(u)>-1:T.find(r,this,null,[u]).length),o[r]&&s.push(i);s.length&&a.push({elem:u,handlers:s})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return me.test(t.type)&&t.click&&A(t,"input")&&void 0===Q.get(t,"click")&&Me(t,"click",Pe),!1},trigger:function(e){var t=this||e;return me.test(t.type)&&t.click&&A(t,"input")&&void 0===Q.get(t,"click")&&Me(t,"click"),!0},_default:function(e){var t=e.target;return me.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Pe:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Pe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Pe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Pe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Le.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Se.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(e,t){T.event.special[e]={setup:function(){return Me(this,e,Ae),!1},trigger:function(){return Me(this,e),!0},delegateType:t}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){T.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return r&&(r===i||T.contains(i,r))||(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),T.fn.extend({on:function(e,t,n,i){return ke(this,e,t,n,i)},one:function(e,t,n,i){return ke(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,T(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ie),this.each(function(){T.event.remove(this,e,n,t)})}});var Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,De=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Fe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Be(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var n,i,r,s,o,a,l,u;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.access(e),o=Q.set(t,s),u=s.events))for(r in delete o.handle,o.events={},u)for(n=0,i=u[r].length;n<i;n++)T.event.add(t,r,u[r][n]);X.hasData(e)&&(a=X.access(e),l=T.extend({},a),X.set(t,l))}}function ze(e,t){var n=t.nodeName.toLowerCase();"input"===n&&me.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ve(e,t,n,i){t=u.apply([],t);var r,s,o,a,l,h,c=0,d=e.length,p=d-1,f=t[0],m=y(f);if(m||d>1&&"string"==typeof f&&!_.checkClone&&Re.test(f))return e.each(function(r){var s=e.eq(r);m&&(t[0]=f.call(this,r,s.html())),Ve(s,t,n,i)});if(d&&(s=(r=Ce(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=(o=T.map(ve(r,"script"),Be)).length;c<d;c++)l=r,c!==p&&(l=T.clone(l,!0,!0),a&&T.merge(o,ve(l,"script"))),n.call(e[c],l,c);if(a)for(h=o[o.length-1].ownerDocument,T.map(o,Ue),c=0;c<a;c++)_e.test((l=o[c]).type||"")&&!Q.access(l,"globalEval")&&T.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&!l.noModule&&T._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):w(l.textContent.replace(Ne,""),l,h))}return e}function qe(e,t,n){for(var i,r=t?T.filter(t,e):e,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||T.cleanData(ve(i)),i.parentNode&&(n&&ae(i)&&be(ve(i,"script")),i.parentNode.removeChild(i));return e}T.extend({htmlPrefilter:function(e){return e.replace(Oe,"<$1></$2>")},clone:function(e,t,n){var i,r,s,o,a=e.cloneNode(!0),l=ae(e);if(!(_.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(o=ve(a),i=0,r=(s=ve(e)).length;i<r;i++)ze(s[i],o[i]);if(t)if(n)for(s=s||ve(e),o=o||ve(a),i=0,r=s.length;i<r;i++)je(s[i],o[i]);else je(e,a);return(o=ve(a,"script")).length>0&&be(o,!l&&ve(e,"script")),a},cleanData:function(e){for(var t,n,i,r=T.event.special,s=0;void 0!==(n=e[s]);s++)if(Y(n)){if(t=n[Q.expando]){if(t.events)for(i in t.events)r[i]?T.event.remove(n,i):T.removeEvent(n,i,t.handle);n[Q.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),T.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return Z(this,function(e){return void 0===e?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ve(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Fe(this,e).appendChild(e)})},prepend:function(){return Ve(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Fe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return T.clone(this,e,t)})},html:function(e){return Z(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!ye[(ge.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(T.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ve(this,arguments,function(t){var n=this.parentNode;T.inArray(this,e)<0&&(T.cleanData(ve(this)),n&&n.replaceChild(t,this))},e)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){T.fn[e]=function(e){for(var n,i=[],r=T(e),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),T(r[o])[t](n),h.apply(i,n.get());return this.pushStack(i)}});var Ge=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),Ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},He=new RegExp(se.join("|"),"i");function We(e,t,n){var i,r,s,o,a=e.style;return(n=n||Ze(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||ae(e)||(o=T.style(e,t)),!_.pixelBoxStyles()&&Ge.test(o)&&He.test(t)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(h){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(u).appendChild(h);var e=n.getComputedStyle(h);i="1%"!==e.top,l=12===t(e.marginLeft),h.style.right="60%",a=36===t(e.right),r=36===t(e.width),h.style.position="absolute",s=12===t(h.offsetWidth/3),oe.removeChild(u),h=null}}function t(e){return Math.round(parseFloat(e))}var i,r,s,a,l,u=o.createElement("div"),h=o.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",_.clearCloneStyle="content-box"===h.style.backgroundClip,T.extend(_,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s}}))}();var Je=["Webkit","Moz","ms"],Ye=o.createElement("div").style,Ke={};function Qe(e){return T.cssProps[e]||Ke[e]||(e in Ye?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Je.length;n--;)if((e=Je[n]+t)in Ye)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,et=/^--/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function it(e,t,n){var i=re.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function rt(e,t,n,i,r,s){var o="width"===t?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=T.css(e,n+se[o],!0,r)),i?("content"===n&&(l-=T.css(e,"padding"+se[o],!0,r)),"margin"!==n&&(l-=T.css(e,"border"+se[o]+"Width",!0,r))):(l+=T.css(e,"padding"+se[o],!0,r),"padding"!==n?l+=T.css(e,"border"+se[o]+"Width",!0,r):a+=T.css(e,"border"+se[o]+"Width",!0,r));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-a-.5))||0),l}function st(e,t,n){var i=Ze(e),r=(!_.boxSizingReliable()||n)&&"border-box"===T.css(e,"boxSizing",!1,i),s=r,o=We(e,t,i),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ge.test(o)){if(!n)return o;o="auto"}return(!_.boxSizingReliable()&&r||"auto"===o||!parseFloat(o)&&"inline"===T.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===T.css(e,"boxSizing",!1,i),(s=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+rt(e,t,n||(r?"border":"content"),s,i,o)+"px"}function ot(e,t,n,i,r){return new ot.prototype.init(e,t,n,i,r)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=J(t),l=et.test(t),u=e.style;if(l||(t=Qe(a)),o=T.cssHooks[t]||T.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:u[t];"string"==(s=typeof n)&&(r=re.exec(n))&&r[1]&&(n=ce(e,t,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(T.cssNumber[a]?"":"px")),_.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,i){var r,s,o,a=J(t);return et.test(t)||(t=Qe(a)),(o=T.cssHooks[t]||T.cssHooks[a])&&"get"in o&&(r=o.get(e,!0,n)),void 0===r&&(r=We(e,t,i)),"normal"===r&&t in nt&&(r=nt[t]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),T.each(["height","width"],function(e,t){T.cssHooks[t]={get:function(e,n,i){if(n)return!Xe.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?st(e,t,i):he(e,tt,function(){return st(e,t,i)})},set:function(e,n,i){var r,s=Ze(e),o=!_.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===T.css(e,"boxSizing",!1,s),l=i?rt(e,t,i,a,s):0;return a&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-rt(e,t,"border",!1,s)-.5)),l&&(r=re.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=T.css(e,t)),it(0,n,l)}}}),T.cssHooks.marginLeft=$e(_.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-he(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(e,t){T.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+se[i]+t]=s[i]||s[i-2]||s[0];return r}},"margin"!==e&&(T.cssHooks[e+t].set=it)}),T.fn.extend({css:function(e,t){return Z(this,function(e,t,n){var i,r,s={},o=0;if(Array.isArray(t)){for(i=Ze(e),r=t.length;o<r;o++)s[t[o]]=T.css(e,t[o],!1,i);return s}return void 0!==n?T.style(e,t,n):T.css(e,t)},e,t,arguments.length>1)}}),T.Tween=ot,(ot.prototype={constructor:ot,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(T.cssNumber[n]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,n=ot.propHooks[this.prop];return this.pos=t=this.options.duration?T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ot.propHooks._default.set(this),this}}).init.prototype=ot.prototype,(ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=T.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[Qe(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=ot.prototype.init,T.fx.step={};var at,lt,ut=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;function ct(){lt&&(!1===o.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ct):n.setTimeout(ct,T.fx.interval),T.fx.tick())}function dt(){return n.setTimeout(function(){at=void 0}),at=Date.now()}function pt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=se[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function ft(e,t,n){for(var i,r=(mt.tweeners[t]||[]).concat(mt.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,t,e))return i}function mt(e,t,n){var i,r,s=0,o=mt.prefilters.length,a=T.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=at||dt(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),s=0,o=u.tweens.length;s<o;s++)u.tweens[s].run(i);return a.notifyWith(e,[u,i,n]),i<1&&o?n:(o||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:t,originalOptions:n,startTime:at||dt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=T.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),h=u.props;for(function(e,t){var n,i,r,s,o;for(n in e)if(r=t[i=J(n)],s=e[n],Array.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),(o=T.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete e[i],s)n in e||(e[n]=s[n],t[n]=r);else t[i]=r}(h,u.opts.specialEasing);s<o;s++)if(i=mt.prefilters[s].call(u,e,h,u.opts))return y(i.stop)&&(T._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return T.map(h,ft,u),y(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),T.fx.timer(T.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}T.Animation=T.extend(mt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(B);for(var n,i=0,r=e.length;i<r;i++)(mt.tweeners[n=e[i]]=mt.tweeners[n]||[]).unshift(t)},prefilters:[function(e,t,n){var i,r,s,o,a,l,u,h,c="width"in t||"height"in t,d=this,p={},f=e.style,m=e.nodeType&&ue(e),g=Q.get(e,"fxshow");for(i in n.queue||(null==(o=T._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,T.queue(e,"fx").length||o.empty.fire()})})),t)if(ut.test(r=t[i])){if(delete t[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||T.style(e,i)}if((l=!T.isEmptyObject(t))||!T.isEmptyObject(p))for(i in c&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=g&&g.display)&&(u=Q.get(e,"display")),"none"===(h=T.css(e,"display"))&&(u?h=u:(fe([e],!0),u=e.style.display||u,h=T.css(e,"display"),fe([e]))),("inline"===h||"inline-block"===h&&null!=u)&&"none"===T.css(e,"float")&&(l||(d.done(function(){f.display=u}),null==u&&(u="none"===(h=f.display)?"":h)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:u}),s&&(g.hidden=!m),m&&fe([e],!0),d.done(function(){for(i in m||fe([e]),Q.remove(e,"fxshow"),p)T.style(e,i,p[i])})),l=ft(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?mt.prefilters.unshift(e):mt.prefilters.push(e)}}),T.speed=function(e,t,n){var i=e&&"object"==typeof e?T.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return T.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration=i.duration in T.fx.speeds?T.fx.speeds[i.duration]:T.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&T.dequeue(this,i.queue)},i},T.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=T.isEmptyObject(e),s=T.speed(t,n,i),o=function(){var t=mt(this,T.extend({},e),s);(r||Q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=T.timers,o=Q.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&ht.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));!t&&n||T.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Q.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=T.timers,o=i?i.length:0;for(n.finish=!0,T.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),T.each(["toggle","show","hide"],function(e,t){var n=T.fn[t];T.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(pt(t,!0),e,i,r)}}),T.each({slideDown:pt("show"),slideUp:pt("hide"),slideToggle:pt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){T.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),T.timers=[],T.fx.tick=function(){var e,t=0,n=T.timers;for(at=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||T.fx.stop(),at=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){lt||(lt=!0,ct())},T.fx.stop=function(){lt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(e,t){return e=T.fx&&T.fx.speeds[e]||e,this.queue(t=t||"fx",function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}})},function(){var e=o.createElement("input"),t=o.createElement("select").appendChild(o.createElement("option"));e.type="checkbox",_.checkOn=""!==e.value,_.optSelected=t.selected,(e=o.createElement("input")).value="t",e.type="radio",_.radioValue="t"===e.value}();var gt,_t=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return Z(this,T.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){T.removeAttr(this,e)})}}),T.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?T.prop(e,t,n):(1===s&&T.isXMLDoc(e)||(r=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?gt:void 0)),void 0!==n?null===n?void T.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=T.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!_.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(B);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),gt={set:function(e,t,n){return!1===t?T.removeAttr(e,n):e.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var n=_t[t]||T.find.attr;_t[t]=function(e,t,i){var r,s,o=t.toLowerCase();return i||(s=_t[o],_t[o]=r,r=null!=n(e,t,i)?o:null,_t[o]=s),r}});var yt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function bt(e){return(e.match(B)||[]).join(" ")}function wt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}T.fn.extend({prop:function(e,t){return Z(this,T.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[T.propFix[e]||e]})}}),T.extend({prop:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&T.isXMLDoc(e)||(r=T.propHooks[t=T.propFix[t]||t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_.optSelected||(T.propHooks.selected={get:function(e){return null},set:function(e){}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,n,i,r,s,o,a,l=0;if(y(e))return this.each(function(t){T(this).addClass(e.call(this,t,wt(this)))});if((t=xt(e)).length)for(;n=this[l++];)if(r=wt(n),i=1===n.nodeType&&" "+bt(r)+" "){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r!==(a=bt(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,r,s,o,a,l=0;if(y(e))return this.each(function(t){T(this).removeClass(e.call(this,t,wt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)for(;n=this[l++];)if(r=wt(n),i=1===n.nodeType&&" "+bt(r)+" "){for(o=0;s=t[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");r!==(a=bt(i))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){T(this).toggleClass(e.call(this,n,wt(this),t),t)}):this.each(function(){var t,r,s,o;if(i)for(r=0,s=T(this),o=xt(e);t=o[r++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==n||((t=wt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+bt(wt(n))+" ").indexOf(t)>-1)return!0;return!1}});var Tt=/\r/g;T.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=y(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,T(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=T.map(r,function(e){return null==e?"":e+""})),(t=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=T.valHooks[r.type]||T.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Tt,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:bt(T.text(e))}},select:{get:function(e){var t,n,i,r=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?s+1:r.length;for(i=s<0?l:o?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=T(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,s=T.makeArray(t),o=r.length;o--;)((i=r[o]).selected=T.inArray(T.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=T.inArray(T(e).val(),t)>-1}},_.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),_.focusin="onfocusin"in n;var Ct=/^(?:focusinfocus|focusoutblur)$/,Lt=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(e,t,i,r){var s,a,l,u,h,c,d,p,m=[i||o],g=f.call(e,"type")?e.type:e,_=f.call(e,"namespace")?e.namespace.split("."):[];if(a=p=l=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!Ct.test(g+T.event.triggered)&&(g.indexOf(".")>-1&&(_=g.split("."),g=_.shift(),_.sort()),h=g.indexOf(":")<0&&"on"+g,(e=e[T.expando]?e:new T.Event(g,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=_.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:T.makeArray(t,[e]),d=T.event.special[g]||{},r||!d.trigger||!1!==d.trigger.apply(i,t))){if(!r&&!d.noBubble&&!v(i)){for(Ct.test((u=d.delegateType||g)+g)||(a=a.parentNode);a;a=a.parentNode)m.push(a),l=a;l===(i.ownerDocument||o)&&m.push(l.defaultView||l.parentWindow||n)}for(s=0;(a=m[s++])&&!e.isPropagationStopped();)p=a,e.type=s>1?u:d.bindType||g,(c=(Q.get(a,"events")||{})[e.type]&&Q.get(a,"handle"))&&c.apply(a,t),(c=h&&a[h])&&c.apply&&Y(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,r||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),t)||!Y(i)||h&&y(i[g])&&!v(i)&&((l=i[h])&&(i[h]=null),T.event.triggered=g,e.isPropagationStopped()&&p.addEventListener(g,Lt),i[g](),e.isPropagationStopped()&&p.removeEventListener(g,Lt),T.event.triggered=void 0,l&&(i[h]=l)),e.result}},simulate:function(e,t,n){var i=T.extend(new T.Event,n,{type:e,isSimulated:!0});T.event.trigger(i,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return T.event.trigger(e,t,n,!0)}}),_.focusin||T.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){T.event.simulate(t,e.target,T.event.fix(e))};T.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Q.access(i,t);r||i.addEventListener(e,n,!0),Q.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Q.access(i,t)-1;r?Q.access(i,t,r):(i.removeEventListener(e,n,!0),Q.remove(i,t))}}});var St=n.location,Et=Date.now(),Pt=/\?/;T.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(i){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+e),t};var It=/\[\]$/,At=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,n,i){var r;if(Array.isArray(t))T.each(t,function(t,r){n||It.test(e)?i(e,r):Ot(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==x(t))i(e,t);else for(r in t)Ot(e+"["+r+"]",t[r],n,i)}T.param=function(e,t){var n,i=[],r=function(e,t){var n=y(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,function(){r(this.name,this.value)});else for(n in e)Ot(n,e[n],t,r);return i.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Mt.test(this.nodeName)&&!kt.test(e)&&(this.checked||!me.test(e))}).map(function(e,t){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Dt=/%20/g,Rt=/#.*$/,Nt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bt=/^(?:GET|HEAD)$/,Ut=/^\/\//,jt={},zt={},Vt="*/".concat("*"),qt=o.createElement("a");function Gt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(B)||[];if(y(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Zt(e,t,n,i){var r={},s=e===zt;function o(a){var l;return r[a]=!0,T.each(e[a]||[],function(e,a){var u=a(t,n,i);return"string"!=typeof u||s||r[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),l}return o(t.dataTypes[0])||!r["*"]&&o("*")}function Ht(e,t){var n,i,r=T.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&T.extend(!0,e,i),e}qt.href=St.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ht(Ht(e,T.ajaxSettings),t):Ht(T.ajaxSettings,e)},ajaxPrefilter:Gt(jt),ajaxTransport:Gt(zt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var i,r,s,a,l,u,h,c,d,p,f=T.ajaxSetup({},t=t||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?T(m):T.event,_=T.Deferred(),y=T.Callbacks("once memory"),v=f.statusCode||{},b={},w={},x="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(h){if(!a)for(a={};t=Ft.exec(s);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?s:null},setRequestHeader:function(e,t){return null==h&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)C.always(e[C.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||x;return i&&i.abort(t),L(0,t),this}};if(_.promise(C),f.url=((e||f.url||St.href)+"").replace(Ut,St.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(B)||[""],null==f.crossDomain){u=o.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=qt.protocol+"//"+qt.host!=u.protocol+"//"+u.host}catch(S){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=T.param(f.data,f.traditional)),Zt(jt,f,t,C),h)return C;for(d in(c=T.event&&f.global)&&0==T.active++&&T.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Bt.test(f.type),r=f.url.replace(Rt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Dt,"+")):(p=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Pt.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Nt,"$1"),p=(Pt.test(r)?"&":"?")+"_="+Et+++p),f.url=r+p),f.ifModified&&(T.lastModified[r]&&C.setRequestHeader("If-Modified-Since",T.lastModified[r]),T.etag[r]&&C.setRequestHeader("If-None-Match",T.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Vt+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(m,C,f)||h))return C.abort();if(x="abort",y.add(f.complete),C.done(f.success),C.fail(f.error),i=Zt(zt,f,t,C)){if(C.readyState=1,c&&g.trigger("ajaxSend",[C,f]),h)return C;f.async&&f.timeout>0&&(l=n.setTimeout(function(){C.abort("timeout")},f.timeout));try{h=!1,i.send(b,L)}catch(S){if(h)throw S;L(-1,S)}}else L(-1,"No Transport");function L(e,t,o,a){var u,d,p,b,w,x=t;h||(h=!0,l&&n.clearTimeout(l),i=void 0,s=a||"",C.readyState=e>0?4:0,u=e>=200&&e<300||304===e,o&&(b=function(e,t,n){for(var i,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}(f,C,o)),b=function(e,t,n,i){var r,s,o,a,l,u={},h=e.dataTypes.slice();if(h[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(s=h.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=h.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=u[l+" "+s]||u["* "+s]))for(r in u)if((a=r.split(" "))[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){!0===o?o=u[r]:!0!==u[r]&&(s=a[0],h.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(S){return{state:"parsererror",error:o?S:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(f,b,C,u),u?(f.ifModified&&((w=C.getResponseHeader("Last-Modified"))&&(T.lastModified[r]=w),(w=C.getResponseHeader("etag"))&&(T.etag[r]=w)),204===e||"HEAD"===f.type?x="nocontent":304===e?x="notmodified":(x=b.state,d=b.data,u=!(p=b.error))):(p=x,!e&&x||(x="error",e<0&&(e=0))),C.status=e,C.statusText=(t||x)+"",u?_.resolveWith(m,[d,x,C]):_.rejectWith(m,[C,x,p]),C.statusCode(v),v=void 0,c&&g.trigger(u?"ajaxSuccess":"ajaxError",[C,f,u?d:p]),y.fireWith(m,[C,x]),c&&(g.trigger("ajaxComplete",[C,f]),--T.active||T.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return T.get(e,t,n,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,t){T[t]=function(e,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),T.ajax(T.extend({url:e,type:t,dataType:r,data:n,success:i},T.isPlainObject(e)&&e))}}),T._evalUrl=function(e,t){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t)}})},T.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){T(this).wrapInner(e.call(this,t))}):this.each(function(){var t=T(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){T(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},$t=T.ajaxSettings.xhr();_.cors=!!$t&&"withCredentials"in $t,_.ajax=$t=!!$t,T.ajaxTransport(function(e){var t,i;if(_.cors||$t&&!e.crossDomain)return{send:function(r,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);t=function(e){return function(){t&&(t=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Wt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),i=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){t&&i()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}}),T.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),T.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=T("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}});var Jt,Yt=[],Kt=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||T.expando+"_"+Et++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",function(e,t,i){var r,s,o,a=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Kt,"$1"+r):!1!==e.jsonp&&(e.url+=(Pt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||T.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=n[r],n[r]=function(){o=arguments},i.always(function(){void 0===s?T(n).removeProp(r):n[r]=s,e[r]&&(e.jsonpCallback=t.jsonpCallback,Yt.push(r)),o&&y(s)&&s(o[0]),o=s=void 0}),"script"}),_.createHTMLDocument=((Jt=o.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),T.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(_.createHTMLDocument?((i=(t=o.implementation.createHTMLDocument("")).createElement("base")).href=o.location.href,t.head.appendChild(i)):t=o),s=!n&&[],(r=k.exec(e))?[t.createElement(r[1])]:(r=Ce([e],t,s),s&&s.length&&T(s).remove(),T.merge([],r.childNodes)));var i,r,s},T.fn.load=function(e,t,n){var i,r,s,o=this,a=e.indexOf(" ");return a>-1&&(i=bt(e.slice(a)),e=e.slice(0,a)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&T.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(i?T("<div>").append(T.parseHTML(e)).find(i):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}}),T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(e,t,n){var i,r,s,o,a,l,u=T.css(e,"position"),h=T(e),c={};"static"===u&&(e.style.position="relative"),a=h.offset(),s=T.css(e,"top"),l=T.css(e,"left"),("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1?(o=(i=h.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),y(t)&&(t=t.call(e,n,T.extend({},a))),null!=t.top&&(c.top=t.top-a.top+o),null!=t.left&&(c.left=t.left-a.left+r),"using"in t?t.using.call(e,c):h.css(c)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?{top:(t=i.getBoundingClientRect()).top+(n=i.ownerDocument.defaultView).pageYOffset,left:t.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===T.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),r.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-T.css(i,"marginTop",!0),left:t.left-r.left-T.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||oe})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;T.fn[e]=function(i){return Z(this,function(e,i,r){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===r)return s?s[t]:e[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):e[i]=r},e,i,arguments.length)}}),T.each(["top","left"],function(e,t){T.cssHooks[t]=$e(_.pixelPosition,function(e,n){if(n)return n=We(e,t),Ge.test(n)?T(e).position()[t]+"px":n})}),T.each({Height:"height",Width:"width"},function(e,t){T.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){T.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return Z(this,function(t,n,r){var s;return v(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===r?T.css(t,n,a):T.style(t,n,r,a)},t,o?r:void 0,o)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){T.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),T.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),T.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=l.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(l.call(arguments)))}).guid=e.guid=e.guid||T.guid++,r},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=A,T.isFunction=y,T.isWindow=v,T.camelCase=J,T.type=x,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(i=(function(){return T}).apply(t,[]))||(e.exports=i);var Qt=n.jQuery,Xt=n.$;return T.noConflict=function(e){return n.$===T&&(n.$=Xt),e&&n.jQuery===T&&(n.jQuery=Qt),T},r||(n.jQuery=n.$=T),T})},HSsa:function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},JEQr:function(e,t,n){"use strict";var i=n("xTJ+"),r=n("yK9s"),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,l={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?a=n("tQ2B"):"undefined"!=typeof XMLHttpRequest&&(a=n("tQ2B")),a),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(e){l.headers[e]={}}),i.forEach(["post","put","patch"],function(e){l.headers[e]=i.merge(s)}),e.exports=l},LYNF:function(e,t,n){"use strict";var i=n("OH9c");e.exports=function(e,t,n,r,s){var o=new Error(e);return i(o,t,n,r,s)}},Lmem:function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},MLWZ:function(e,t,n){"use strict";var i=n("xTJ+");function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))}))}),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},OH9c:function(e,t,n){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},OTTw:function(e,t,n){"use strict";var i=n("xTJ+");e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},"Rn+g":function(e,t,n){"use strict";var i=n("LYNF");e.exports=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},SntB:function(e,t,n){"use strict";var i=n("xTJ+");e.exports=function(e,t){t=t||{};var n={};return i.forEach(["url","method","params","data"],function(e){void 0!==t[e]&&(n[e]=t[e])}),i.forEach(["headers","auth","proxy"],function(r){i.isObject(t[r])?n[r]=i.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:i.isObject(e[r])?n[r]=i.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])}),i.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])}),n}},UnBK:function(e,t,n){"use strict";var i=n("xTJ+"),r=n("xAGQ"),s=n("Lmem"),o=n("JEQr"),a=n("2SVd"),l=n("5oMp");function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!a(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=r(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return u(e),t.data=r(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(u(e),t&&t.response&&(t.response.data=r(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},YcCt:function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,r){n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t=t||"&");var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var l=e.length;a>0&&l>a&&(l=a);for(var u=0;u<l;++u){var h,c,d,p,f=e[u].replace(o,"%20"),m=f.indexOf(n);m>=0?(h=f.substr(0,m),c=f.substr(m+1)):(h=f,c=""),d=decodeURIComponent(h),p=decodeURIComponent(c),i(s,d)?Array.isArray(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s}},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},cxmq:function(e,t){var n,i;window,n=document,L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this.options.clusterPane||(this.options.clusterPane=L.Marker.prototype.options.pane),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}),this):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e}),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n,i=this._featureGroup,r=this._nonPointGroup,s=this.options.chunkedLoading,o=this.options.chunkInterval,a=this.options.chunkProgress,l=e.length,u=0,h=!0;if(this._map){var c=(new Date).getTime(),d=L.bind(function(){for(var p=(new Date).getTime();l>u&&!(s&&0==u%200&&(new Date).getTime()-p>o);u++)if((n=e[u])instanceof L.LayerGroup)h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(n,e),l=e.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),t||this.fire("layeradd",{layer:n}),n.__parent&&2===n.__parent.getChildCount())){var f=n.__parent.getAllChildMarkers();i.removeLayer(f[0]===n?f[1]:f[0])}}else r.addLayer(n),t||this.fire("layeradd",{layer:n});a&&a(u,l,(new Date).getTime()-c),u===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(d,this.options.chunkDelay)},this);d()}else for(var p=this._needsClustering;l>u;u++)(n=e[u])instanceof L.LayerGroup?(h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(n,e),l=e.length):n.getLatLng?this.hasLayer(n)||p.push(n):r.addLayer(n);return this},removeLayers:function(e){var t,n,i=e.length,r=this._featureGroup,s=this._nonPointGroup,o=!0;if(!this._map){for(t=0;i>t;t++)(n=e[t])instanceof L.LayerGroup?(o&&(e=e.slice(),o=!1),this._extractNonGroupLayers(n,e),i=e.length):(this._arraySplice(this._needsClustering,n),s.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var a=e.slice(),l=i;for(t=0;l>t;t++)(n=a[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,a),l=a.length):this._unspiderfyLayer(n)}for(t=0;i>t;t++)(n=e[t])instanceof L.LayerGroup?(o&&(e=e.slice(),o=!1),this._extractNonGroupLayers(n,e),i=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),r.hasLayer(n)&&(r.removeLayer(n),n.clusterShow&&n.clusterShow())):(s.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,i,r,s=this._needsClustering.slice(),o=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(s),i=s.length-1;i>=0;i--){for(n=!0,r=o.length-1;r>=0;r--)if(o[r].layer===s[i]){n=!1;break}n&&e.call(t,s[i])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;t>=0;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;t>=0;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){"function"!=typeof t&&(t=function(){});var n=function(){!e._icon&&!e.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),e._icon?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,n,i;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;n>t;t++)(i=this._needsRemoving[t]).newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(t=0,n=this._needsRemoving.length;n>t;t++)this._removeLayer((i=this._needsRemoving[t]).layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,i=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());t>=r&&i[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){e.target.__dragStart&&this._moveChild(e.target,e.target.__dragStart,e.target._latlng),delete e.target.__dragStart},_removeLayer:function(e,t,n){var i=this._gridClusters,r=this._gridUnclustered,s=this._featureGroup,o=this._map,a=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var l,u=e.__parent;for(this._arraySplice(u._markers,e);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<a));)t&&u._childCount<=1?(l=u._markers[0]===e?u._markers[1]:u._markers[0],i[u._zoom].removeObject(u,o.project(u._cLatLng,u._zoom)),r[u._zoom].addObject(l,o.project(l.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(l),l.__parent=u.__parent,u._icon&&(s.removeLayer(u),n||s.addLayer(l))):u._iconNeedsUpdate=!0,u=u.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+(n+=10>t?"small":100>t?"medium":"large"),iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.showCoverageOnHover;(this.options.spiderfyOnMaxZoom||this.options.zoomToBoundsOnClick)&&this.on("clusterclick",this._zoomOrSpiderfy,this),t&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){for(var t=e.layer,n=t;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.showCoverageOnHover,t=this._map;(this.options.spiderfyOnMaxZoom||this.options.zoomToBoundsOnClick)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),t.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,i=n;"function"!=typeof n&&(i=function(){return n}),null!==this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var r=e;r>=t;r--)this._gridClusters[r]=new L.DistanceGrid(i(r)),this._gridUnclustered[r]=new L.DistanceGrid(i(r));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,i,r=this._gridClusters,s=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);t>=o;t--){n=this._map.project(e.getLatLng(),t);var a=r[t].getNearObject(n);if(a)return a._addChild(e),void(e.__parent=a);if(a=s[t].getNearObject(n)){var l=a.__parent;l&&this._removeLayer(a,!1);var u=new this._markerCluster(this,t,a,e);r[t].addObject(u,this._map.project(u._cLatLng,t)),a.__parent=u,e.__parent=u;var h=u;for(i=t-1;i>l._zoom;i--)h=new this._markerCluster(this,i,h),r[i].addObject(h,this._map.project(a.getLatLng(),i));return l._addChild(h),void this._removeFromGridUnclustered(a,t)}s[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==i&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,i=e.getLayers(),r=0;for(t=t||[];r<i.length;r++)(n=i[r])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,i=this._getExpandedVisibleBounds(),r=this._featureGroup,s=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(i,e,s,function(s){var o,a=s._latlng,l=s._markers;for(i.contains(a)||(a=null),s._isSingleParent()&&e+1===t?(r.removeLayer(s),s._recursivelyAddChildrenToMap(null,t,i)):(s.clusterHide(),s._recursivelyAddChildrenToMap(a,t,i)),n=l.length-1;n>=0;n--)i.contains((o=l[n])._latlng)||r.removeLayer(o)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,t),r.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(i,e,t,function(e){e._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,e,s,function(e){r.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,i=this._featureGroup;i.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){i.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var i=this._getExpandedVisibleBounds(),r=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(i,r,t+1,n);var s=this;this._forceLayout(),e._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(1===e._childCount){var o=e._markers[0];this._ignoreMove=!0,o.setLatLng(o.getLatLng()),this._ignoreMove=!1,o.clusterShow&&o.clusterShow()}else e._recursively(i,n,r,function(e){e._recursivelyRemoveChildrenFromMap(i,r,t+1)});s._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(n.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)},L.MarkerCluster=L.Marker.extend({initialize:function(e,t,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(e){e=e||[];for(var t=this._childClusters.length-1;t>=0;t--)this._childClusters[t].getAllChildMarkers(e);for(var n=this._markers.length-1;n>=0;n--)e.push(this._markers[n]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),i=this._group._map,r=i.getBoundsZoom(this._bounds),s=this._zoom+1,o=i.getZoom();n.length>0&&r>s;){s++;var a=[];for(t=0;t<n.length;t++)a=a.concat(n[t]._childClusters);n=a}r>s?this._group._map.setView(this._latlng,s):o>=r?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,i,r=this._markers,s=this._childClusters,o=0,a=0,l=this._childCount;if(0!==l){for(this._resetBounds(),e=0;e<r.length;e++)this._bounds.extend(n=r[e]._latlng),o+=n.lat,a+=n.lng;for(e=0;e<s.length;e++)(t=s[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),o+=(n=t._wLatLng).lat*(i=t._childCount),a+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(o/l,a/l),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,function(e){var n,i,r=e._markers;for(n=r.length-1;n>=0;n--)(i=r[n])._icon&&(i._setPos(t),i.clusterHide())},function(e){var n,i,r=e._childClusters;for(n=r.length-1;n>=0;n--)(i=r[n])._icon&&(i._setPos(t),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,i){this._recursively(e,i,t,function(r){r._recursivelyAnimateChildrenIn(e,r._group._map.latLngToLayerPoint(r.getLatLng()).round(),n),r._isSingleParent()&&n-1===i?(r.clusterShow(),r._recursivelyRemoveChildrenFromMap(e,t,n)):r.clusterHide(),r._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,function(i){if(t!==i._zoom)for(var r=i._markers.length-1;r>=0;r--){var s=i._markers[r];n.contains(s._latlng)&&(e&&(s._backupLatlng=s.getLatLng(),s.setLatLng(e),s.clusterHide&&s.clusterHide()),i._group._featureGroup.addLayer(s))}},function(t){t._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,i){var r,s;this._recursively(e,t-1,n-1,function(e){for(s=e._markers.length-1;s>=0;s--)r=e._markers[s],i&&i.contains(r._latlng)||(e._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())},function(e){for(s=e._childClusters.length-1;s>=0;s--)r=e._childClusters[s],i&&i.contains(r._latlng)||(e._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())})},_recursively:function(e,t,n,i,r){var s,o,a=this._childClusters,l=this._zoom;if(l>=t&&(i&&i(this),r&&l===n&&r(this)),t>l||n>l)for(s=a.length-1;s>=0;s--)e.intersects((o=a[s])._bounds)&&o._recursively(e,t,n,i,r)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var e=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,e}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),r=this._grid,s=r[i]=r[i]||{},o=s[n]=s[n]||[],a=L.Util.stamp(e);this._objectPoint[a]=t,o.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,i,r=this._getCoord(t.x),s=this._getCoord(t.y),o=this._grid,a=o[s]=o[s]||{},l=a[r]=a[r]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,i=l.length;i>n;n++)if(l[n]===e)return l.splice(n,1),1===i&&delete a[r],!0},eachObject:function(e,t){var n,i,r,s,o,a,l=this._grid;for(n in l)for(i in o=l[n])for(r=0,s=(a=o[i]).length;s>r;r++)e.call(t,a[r])&&(r--,s--)},getNearObject:function(e){var t,n,i,r,s,o,a,l,u=this._getCoord(e.x),h=this._getCoord(e.y),c=this._objectPoint,d=this._sqCellSize,p=null;for(t=h-1;h+1>=t;t++)if(r=this._grid[t])for(n=u-1;u+1>=n;n++)if(s=r[n])for(i=0,o=s.length;o>i;i++)a=s[i],d>(l=this._sqDist(c[L.Util.stamp(a)],e))&&(d=l,p=a);return p},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},L.QuickHull={getDistant:function(e,t){return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+(t[1].lat-t[0].lat)*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,i,r,s=0,o=null,a=[];for(n=t.length-1;n>=0;n--)(r=this.getDistant(i=t[n],e))>0&&(a.push(i),r>s&&(s=r,o=i));return{maxPoint:o,newPoints:a}},buildConvexHull:function(e,t){var n=[],i=this.findMostDistantPointFromBaseLine(e,t);return i.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints))).concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,i=!1,r=!1,s=!1,o=null,a=null,l=null,u=null,h=null,c=null;for(t=e.length-1;t>=0;t--){var d=e[t];(!1===n||d.lat>n)&&(o=d,n=d.lat),(!1===i||d.lat<i)&&(a=d,i=d.lat),(!1===r||d.lng>r)&&(l=d,r=d.lng),(!1===s||d.lng<s)&&(u=d,s=d.lng)}return i!==n?(c=a,h=o):(c=u,h=l),[].concat(this.buildConvexHull([c,h],e),this.buildConvexHull([h,c],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),i=[];for(t=n.length-1;t>=0;t--)e=n[t].getLatLng(),i.push(e);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,t.length>=this._circleSpiralSwitchover?e=this._generatePointsSpiral(t.length,n):(n.y+=10,e=this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,i,r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,s=this._2PI/e,o=[];for(o.length=e,n=e-1;n>=0;n--)i=this._circleStartAngle+n*s,o[n]=new L.Point(t.x+r*Math.cos(i),t.y+r*Math.sin(i))._round();return o},_generatePointsSpiral:function(e,t){var n,i=this._group.options.spiderfyDistanceMultiplier,r=i*this._spiralLengthStart,s=i*this._spiralFootSeparation,o=i*this._spiralLengthFactor*this._2PI,a=0,l=[];for(l.length=e,n=e-1;n>=0;n--)a+=s/r+5e-4*n,l[n]=new L.Point(t.x+r*Math.cos(a),t.y+r*Math.sin(a))._round(),r+=o/a;return l},_noanimationUnspiderfy:function(){var e,t,n=this._group,i=n._map,r=n._featureGroup,s=this.getAllChildMarkers();for(n._ignoreMove=!0,this.setOpacity(1),t=s.length-1;t>=0;t--)r.removeLayer(e=s[t]),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(i.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:s}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,i,r,s,o=this._group,a=o._map,l=o._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(o._ignoreMove=!0,n=0;n<e.length;n++)s=a.layerPointToLatLng(t[n]),i=e[n],r=new L.Polyline([this._latlng,s],u),a.addLayer(r),i._spiderLeg=r,i._preSpiderfyLatlng=i._latlng,i.setLatLng(s),i.setZIndexOffset&&i.setZIndexOffset(1e6),l.addLayer(i);this.setOpacity(.3),o._ignoreMove=!1,o.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,r,s,o,a,l,u=this,h=this._group,c=h._map,d=h._featureGroup,p=this._latlng,f=c.latLngToLayerPoint(p),m=L.Path.SVG,g=L.extend({},this._group.options.spiderLegPolylineOptions),_=g.opacity;for(_===i&&(_=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),m?(g.opacity=0,g.className=(g.className||"")+" leaflet-cluster-spider-leg"):g.opacity=_,h._ignoreMove=!0,n=0;n<e.length;n++)r=e[n],l=c.layerPointToLatLng(t[n]),s=new L.Polyline([p,l],g),c.addLayer(s),r._spiderLeg=s,m&&(a=(o=s._path).getTotalLength()+.1,o.style.strokeDasharray=a,o.style.strokeDashoffset=a),r.setZIndexOffset&&r.setZIndexOffset(1e6),r.clusterHide&&r.clusterHide(),d.addLayer(r),r._setPos&&r._setPos(f);for(h._forceLayout(),h._animationStart(),n=e.length-1;n>=0;n--)l=c.layerPointToLatLng(t[n]),(r=e[n])._preSpiderfyLatlng=r._latlng,r.setLatLng(l),r.clusterShow&&r.clusterShow(),m&&((o=(s=r._spiderLeg)._path).style.strokeDashoffset=0,s.setStyle({opacity:_}));this.setOpacity(.3),h._ignoreMove=!1,setTimeout(function(){h._animationEnd(),h.fire("spiderfied",{cluster:u,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,i,r,s,o,a=this,l=this._group,u=l._map,h=l._featureGroup,c=e?u._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):u.latLngToLayerPoint(this._latlng),d=this.getAllChildMarkers(),p=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),n=d.length-1;n>=0;n--)(t=d[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,o=!0,t._setPos&&(t._setPos(c),o=!1),t.clusterHide&&(t.clusterHide(),o=!1),o&&h.removeLayer(t),p&&(s=(r=(i=t._spiderLeg)._path).getTotalLength()+.1,r.style.strokeDashoffset=s,i.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var e=0;for(n=d.length-1;n>=0;n--)(t=d[n])._spiderLeg&&e++;for(n=d.length-1;n>=0;n--)(t=d[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),e>1&&h.removeLayer(t),u.removeLayer(t._spiderLeg),delete t._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:a,markers:d})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)this.hasLayer(n=e[t])&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}})},endd:function(e,t,n){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},eqyj:function(e,t,n){"use strict";var i=n("xTJ+");e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},iNfD:function(e,t,n){"use strict";function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function r(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function s(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function o(e,t,n){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=e;r--)n.buf[r+i]=n.buf[r]}function a(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function l(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function u(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function c(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function g(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function _(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function y(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function v(e,t){this.x=e,this.y=t}function b(e,t,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=r,e.readFields(w,this,t)}function w(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var i=t._keys[e.readVarint()],r=t._values[e.readVarint()];t.properties[i]=r}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function x(e){for(var t,n,i=0,r=0,s=e.length,o=s-1;r<s;o=r++)i+=((n=e[o]).x-(t=e[r]).x)*(t.y+n.y);return i}function T(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(C,this,t),this.length=this._features.length}function C(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(n))}function S(e,t,n){if(3===e){var i=new R(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}!function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return f.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function o(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=o(t);return t.readAsArrayBuffer(e),n}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(f.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(f.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(f.arrayBuffer&&f.blob&&g(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!f.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=o(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(c)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e,t){var n=(t=t||{}).body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=function(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function c(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function d(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function p(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var f={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(f.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&m.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){var n=this;for(var i in this.map)n.map.hasOwnProperty(i)&&e.call(t,n.map[i],i,n)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},f.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},u.call(h.prototype),u.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];p.redirect=function(e,t){if(-1===v.indexOf(t))throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=h,e.Response=p,e.fetch=function(e,t){return new Promise(function(n,i){var r=new h(e,t),s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:d(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL"),n(new p("response"in s?s.response:s.responseText,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&f.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0);var E=i,P=function(e,t,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,u=l>>1,h=-7,c=n?r-1:0,d=n?-1:1,p=e[t+c];for(c+=d,s=p&(1<<-h)-1,p>>=-h,h+=a;h>0;s=256*s+e[t+c],c+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+e[t+c],c+=d,h-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=u}return(p?-1:1)*o*Math.pow(2,s-i)},I=function(e,t,n,i,r,s){var o,a,l,u=8*s-r-1,h=(1<<u)-1,c=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=h?(a=0,o=h):o+c>=1?(a=(t*l-1)*Math.pow(2,r),o+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(o=o<<r|a,u+=r;u>0;e[n+p]=255&o,p+=f,o/=256,u-=8);e[n+p-f]|=128*m};i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5,i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){var i=this;for(n=n||this.length;this.pos<n;){var r=i.readVarint(),s=r>>3,o=i.pos;i.type=7&r,e(s,t,i),i.pos===o&&i.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=g(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=y(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=g(this.buf,this.pos)+4294967296*g(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=g(this.buf,this.pos)+4294967296*y(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=P(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=P(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,i=this.buf;return t=127&(n=i[this.pos++]),n<128?t:(t|=(127&(n=i[this.pos++]))<<7,n<128?t:(t|=(127&(n=i[this.pos++]))<<14,n<128?t:(t|=(127&(n=i[this.pos++]))<<21,n<128?t:function(e,t,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return s(e,i,t);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return s(e,i,t);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return s(e,i,t);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return s(e,i,t);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return s(e,i,t);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return s(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,n){for(var i="",r=t;r<n;){var s,o,a,l=e[r],u=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h>n)break;1===h?l<128&&(u=l):2===h?128==(192&(s=e[r+1]))&&(u=(31&l)<<6|63&s)<=127&&(u=null):3===h?(o=e[r+2],128==(192&(s=e[r+1]))&&128==(192&o)&&((u=(15&l)<<12|(63&s)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===h&&(o=e[r+2],a=e[r+3],128==(192&(s=e[r+1]))&&128==(192&o)&&128==(192&a)&&((u=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,h=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),r+=h}return i}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=r(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)for(;this.buf[this.pos++]>127;);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else{if(t!==i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var i,r,s=0;s<t.length;s++){if((i=t.charCodeAt(s))>55295&&i<57344){if(!r){i>56319||s+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):r=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(e[n++]=239,e[n++]=191,e[n++]=189,r=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&o(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),I(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),I(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var i=this.pos-n;i>=128&&o(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,n){this.writeTag(e,i.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,a,t)},writePackedSVarint:function(e,t){this.writeMessage(e,l,t)},writePackedBoolean:function(e,t){this.writeMessage(e,c,t)},writePackedFloat:function(e,t){this.writeMessage(e,u,t)},writePackedDouble:function(e,t){this.writeMessage(e,h,t)},writePackedFixed32:function(e,t){this.writeMessage(e,d,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,p,t)},writePackedFixed64:function(e,t){this.writeMessage(e,f,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,m,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var A=v;v.prototype={clone:function(){return new v(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(e){return e instanceof v?e:Array.isArray(e)?new v(e[0],e[1]):e};var k=A,M=b;b.types=["Unknown","Point","LineString","Polygon"],b.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,r=0,s=0,o=0,a=[];e.pos<n;){if(!r){var l=e.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)s+=e.readSVarint(),o+=e.readSVarint(),1===i&&(t&&a.push(t),t=[]),t.push(new k(s,o));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&a.push(t),a},b.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,i=0,r=0,s=0,o=1/0,a=-1/0,l=1/0,u=-1/0;e.pos<t;){if(!i){var h=e.readVarint();n=7&h,i=h>>3}if(i--,1===n||2===n)(r+=e.readSVarint())<o&&(o=r),r>a&&(a=r),(s+=e.readSVarint())<l&&(l=s),s>u&&(u=s);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,a,u]},b.prototype.toGeoJSON=function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+l)/o)*Math.PI/180))-90]}}var r,s,o=this.extent*Math.pow(2,n),a=this.extent*e,l=this.extent*t,u=this.loadGeometry(),h=b.types[this.type];switch(this.type){case 1:var c=[];for(r=0;r<u.length;r++)c[r]=u[r][0];i(u=c);break;case 2:for(r=0;r<u.length;r++)i(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,i,r=[],s=0;s<t;s++){var o=x(e[s]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[e[s]]):n.push(e[s]))}return n&&r.push(n),r}(u),r=0;r<u.length;r++)for(s=0;s<u[r].length;s++)i(u[r][s])}1===u.length?u=u[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:u},properties:this.properties};return"id"in this&&(d.id=this.id),d};var O=M,D=T;T.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new O(this._pbf,t,this.extent,this._keys,this._values)};var R=D,N=function(e,t){this.layers=e.readFields(S,{},t)};L.SVG.Tile=L.SVG.extend({initialize:function(e,t,n){L.SVG.prototype.initialize.call(this,n),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:L.Util.falseFn,addTo:function(e){if(this._map=e,this.options.interactive)for(var t in this._layers){var n=this._layers[t];n._path.style.pointerEvents="auto",this._map._targets[L.stamp(n._path)]=n}},removeFrom:function(e){if(this.options.interactive)for(var t in this._layers)delete this._map._targets[L.stamp(this._layers[t]._path)];delete this._map},_initContainer:function(){L.SVG.prototype._initContainer.call(this),L.SVG.create("rect")},_addPath:function(e){this._rootGroup.appendChild(e._path),this._layers[L.stamp(e)]=e},_updateIcon:function(e){var t=e._path=L.SVG.create("image"),n=e.options.icon.options,i=L.point(n.iconSize),r=n.iconAnchor||i&&i.divideBy(2,!0),s=e._point.subtract(r);t.setAttribute("x",s.x),t.setAttribute("y",s.y),t.setAttribute("width",i.x+"px"),t.setAttribute("height",i.y+"px"),t.setAttribute("href",n.iconUrl)}}),L.svg.tile=function(e,t,n){return new L.SVG.Tile(e,t,n)};var F=L.Class.extend({render:function(e,t){this._renderer=e,this.options=t,e._initPath(this),e._updateStyle(this)},updateStyle:function(e,t){this.options=t,e._updateStyle(this)},_getPixelBounds:function(){for(var e=this._parts,t=L.bounds([]),n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)t.extend(i[r]);var s=this._clickTolerance(),o=new L.Point(s,s);return t.min._subtract(o),t.max._add(o),t},_clickTolerance:L.Path.prototype._clickTolerance}),B={_makeFeatureParts:function(e,t){var n=e.geometry;this._parts=[];for(var i=0;i<n.length;i++){for(var r=n[i],s=[],o=0;o<r.length;o++)s.push(L.point(r[o]).scaleBy(t));this._parts.push(s)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},U=L.CircleMarker.extend({includes:F.prototype,statics:{iconCache:{}},initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){F.prototype.render.call(this,e,t),this._radius=t.radius||L.CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(e,t){var n=e.geometry[0];"object"==typeof n[0]&&"x"in n[0]?(this._point=L.point(n[0]).scaleBy(t),this._empty=L.Util.falseFn):(this._point=L.point(n).scaleBy(t),this._empty=L.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._radius=t.radius||this._radius,this._updateBounds(),F.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){var e=this.options.icon;if(e){var t=L.point(e.options.iconSize),n=e.options.iconAnchor||t&&t.divideBy(2,!0),i=this._point.subtract(n);this._pxBounds=new L.Bounds(i,i.add(e.options.iconSize))}else L.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.icon?this._renderer._updateIcon(this):L.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(this.options.icon){var e=this.options.icon.options.iconUrl,t=U.iconCache[e];return t||(t=U.iconCache[e]=this.options.icon.createIcon()),t}return null},_containsPoint:function(e){return this.options.icon?this._pxBounds.contains(e):L.CircleMarker.prototype._containsPoint.call(this,e)}}),j=L.Polyline.extend({includes:[F.prototype,B],initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){t.fill=!1,F.prototype.render.call(this,e,t),this._updatePath()},updateStyle:function(e,t){t.fill=!1,F.prototype.updateStyle.call(this,e,t)}}),z=L.Polygon.extend({includes:[F.prototype,B],initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){F.prototype.render.call(this,e,t),this._updatePath()}});L.VectorGrid=L.GridLayer.extend({options:{rendererFactory:L.svg.tile,vectorTileLayerStyles:{},interactive:!1},initialize:function(e){L.setOptions(this,e),L.GridLayer.prototype.initialize.apply(this,arguments),this.options.getFeatureId&&(this._vectorTiles={},this._overriddenStyles={},this.on("tileunload",function(e){var t=this._tileCoordsToKey(e.coords),n=this._vectorTiles[t];n&&this._map&&n.removeFrom(this._map),delete this._vectorTiles[t]},this)),this._dataLayerNames={}},createTile:function(e,t){var n=this.options.getFeatureId,i=this.getTileSize(),r=this.options.rendererFactory(e,i,this.options),s=this._getVectorTilePromise(e);return n&&(this._vectorTiles[this._tileCoordsToKey(e)]=r,r._features={}),s.then((function(i){for(var s in i.layers){this._dataLayerNames[s]=!0;for(var o=i.layers[s],a=this.getTileSize().divideBy(o.extent),l=this.options.vectorTileLayerStyles[s]||L.Path.prototype.options,u=0;u<o.features.length;u++){var h,c=o.features[u],d=l;if(n){h=this.options.getFeatureId(c);var p=this._overriddenStyles[h];p&&(d=p[s]?p[s]:p)}if(d instanceof Function&&(d=d(c.properties,e.z)),d instanceof Array||(d=[d]),d.length){for(var f=this._createLayer(c,a),m=0;m<d.length;m++){var g=L.extend({},L.Path.prototype.options,d[m]);f.render(r,g),r._addPath(f)}this.options.interactive&&f.makeInteractive(),n&&(r._features[h]={layerName:s,feature:f})}}}null!=this._map&&r.addTo(this._map),L.Util.requestAnimFrame(t.bind(e,null,null))}).bind(this)),r.getContainer()},setFeatureStyle:function(e,t){for(var n in this._overriddenStyles[e]=t,this._vectorTiles){var i=this._vectorTiles[n],r=i._features[e];if(r){var s=t;t[r.layerName]&&(s=t[r.layerName]),this._updateStyles(r.feature,i,s)}}return this},resetFeatureStyle:function(e){for(var t in delete this._overriddenStyles[e],this._vectorTiles){var n=this._vectorTiles[t],i=n._features[e];if(i){var r=this.options.vectorTileLayerStyles[i.layerName]||L.Path.prototype.options;this._updateStyles(i.feature,n,r)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_updateStyles:function(e,t,n){(n=n instanceof Function?n(e.properties,t.getCoord().z):n)instanceof Array||(n=[n]);for(var i=0;i<n.length;i++){var r=L.extend({},L.Path.prototype.options,n[i]);e.updateStyle(t,r)}},_createLayer:function(e,t,n){var i;switch(e.type){case 1:i=new U(e,t);break;case 2:i=new j(e,t);break;case 3:i=new z(e,t)}return this.options.interactive&&i.addEventParent(this),i}}),L.vectorGrid=function(e){return new L.VectorGrid(e)},L.VectorGrid.Protobuf=L.VectorGrid.extend({options:{subdomains:"abc",fetchOptions:{}},initialize:function(e,t){this._url=e,L.VectorGrid.prototype.initialize.call(this,t)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},_getSubdomain:L.TileLayer.prototype._getSubdomain,_getVectorTilePromise:function(e){var t={s:this._getSubdomain(e),x:e.x,y:e.y,z:e.z};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}var i=L.Util.template(this._url,L.extend(t,this.options));return fetch(i,this.options.fetchOptions).then(function(e){return e.ok?e.blob().then(function(e){var t=new FileReader;return new Promise(function(n){t.addEventListener("loadend",function(){var e=new E(t.result);return n(new N(e))}),t.readAsArrayBuffer(e)})}):{layers:[]}}).then(function(e){for(var t in e.layers){for(var n=[],i=0;i<e.layers[t].length;i++){var r=e.layers[t].feature(i);r.geometry=r.loadGeometry(),n.push(r)}e.layers[t].features=n}return e})}}),L.vectorGrid.protobuf=function(e,t){return new L.VectorGrid.Protobuf(e,t)};var V=function(e,t,n){try{return window.URL.createObjectURL(new Blob([Uint8Array.from(e.split("").map(function(e){return e.charCodeAt(0)}))],{type:t}))}catch(i){return"data:"+t+","+e}}('"use strict";function simplify$1(e,t){var r,n,o,i,a=t*t,s=e.length,l=0,u=s-1,c=[];for(e[l][2]=1,e[u][2]=1;u;){for(n=0,r=l+1;r<u;r++)(o=getSqSegDist(e[r],e[l],e[u]))>n&&(i=r,n=o);n>a?(e[i][2]=n,c.push(l),c.push(i),l=i):(u=c.pop(),l=c.pop())}}function getSqSegDist(e,t,r){var n=t[0],o=t[1],i=r[0],a=r[1],s=e[0],l=e[1],u=i-n,c=a-o;if(0!==u||0!==c){var f=((s-n)*u+(l-o)*c)/(u*u+c*c);f>1?(n=i,o=a):f>0&&(n+=u*f,o+=c*f)}return u=s-n,c=l-o,u*u+c*c}function convert$1(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)convertFeature(r,e.features[n],t);else"Feature"===e.type?convertFeature(r,e,t):convertFeature(r,{geometry:e},t);return r}function convertFeature(e,t,r){if(null!==t.geometry){var n,o,i,a,s=t.geometry,l=s.type,u=s.coordinates,c=t.properties;if("Point"===l)e.push(create(c,1,[projectPoint(u)]));else if("MultiPoint"===l)e.push(create(c,1,project(u)));else if("LineString"===l)e.push(create(c,2,[project(u,r)]));else if("MultiLineString"===l||"Polygon"===l){for(i=[],n=0;n<u.length;n++)a=project(u[n],r),"Polygon"===l&&(a.outer=0===n),i.push(a);e.push(create(c,"Polygon"===l?3:2,i))}else if("MultiPolygon"===l){for(i=[],n=0;n<u.length;n++)for(o=0;o<u[n].length;o++)a=project(u[n][o],r),a.outer=0===o,i.push(a);e.push(create(c,3,i))}else{if("GeometryCollection"!==l)throw new Error("Input data is not a valid GeoJSON object.");for(n=0;n<s.geometries.length;n++)convertFeature(e,{geometry:s.geometries[n],properties:c},r)}}}function create(e,t,r){var n={geometry:r,type:t,tags:e||null,min:[2,1],max:[-1,0]};return calcBBox(n),n}function project(e,t){for(var r=[],n=0;n<e.length;n++)r.push(projectPoint(e[n]));return t&&(simplify(r,t),calcSize(r)),r}function projectPoint(e){var t=Math.sin(e[1]*Math.PI/180),r=e[0]/360+.5,n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n=n<0?0:n>1?1:n,[r,n,0]}function calcSize(e){for(var t,r,n=0,o=0,i=0;i<e.length-1;i++)t=r||e[i],r=e[i+1],n+=t[0]*r[1]-r[0]*t[1],o+=Math.abs(r[0]-t[0])+Math.abs(r[1]-t[1]);e.area=Math.abs(n/2),e.dist=o}function calcBBox(e){var t=e.geometry,r=e.min,n=e.max;if(1===e.type)calcRingBBox(r,n,t);else for(var o=0;o<t.length;o++)calcRingBBox(r,n,t[o]);return e}function calcRingBBox(e,t,r){for(var n,o=0;o<r.length;o++)n=r[o],e[0]=Math.min(n[0],e[0]),t[0]=Math.max(n[0],t[0]),e[1]=Math.min(n[1],e[1]),t[1]=Math.max(n[1],t[1])}function transformTile(e,t){if(e.transformed)return e;var r,n,o,i=e.z2,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry;if(1===l.type)for(n=0;n<u.length;n++)u[n]=transformPoint(u[n],t,i,a,s);else for(n=0;n<u.length;n++){var c=u[n];for(o=0;o<c.length;o++)c[o]=transformPoint(c[o],t,i,a,s)}}return e.transformed=!0,e}function transformPoint(e,t,r,n,o){return[Math.round(t*(e[0]*r-n)),Math.round(t*(e[1]*r-o))]}function clip$1(e,t,r,n,o,i,a,s){if(r/=t,n/=t,a>=r&&s<=n)return e;if(a>n||s<r)return null;for(var l=[],u=0;u<e.length;u++){var c,f,p=e[u],h=p.geometry,m=p.type;if(c=p.min[o],f=p.max[o],c>=r&&f<=n)l.push(p);else if(!(c>n||f<r)){var g=1===m?clipPoints(h,r,n,o):clipGeometry(h,r,n,o,i,3===m);g.length&&l.push({geometry:g,type:m,tags:e[u].tags||null,min:p.min,max:p.max})}}return l.length?l:null}function clipPoints(e,t,r,n){for(var o=[],i=0;i<e.length;i++){var a=e[i],s=a[n];s>=t&&s<=r&&o.push(a)}return o}function clipGeometry(e,t,r,n,o,i){for(var a=[],s=0;s<e.length;s++){var l,u,c,f=0,p=0,h=null,m=e[s],g=m.area,d=m.dist,v=m.outer,y=m.length,x=[];for(u=0;u<y-1;u++)l=h||m[u],h=m[u+1],f=p||l[n],p=h[n],f<t?p>r?(x.push(o(l,h,t),o(l,h,r)),i||(x=newSlice(a,x,g,d,v))):p>=t&&x.push(o(l,h,t)):f>r?p<t?(x.push(o(l,h,r),o(l,h,t)),i||(x=newSlice(a,x,g,d,v))):p<=r&&x.push(o(l,h,r)):(x.push(l),p<t?(x.push(o(l,h,t)),i||(x=newSlice(a,x,g,d,v))):p>r&&(x.push(o(l,h,r)),i||(x=newSlice(a,x,g,d,v))));l=m[y-1],f=l[n],f>=t&&f<=r&&x.push(l),c=x[x.length-1],i&&c&&(x[0][0]!==c[0]||x[0][1]!==c[1])&&x.push(x[0]),newSlice(a,x,g,d,v)}return a}function newSlice(e,t,r,n,o){return t.length&&(t.area=r,t.dist=n,void 0!==o&&(t.outer=o),e.push(t)),[]}function wrap$1(e,t,r){var n=e,o=clip$2(e,1,-1-t,t,0,r,-1,2),i=clip$2(e,1,1-t,2+t,0,r,-1,2);return(o||i)&&(n=clip$2(e,1,-t,1+t,0,r,-1,2),o&&(n=shiftFeatureCoords(o,1).concat(n)),i&&(n=n.concat(shiftFeatureCoords(i,-1)))),n}function shiftFeatureCoords(e,t){for(var r=[],n=0;n<e.length;n++){var o,i=e[n],a=i.type;if(1===a)o=shiftCoords(i.geometry,t);else{o=[];for(var s=0;s<i.geometry.length;s++)o.push(shiftCoords(i.geometry[s],t))}r.push({geometry:o,type:a,tags:i.tags,min:[i.min[0]+t,i.min[1]],max:[i.max[0]+t,i.max[1]]})}return r}function shiftCoords(e,t){var r=[];r.area=e.area,r.dist=e.dist;for(var n=0;n<e.length;n++)r.push([e[n][0]+t,e[n][1],e[n][2]]);return r}function createTile$1(e,t,r,n,o,i){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z2:t,transformed:!1,min:[2,1],max:[-1,0]},s=0;s<e.length;s++){a.numFeatures++,addFeature(a,e[s],o,i);var l=e[s].min,u=e[s].max;l[0]<a.min[0]&&(a.min[0]=l[0]),l[1]<a.min[1]&&(a.min[1]=l[1]),u[0]>a.max[0]&&(a.max[0]=u[0]),u[1]>a.max[1]&&(a.max[1]=u[1])}return a}function addFeature(e,t,r,n){var o,i,a,s,l=t.geometry,u=t.type,c=[],f=r*r;if(1===u)for(o=0;o<l.length;o++)c.push(l[o]),e.numPoints++,e.numSimplified++;else for(o=0;o<l.length;o++)if(a=l[o],n||!(2===u&&a.dist<r||3===u&&a.area<f)){var p=[];for(i=0;i<a.length;i++)s=a[i],(n||s[2]>f)&&(p.push(s),e.numSimplified++),e.numPoints++;3===u&&rewind(p,a.outer),c.push(p)}else e.numPoints+=a.length;c.length&&e.features.push({geometry:c,type:u,tags:t.tags||null})}function rewind(e,t){signedArea(e)<0===t&&e.reverse()}function signedArea(e){for(var t,r,n=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],r=e[a],n+=(r[0]-t[0])*(t[1]+r[1]);return n}function geojsonvt(e,t){return new GeoJSONVT(e,t)}function GeoJSONVT(e,t){t=this.options=extend(Object.create(this.options),t);var r=t.debug;r&&console.time("preprocess data");var n=1<<t.maxZoom,o=convert(e,t.tolerance/(n*t.extent));this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=wrap(o,t.buffer/t.extent,intersectX),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(e,t,r){return 32*((1<<e)*r+t)+e}function intersectX(e,t,r){return[r,(r-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function intersectY(e,t,r){return[(r-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],r,1]}function extend(e,t){for(var r in t)e[r]=t[r];return e}function isClippedSquare(e,t,r){var n=e.source;if(1!==n.length)return!1;var o=n[0];if(3!==o.type||o.geometry.length>1)return!1;var i=o.geometry[0].length;if(5!==i)return!1;for(var a=0;a<i;a++){var s=transform.point(o.geometry[0][a],t,e.z2,e.x,e.y);if(s[0]!==-r&&s[0]!==t+r||s[1]!==-r&&s[1]!==t+r)return!1}return!0}function feature$1(e,t){var r=t.id,n=t.bbox,o=null==t.properties?{}:t.properties,i=object(e,t);return null==r&&null==n?{type:"Feature",properties:o,geometry:i}:null==n?{type:"Feature",id:r,properties:o,geometry:i}:{type:"Feature",id:r,bbox:n,properties:o,geometry:i}}function object(e,t){function r(e,t){t.length&&t.pop();for(var r=u[e<0?~e:e],n=0,o=r.length;n<o;++n)t.push(l(r[n].slice(),n));e<0&&reverse(t,o)}function n(e){return l(e.slice())}function o(e){for(var t=[],n=0,o=e.length;n<o;++n)r(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function i(e){for(var t=o(e);t.length<4;)t.push(t[0].slice());return t}function a(e){return e.map(i)}function s(e){var t,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(s)};case"Point":t=n(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(n);break;case"LineString":t=o(e.arcs);break;case"MultiLineString":t=e.arcs.map(o);break;case"Polygon":t=a(e.arcs);break;case"MultiPolygon":t=e.arcs.map(a);break;default:return null}return{type:r,coordinates:t}}var l=transform$3(e),u=e.arcs;return s(t)}function extractArcs(e,t,r){function n(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function o(e){e.forEach(n)}function i(e){e.forEach(o)}function a(e){e.forEach(i)}function s(e){switch(l=e,e.type){case"GeometryCollection":e.geometries.forEach(s);break;case"LineString":o(e.arcs);break;case"MultiLineString":case"Polygon":i(e.arcs);break;case"MultiPolygon":a(e.arcs)}}var l,u=[],c=[];return s(t),c.forEach(null==r?function(e){u.push(e[0].i)}:function(e){r(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}function planarRingArea(e){for(var t,r=-1,n=e.length,o=e[n-1],i=0;++r<n;)t=o,o=e[r],i+=t[0]*o[1]-t[1]*o[0];return Math.abs(i)}var simplify_1=simplify$1,convert_1=convert$1,simplify=simplify_1,tile=transformTile,point=transformPoint,transform$1={tile:tile,point:point},clip_1=clip$1,clip$2=clip_1,wrap_1=wrap$1,tile$1=createTile$1,index=geojsonvt,convert=convert_1,transform=transform$1,clip=clip_1,wrap=wrap_1,createTile=tile$1;GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},GeoJSONVT.prototype.splitTile=function(e,t,r,n,o,i,a){for(var s=this,l=[e,t,r,n],u=this.options,c=u.debug,f=null;l.length;){n=l.pop(),r=l.pop(),t=l.pop(),e=l.pop();var p=1<<t,h=toID(t,r,n),m=s.tiles[h],g=t===u.maxZoom?0:u.tolerance/(p*u.extent);if(!m&&(c>1&&console.time("creation"),m=s.tiles[h]=createTile(e,p,r,n,g,t===u.maxZoom),s.tileCoords.push({z:t,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation"));var d="z"+t;s.stats[d]=(s.stats[d]||0)+1,s.total++}if(m.source=e,o){if(t===u.maxZoom||t===o)continue;var v=1<<o-t;if(r!==Math.floor(i/v)||n!==Math.floor(a/v))continue}else if(t===u.indexMaxZoom||m.numPoints<=u.indexMaxPoints)continue;if(u.solidChildren||!isClippedSquare(m,u.extent,u.buffer)){m.source=null,c>1&&console.time("clipping");var y,x,b,M,P,S,w=.5*u.buffer/u.extent,$=.5-w,C=.5+w,F=1+w;y=x=b=M=null,P=clip(e,p,r-w,r+C,0,intersectX,m.min[0],m.max[0]),S=clip(e,p,r+$,r+F,0,intersectX,m.min[0],m.max[0]),P&&(y=clip(P,p,n-w,n+C,1,intersectY,m.min[1],m.max[1]),x=clip(P,p,n+$,n+F,1,intersectY,m.min[1],m.max[1])),S&&(b=clip(S,p,n-w,n+C,1,intersectY,m.min[1],m.max[1]),M=clip(S,p,n+$,n+F,1,intersectY,m.min[1],m.max[1])),c>1&&console.timeEnd("clipping"),y&&l.push(y,t+1,2*r,2*n),x&&l.push(x,t+1,2*r,2*n+1),b&&l.push(b,t+1,2*r+1,2*n),M&&l.push(M,t+1,2*r+1,2*n+1)}else o&&(f=t)}return f},GeoJSONVT.prototype.getTile=function(e,t,r){var n=this,o=this.options,i=o.extent,a=o.debug,s=1<<e;t=(t%s+s)%s;var l=toID(e,t,r);if(this.tiles[l])return transform.tile(this.tiles[l],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var u,c=e,f=t,p=r;!u&&c>0;)c--,f=Math.floor(f/2),p=Math.floor(p/2),u=n.tiles[toID(c,f,p)];if(!u||!u.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",c,f,p),isClippedSquare(u,i,o.buffer))return transform.tile(u,i);a>1&&console.time("drilling down");var h=this.splitTile(u.source,c,f,p,e,t,r);if(a>1&&console.timeEnd("drilling down"),null!==h){var m=1<<e-h;l=toID(h,Math.floor(t/m),Math.floor(r/m))}return this.tiles[l]?transform.tile(this.tiles[l],i):null};var identity=function(e){return e},transform$3=function(e){if(null==(t=e.transform))return identity;var t,r,n,o=t.scale[0],i=t.scale[1],a=t.translate[0],s=t.translate[1];return function(e,t){return t||(r=n=0),e[0]=(r+=e[0])*o+a,e[1]=(n+=e[1])*i+s,e}},bbox=function(e){function t(e){s[0]=e[0],s[1]=e[1],a(s),s[0]<l&&(l=s[0]),s[0]>c&&(c=s[0]),s[1]<u&&(u=s[1]),s[1]>f&&(f=s[1])}function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var n=e.bbox;if(!n){var o,i,a=transform$3(e),s=new Array(2),l=1/0,u=l,c=-l,f=-l;e.arcs.forEach(function(e){for(var t=-1,r=e.length;++t<r;)o=e[t],s[0]=o[0],s[1]=o[1],a(s,t),s[0]<l&&(l=s[0]),s[0]>c&&(c=s[0]),s[1]<u&&(u=s[1]),s[1]>f&&(f=s[1])});for(i in e.objects)r(e.objects[i]);n=e.bbox=[l,u,c,f]}return n},reverse=function(e,t){for(var r,n=e.length,o=n-t;o<--n;)r=e[o],e[o++]=e[n],e[n]=r},feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return feature$1(e,t)})}:feature$1(e,t)},stitch=function(e,t){function r(t){var r,n=e.arcs[t<0?~t:t],o=n[0];return e.transform?(r=[0,0],n.forEach(function(e){r[0]+=e[0],r[1]+=e[1]})):r=n[n.length-1],t<0?[r,o]:[o,r]}function n(e,t){for(var r in e){var n=e[r];delete t[n.start],delete n.start,delete n.end,n.forEach(function(e){o[e<0?~e:e]=1}),s.push(n)}}var o={},i={},a={},s=[],l=-1;return t.forEach(function(r,n){var o,i=e.arcs[r<0?~r:r];i.length<3&&!i[1][0]&&!i[1][1]&&(o=t[++l],t[l]=r,t[n]=o)}),t.forEach(function(e){var t,n,o=r(e),s=o[0],l=o[1];if(t=a[s])if(delete a[t.end],t.push(e),t.end=l,n=i[l]){delete i[n.start];var u=n===t?t:t.concat(n);i[u.start=t.start]=a[u.end=n.end]=u}else i[t.start]=a[t.end]=t;else if(t=i[l])if(delete i[t.start],t.unshift(e),t.start=s,n=a[s]){delete a[n.end];var c=n===t?t:n.concat(t);i[c.start=n.start]=a[c.end=t.end]=c}else i[t.start]=a[t.end]=t;else t=[e],i[t.start=s]=a[t.end=l]=t}),n(a,i),n(i,a),t.forEach(function(e){o[e<0?~e:e]||s.push([e])}),s},bisect=function(e,t){for(var r=0,n=e.length;r<n;){var o=r+n>>>1;e[o]<t?r=o+1:n=o}return r},slicers={},options;onmessage=function(e){if("slice"===e.data[0]){var t=e.data[1];if(options=e.data[2],t.type&&"Topology"===t.type)for(var r in t.objects)slicers[r]=index(feature(t,t.objects[r]),options);else slicers[options.vectorTileLayerName]=index(t,options)}else if("get"===e.data[0]){var n=e.data[1],o={};for(var r in slicers){var i=slicers[r].getTile(n.z,n.x,n.y);if(i){var a={features:[],extent:options.extent,name:options.vectorTileLayerName,length:i.features.length};for(var s in i.features){var l={geometry:i.features[s].geometry,properties:i.features[s].tags,type:i.features[s].type};a.features.push(l)}o[r]=a}}postMessage({layers:o,coords:n})}};\n',"text/plain; charset=us-ascii");L.VectorGrid.Slicer=L.VectorGrid.extend({options:{vectorTileLayerName:"sliced",extent:4096,maxZoom:14},initialize:function(e,t){for(var n in L.VectorGrid.prototype.initialize.call(this,t),t={},this.options)"rendererFactory"!==n&&"vectorTileLayerStyles"!==n&&"function"!=typeof this.options[n]&&(t[n]=this.options[n]);this._worker=new Worker(V),this._worker.postMessage(["slice",e,t])},_getVectorTilePromise:function(e){var t=this,n=new Promise(function(n){t._worker.addEventListener("message",function i(r){r.data.coords&&r.data.coords.x===e.x&&r.data.coords.y===e.y&&r.data.coords.z===e.z&&(n(r.data),t._worker.removeEventListener("message",i))})});return this._worker.postMessage(["get",e]),n}}),L.vectorGrid.slicer=function(e,t){return new L.VectorGrid.Slicer(e,t)},L.Canvas.Tile=L.Canvas.extend({initialize:function(e,t,n){L.Canvas.prototype.initialize.call(this,n),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,n.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:L.Util.falseFn,addTo:function(e){this._map=e},removeFrom:function(e){delete this._map},_onClick:function(e){var t,n,i=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());for(var r in this._layers)(t=this._layers[r]).options.interactive&&t._containsPoint(i)&&!this._map._draggableMoved(t)&&(n=t);n&&(L.DomEvent.fakeStop(e),this._fireEvent([n],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());this._handleMouseHover(e,t)}},_updateIcon:function(e){if(this._drawing){var t=e.options.icon.options,n=L.point(t.iconSize),i=t.iconAnchor||n&&n.divideBy(2,!0),r=e._point.subtract(i),s=this._ctx,o=e._getImage();o.complete?s.drawImage(o,r.x,r.y,n.x,n.y):L.DomEvent.on(o,"load",function(){s.drawImage(o,r.x,r.y,n.x,n.y)}),this._drawnLayers[e._leaflet_id]=e}}}),L.canvas.tile=function(e,t,n){return new L.Canvas.Tile(e,t,n)}},ipqG:function(e,t){L.TimeDimension=(L.Layer||L.Class).extend({includes:L.Evented||L.Mixin.Events,initialize:function(e){L.setOptions(this,e),this._availableTimes=this._generateAvailableTimes(),this._currentTimeIndex=-1,this._loadingTimeIndex=-1,this._loadingTimeout=this.options.loadingTimeout||3e3,this._syncedLayers=[],this._availableTimes.length>0&&this.setCurrentTime(this.options.currentTime||this._getDefaultCurrentTime()),this.options.lowerLimitTime&&this.setLowerLimit(this.options.lowerLimitTime),this.options.upperLimitTime&&this.setUpperLimit(this.options.upperLimitTime)},getAvailableTimes:function(){return this._availableTimes},getCurrentTimeIndex:function(){return-1===this._currentTimeIndex?this._availableTimes.length-1:this._currentTimeIndex},getCurrentTime:function(){var e;return(e=-1!==this._loadingTimeIndex?this._loadingTimeIndex:this.getCurrentTimeIndex())>=0?this._availableTimes[e]:null},isLoading:function(){return-1!==this._loadingTimeIndex},setCurrentTimeIndex:function(e){var t=this._upperLimit||this._availableTimes.length-1;if(!((e=Math.min(Math.max(this._lowerLimit||0,e),t))<0)){this._loadingTimeIndex=e;var n=this._availableTimes[e];this._checkSyncedLayersReady(this._availableTimes[this._loadingTimeIndex])?this._newTimeIndexLoaded():(this.fire("timeloading",{time:n}),setTimeout((function(e){e==this._loadingTimeIndex&&this._newTimeIndexLoaded()}).bind(this,e),this._loadingTimeout))}},_newTimeIndexLoaded:function(){if(-1!==this._loadingTimeIndex){var e=this._availableTimes[this._loadingTimeIndex];this._currentTimeIndex=this._loadingTimeIndex,this.fire("timeload",{time:e}),this._loadingTimeIndex=-1}},_checkSyncedLayersReady:function(e){for(var t=0,n=this._syncedLayers.length;t<n;t++)if(this._syncedLayers[t].isReady&&!this._syncedLayers[t].isReady(e))return!1;return!0},setCurrentTime:function(e){var t=this._seekNearestTimeIndex(e);this.setCurrentTimeIndex(t)},seekNearestTime:function(e){var t=this._seekNearestTimeIndex(e);return this._availableTimes[t]},nextTime:function(e,t){e||(e=1);var n=this._currentTimeIndex,i=this._upperLimit||this._availableTimes.length-1,r=this._lowerLimit||0;this._loadingTimeIndex>-1&&(n=this._loadingTimeIndex),(n+=e)>i&&(n=t?r:i),n<r&&(n=t?i:r),this.setCurrentTimeIndex(n)},prepareNextTimes:function(e,t,n){e||(e=1);var i=this._currentTimeIndex,r=i;this._loadingTimeIndex>-1&&(i=this._loadingTimeIndex);for(var s=0,o=this._syncedLayers.length;s<o;s++)this._syncedLayers[s].setMinimumForwardCache&&this._syncedLayers[s].setMinimumForwardCache(t);for(var a=t,l=this._upperLimit||this._availableTimes.length-1,u=this._lowerLimit||0;a>0;){if((i+=e)>l){if(!n)break;i=u}if(i<u){if(!n)break;i=l}if(r===i)break;this.fire("timeloading",{time:this._availableTimes[i]}),a--}},getNumberNextTimesReady:function(e,t,n){e||(e=1);var i=this._currentTimeIndex;this._loadingTimeIndex>-1&&(i=this._loadingTimeIndex);for(var r=t,s=0,o=this._upperLimit||this._availableTimes.length-1,a=this._lowerLimit||0;r>0;){if((i+=e)>o){if(!n){r=0,s=t;break}i=a}if(i<a){if(!n){r=0,s=t;break}i=o}this._checkSyncedLayersReady(this._availableTimes[i])&&s++,r--}return s},previousTime:function(e,t){this.nextTime(-1*e,t)},registerSyncedLayer:function(e){this._syncedLayers.push(e),e.on("timeload",this._onSyncedLayerLoaded,this)},unregisterSyncedLayer:function(e){var t=this._syncedLayers.indexOf(e);-1!=t&&this._syncedLayers.splice(t,1),e.off("timeload",this._onSyncedLayerLoaded,this)},_onSyncedLayerLoaded:function(e){e.time==this._availableTimes[this._loadingTimeIndex]&&this._checkSyncedLayersReady(e.time)&&this._newTimeIndexLoaded()},_generateAvailableTimes:function(){if(this.options.times)return L.TimeDimension.Util.parseTimesExpression(this.options.times);if(this.options.timeInterval){var e=L.TimeDimension.Util.parseTimeInterval(this.options.timeInterval);return L.TimeDimension.Util.explodeTimeRange(e[0],e[1],this.options.period||"P1D",this.options.validTimeRange||void 0)}return[]},_getDefaultCurrentTime:function(){var e=this._seekNearestTimeIndex((new Date).getTime());return this._availableTimes[e]},_seekNearestTimeIndex:function(e){for(var t=0,n=this._availableTimes.length;t<n&&!(e<this._availableTimes[t]);t++);return t>0&&t--,t},setAvailableTimes:function(e,t){var n=this.getCurrentTime(),i=this.getLowerLimit(),r=this.getUpperLimit();if("extremes"==t){var s=this.options.period||"P1D";this._availableTimes=L.TimeDimension.Util.explodeTimeRange(new Date(e[0]),new Date(e[e.length-1]),s)}else{var o=L.TimeDimension.Util.parseTimesExpression(e);if(0===this._availableTimes.length)this._availableTimes=o;else if("intersect"==t)this._availableTimes=L.TimeDimension.Util.intersect_arrays(o,this._availableTimes);else if("union"==t)this._availableTimes=L.TimeDimension.Util.union_arrays(o,this._availableTimes);else{if("replace"!=t)throw"Merge available times mode not implemented: "+t;this._availableTimes=o}}i&&this.setLowerLimit(i),r&&this.setUpperLimit(r),this.setCurrentTime(n),this.fire("availabletimeschanged",{availableTimes:this._availableTimes,currentTime:n})},getLowerLimit:function(){return this._availableTimes[this.getLowerLimitIndex()]},getUpperLimit:function(){return this._availableTimes[this.getUpperLimitIndex()]},setLowerLimit:function(e){var t=this._seekNearestTimeIndex(e);this.setLowerLimitIndex(t)},setUpperLimit:function(e){var t=this._seekNearestTimeIndex(e);this.setUpperLimitIndex(t)},setLowerLimitIndex:function(e){this._lowerLimit=Math.min(Math.max(e||0,0),this._upperLimit||this._availableTimes.length-1),this.fire("limitschanged",{lowerLimit:this._lowerLimit,upperLimit:this._upperLimit})},setUpperLimitIndex:function(e){this._upperLimit=Math.max(Math.min(e,this._availableTimes.length-1),this._lowerLimit||0),this.fire("limitschanged",{lowerLimit:this._lowerLimit,upperLimit:this._upperLimit})},getLowerLimitIndex:function(){return this._lowerLimit},getUpperLimitIndex:function(){return this._upperLimit}}),L.Map.addInitHook(function(){this.options.timeDimension&&(this.timeDimension=L.timeDimension(this.options.timeDimensionOptions||{}))}),L.timeDimension=function(e){return new L.TimeDimension(e)},L.TimeDimension.Util={getTimeDuration:function(e){if("undefined"==typeof nezasa)throw"iso8601-js-period library is required for Leatlet.TimeDimension: https://github.com/nezasa/iso8601-js-period";return nezasa.iso8601.Period.parse(e,!0)},addTimeDuration:function(e,t,n){void 0===n&&(n=!0),("string"==typeof t||t instanceof String)&&(t=this.getTimeDuration(t));var i=t.length,r=n?"getUTC":"get",s=n?"setUTC":"set";i>0&&0!=t[0]&&e[s+"FullYear"](e[r+"FullYear"]()+t[0]),i>1&&0!=t[1]&&e[s+"Month"](e[r+"Month"]()+t[1]),i>2&&0!=t[2]&&e[s+"Date"](e[r+"Date"]()+7*t[2]),i>3&&0!=t[3]&&e[s+"Date"](e[r+"Date"]()+t[3]),i>4&&0!=t[4]&&e[s+"Hours"](e[r+"Hours"]()+t[4]),i>5&&0!=t[5]&&e[s+"Minutes"](e[r+"Minutes"]()+t[5]),i>6&&0!=t[6]&&e[s+"Seconds"](e[r+"Seconds"]()+t[6])},subtractTimeDuration:function(e,t,n){("string"==typeof t||t instanceof String)&&(t=this.getTimeDuration(t));for(var i=[],r=0,s=t.length;r<s;r++)i.push(-t[r]);this.addTimeDuration(e,i,n)},parseAndExplodeTimeRange:function(e){var t=e.split("/"),n=new Date(Date.parse(t[0])),i=new Date(Date.parse(t[1]));return this.explodeTimeRange(n,i,t.length>2?t[2]:"P1D")},explodeTimeRange:function(e,t,n,i){var r=this.getTimeDuration(n),s=[],o=new Date(e.getTime()),a=null,l=null,u=null,h=null;if(void 0!==i){var c=i.split("/");a=c[0].split(":")[0],l=c[0].split(":")[1],u=c[1].split(":")[0],h=c[1].split(":")[1]}for(;o<t;)(void 0===i||o.getUTCHours()>=a&&o.getUTCHours()<=u)&&(o.getUTCHours()!=a||o.getUTCMinutes()>=l)&&(o.getUTCHours()!=u||o.getUTCMinutes()<=h)&&s.push(o.getTime()),this.addTimeDuration(o,r);return o>=t&&s.push(t.getTime()),s},parseTimeInterval:function(e){var t=e.split("/");if(2!=t.length)throw"Incorrect ISO9601 TimeInterval: "+e;var n=Date.parse(t[0]),i=null,r=null;return isNaN(n)?(r=this.getTimeDuration(t[0]),i=Date.parse(t[1]),n=new Date(i),this.subtractTimeDuration(n,r,!0),i=new Date(i)):(i=Date.parse(t[1]),isNaN(i)?(r=this.getTimeDuration(t[1]),i=new Date(n),this.addTimeDuration(i,r,!0)):i=new Date(i),n=new Date(n)),[n,i]},parseTimesExpression:function(e){var t=[];if(!e)return t;if("string"==typeof e||e instanceof String)for(var n,i,r=e.split(","),s=0,o=r.length;s<o;s++)3==(n=r[s]).split("/").length?t=t.concat(this.parseAndExplodeTimeRange(n)):(i=Date.parse(n),isNaN(i)||t.push(i));else t=e;return t.sort(function(e,t){return e-t})},intersect_arrays:function(e,t){for(var n=e.slice(0),i=t.slice(0),r=[];n.length>0&&i.length>0;)n[0]<i[0]?n.shift():n[0]>i[0]?i.shift():(r.push(n.shift()),i.shift());return r},union_arrays:function(e,t){for(var n=e.slice(0),i=t.slice(0),r=[];n.length>0&&i.length>0;)n[0]<i[0]?r.push(n.shift()):n[0]>i[0]?r.push(i.shift()):(r.push(n.shift()),i.shift());return n.length>0?r=r.concat(n):i.length>0&&(r=r.concat(i)),r}},L.TimeDimension.Layer=(L.Layer||L.Class).extend({includes:L.Evented||L.Mixin.Events,options:{opacity:1,zIndex:1},initialize:function(e,t){L.setOptions(this,t||{}),this._map=null,this._baseLayer=e,this._currentLayer=null,this._timeDimension=this.options.timeDimension||null},addTo:function(e){return e.addLayer(this),this},onAdd:function(e){this._map=e,!this._timeDimension&&e.timeDimension&&(this._timeDimension=e.timeDimension),this._timeDimension.on("timeloading",this._onNewTimeLoading,this),this._timeDimension.on("timeload",this._update,this),this._timeDimension.registerSyncedLayer(this),this._update()},onRemove:function(e){this._timeDimension.unregisterSyncedLayer(this),this._timeDimension.off("timeloading",this._onNewTimeLoading,this),this._timeDimension.off("timeload",this._update,this),this.eachLayer(e.removeLayer,e),this._map=null},eachLayer:function(e,t){return e.call(t,this._baseLayer),this},setZIndex:function(e){return this.options.zIndex=e,this._baseLayer.setZIndex&&this._baseLayer.setZIndex(e),this._currentLayer&&this._currentLayer.setZIndex&&this._currentLayer.setZIndex(e),this},setOpacity:function(e){return this.options.opacity=e,this._baseLayer.setOpacity&&this._baseLayer.setOpacity(e),this._currentLayer&&this._currentLayer.setOpacity&&this._currentLayer.setOpacity(e),this},bringToBack:function(){if(this._currentLayer)return this._currentLayer.bringToBack(),this},bringToFront:function(){if(this._currentLayer)return this._currentLayer.bringToFront(),this},_onNewTimeLoading:function(e){this.fire("timeload",{time:e.time})},isReady:function(e){return!0},_update:function(){return!0},getBaseLayer:function(){return this._baseLayer},getBounds:function(){var e=new L.LatLngBounds;return this._currentLayer&&e.extend(this._currentLayer.getBounds?this._currentLayer.getBounds():this._currentLayer.getLatLng()),e}}),L.timeDimension.layer=function(e,t){return new L.TimeDimension.Layer(e,t)},L.TimeDimension.Layer.WMS=L.TimeDimension.Layer.extend({initialize:function(e,t){L.TimeDimension.Layer.prototype.initialize.call(this,e,t),this._timeCacheBackward=this.options.cacheBackward||this.options.cache||0,this._timeCacheForward=this.options.cacheForward||this.options.cache||0,this._wmsVersion=this.options.wmsVersion||this.options.version||e.options.version||"1.1.1",this._getCapabilitiesParams=this.options.getCapabilitiesParams||{},this._getCapabilitiesAlternateUrl=this.options.getCapabilitiesUrl||null,this._getCapabilitiesAlternateLayerName=this.options.getCapabilitiesLayerName||null,this._proxy=this.options.proxy||null,this._updateTimeDimension=this.options.updateTimeDimension||!1,this._setDefaultTime=this.options.setDefaultTime||!1,this._updateTimeDimensionMode=this.options.updateTimeDimensionMode||"intersect",this._layers={},this._defaultTime=0,this._availableTimes=[],this._capabilitiesRequested=!1,(this._updateTimeDimension||this.options.requestTimeFromCapabilities)&&this._requestTimeDimensionFromCapabilities(),this._baseLayer.on("load",(function(){this._baseLayer.setLoaded(!0),this.fire("timeload",{time:this._defaultTime})}).bind(this))},getEvents:function(){var e=L.bind(this._unvalidateCache,this);return{moveend:e,zoomend:e}},eachLayer:function(e,t){for(var n in this._layers)this._layers.hasOwnProperty(n)&&e.call(t,this._layers[n]);return L.TimeDimension.Layer.prototype.eachLayer.call(this,e,t)},_onNewTimeLoading:function(e){var t=this._getLayerForTime(e.time);this._map.hasLayer(t)||this._map.addLayer(t)},isReady:function(e){var t=this._getLayerForTime(e);return!(!this.options.bounds||!this._map||this._map.getBounds().contains(this.options.bounds))||t.isLoaded()},onAdd:function(e){L.TimeDimension.Layer.prototype.onAdd.call(this,e),0==this._availableTimes.length?this._requestTimeDimensionFromCapabilities():this._updateTimeDimensionAvailableTimes()},_update:function(){if(this._map){var e=this._timeDimension.getCurrentTime(),t=this._getLayerForTime(e);null==this._currentLayer&&(this._currentLayer=t),this._map.hasLayer(t)?this._showLayer(t,e):this._map.addLayer(t)}},setOpacity:function(e){for(var t in L.TimeDimension.Layer.prototype.setOpacity.apply(this,arguments),this._layers)this._layers.hasOwnProperty(t)&&this._layers[t].setOpacity&&this._layers[t].setOpacity(e)},setZIndex:function(e){for(var t in L.TimeDimension.Layer.prototype.setZIndex.apply(this,arguments),this._layers)this._layers.hasOwnProperty(t)&&this._layers[t].setZIndex&&this._layers[t].setZIndex(e)},setParams:function(e,t){for(var n in L.extend(this._baseLayer.options,e),this._baseLayer.setParams&&this._baseLayer.setParams(e,t),this._layers)this._layers.hasOwnProperty(n)&&this._layers[n].setParams&&(this._layers[n].setLoaded(!1),this._layers[n].setParams(e,t));return this},_unvalidateCache:function(){var e=this._timeDimension.getCurrentTime();for(var t in this._layers)e!=t&&this._layers.hasOwnProperty(t)&&(this._layers[t].setLoaded(!1),this._layers[t].redraw())},_evictCachedTimes:function(e,t){var n,i=this._getLoadedTimes(),r=String(this._currentTime),s=i.indexOf(r),o=[];t>-1&&(n=s-t)>0&&(o=i.splice(0,n),this._removeLayers(o)),e>-1&&(s=i.indexOf(r),(n=i.length-s-e-1)>0&&(o=i.splice(s+e+1,n),this._removeLayers(o)))},_showLayer:function(e,t){this._currentLayer&&this._currentLayer!==e&&this._currentLayer.hide(),e.show(),this._currentLayer&&this._currentLayer===e||(this._currentLayer=e,this._currentTime=t,this._evictCachedTimes(this._timeCacheForward,this._timeCacheBackward))},_getLayerForTime:function(e){if(0==e||e==this._defaultTime||null==e)return this._baseLayer;if(this._layers.hasOwnProperty(e))return this._layers[e];var t=this._getNearestTime(e);if(this._layers.hasOwnProperty(t))return this._layers[t];var n=this._createLayerForTime(t);return this._layers[e]=n,n.on("load",(function(e,t){e.setLoaded(!0),this._layers[t]||(this._layers[t]=e),this._timeDimension&&t==this._timeDimension.getCurrentTime()&&!this._timeDimension.isLoading()&&this._showLayer(e,t),this.fire("timeload",{time:t})}).bind(this,n,e)),n.onAdd=(function(e){Object.getPrototypeOf(this).onAdd.call(this,e),this.hide()}).bind(n),n},_createLayerForTime:function(e){var t=this._baseLayer.options;return t.time=new Date(e).toISOString(),new this._baseLayer.constructor(this._baseLayer.getURL(),t)},_getLoadedTimes:function(){var e=[];for(var t in this._layers)this._layers.hasOwnProperty(t)&&e.push(t);return e.sort(function(e,t){return e-t})},_removeLayers:function(e){for(var t=0,n=e.length;t<n;t++)this._map&&this._map.removeLayer(this._layers[e[t]]),delete this._layers[e[t]]},setMinimumForwardCache:function(e){e>this._timeCacheForward&&(this._timeCacheForward=e)},_requestTimeDimensionFromCapabilities:function(){if(!this._capabilitiesRequested){this._capabilitiesRequested=!0;var e=this._getCapabilitiesUrl();this._proxy&&(e=this._proxy+"?url="+encodeURIComponent(e));var t=new XMLHttpRequest;t.addEventListener("load",(function(e){var t=e.currentTarget.responseXML;this._defaultTime=Date.parse(this._getDefaultTimeFromCapabilities(t)),this._setDefaultTime=this._setDefaultTime||this._timeDimension&&0==this._timeDimension.getAvailableTimes().length,this.setAvailableTimes(this._parseTimeDimensionFromCapabilities(t)),this._setDefaultTime&&this._timeDimension&&this._timeDimension.setCurrentTime(this._defaultTime)}).bind(this)),t.overrideMimeType("application/xml"),t.open("GET",e),t.send()}},_getCapabilitiesUrl:function(){var e=this._baseLayer.getURL();this._getCapabilitiesAlternateUrl&&(e=this._getCapabilitiesAlternateUrl);var t=L.extend({},this._getCapabilitiesParams,{request:"GetCapabilities",service:"WMS",version:this._wmsVersion});return e+L.Util.getParamString(t,e,t.uppercase)},_parseTimeDimensionFromCapabilities:function(e){var t=e.querySelectorAll('Layer[queryable="1"]'),n=this._baseLayer.wmsParams.layers,i=null,r=null;return t.forEach(function(e){e.querySelector("Name").innerHTML===n&&(i=e)}),i&&((r=this._getTimesFromLayerCapabilities(i))||(r=this._getTimesFromLayerCapabilities(i.parentNode))),r},_getTimesFromLayerCapabilities:function(e){var t=null,n=e.querySelectorAll("Dimension[name='time']");if(n&&n.length&&n[0].textContent.length)t=n[0].textContent.trim();else{var i=e.querySelectorAll("Extent[name='time']");i&&i.length&&i[0].textContent.length&&(t=i[0].textContent.trim())}return t},_getDefaultTimeFromCapabilities:function(e){var t=e.querySelectorAll('Layer[queryable="1"]'),n=this._baseLayer.wmsParams.layers,i=null;t.forEach(function(e){e.querySelector("Name").innerHTML===n&&(i=e)});var r=0;return i&&0==(r=this._getDefaultTimeFromLayerCapabilities(i))&&(r=this._getDefaultTimeFromLayerCapabilities(i.parentNode)),r},_getDefaultTimeFromLayerCapabilities:function(e){var t=0,n=e.querySelectorAll("Dimension[name='time']");if(n&&n.length&&n[0].attributes.default)t=n[0].attributes.default;else{var i=e.querySelectorAll("Extent[name='time']");i&&i.length&&i[0].attributes.default&&(t=i[0].attributes.default)}return t},setAvailableTimes:function(e){this._availableTimes=L.TimeDimension.Util.parseTimesExpression(e),this._updateTimeDimensionAvailableTimes()},_updateTimeDimensionAvailableTimes:function(){(this._timeDimension&&this._updateTimeDimension||this._timeDimension&&0==this._timeDimension.getAvailableTimes().length)&&(this._timeDimension.setAvailableTimes(this._availableTimes,this._updateTimeDimensionMode),this._setDefaultTime&&this._defaultTime>0&&this._timeDimension.setCurrentTime(this._defaultTime))},_getNearestTime:function(e){if(this._layers.hasOwnProperty(e))return e;if(0==this._availableTimes.length)return e;for(var t=0,n=this._availableTimes.length;t<n&&!(e<this._availableTimes[t]);t++);return t>0&&t--,this._availableTimes[t]}}),L.NonTiledLayer||(L.NonTiledLayer=(L.Layer||L.Class).extend({})),L.NonTiledLayer.include({_visible:!0,_loaded:!1,_originalUpdate:L.NonTiledLayer.prototype._update,_originalOnRemove:L.NonTiledLayer.prototype.onRemove,_update:function(){!this._visible&&this._loaded||this._originalUpdate()},onRemove:function(e){this._loaded=!1,this._originalOnRemove(e)},setLoaded:function(e){this._loaded=e},isLoaded:function(){return this._loaded},hide:function(){this._visible=!1,this._div.style.display="none"},show:function(){this._visible=!0,this._div.style.display="block"},getURL:function(){return this._wmsUrl}}),L.TileLayer.include({_visible:!0,_loaded:!1,_originalUpdate:L.TileLayer.prototype._update,_update:function(){!this._visible&&this._loaded||this._originalUpdate()},setLoaded:function(e){this._loaded=e},isLoaded:function(){return this._loaded},hide:function(){this._visible=!1,this._container&&(this._container.style.display="none")},show:function(){this._visible=!0,this._container&&(this._container.style.display="block")},getURL:function(){return this._url}}),L.timeDimension.layer.wms=function(e,t){return new L.TimeDimension.Layer.WMS(e,t)},L.TimeDimension.Layer.GeoJson=L.TimeDimension.Layer.extend({initialize:function(e,t){L.TimeDimension.Layer.prototype.initialize.call(this,e,t),this._updateTimeDimension=this.options.updateTimeDimension||!1,this._updateTimeDimensionMode=this.options.updateTimeDimensionMode||"extremes",this._duration=this.options.duration||null,this._addlastPoint=this.options.addlastPoint||!1,this._waitForReady=this.options.waitForReady||!1,this._defaultTime=0,this._availableTimes=[],this._loaded=!1,0==this._baseLayer.getLayers().length?this._waitForReady?this._baseLayer.on("ready",this._onReadyBaseLayer,this):this._loaded=!0:(this._loaded=!0,this._setAvailableTimes()),this._baseLayer.on("layeradd",(function(){this._loaded&&this._setAvailableTimes()}).bind(this))},onAdd:function(e){L.TimeDimension.Layer.prototype.onAdd.call(this,e),this._loaded&&this._setAvailableTimes()},eachLayer:function(e,t){return this._currentLayer&&e.call(t,this._currentLayer),L.TimeDimension.Layer.prototype.eachLayer.call(this,e,t)},isReady:function(e){return this._loaded},_update:function(){if(this._map&&this._loaded){this._timeDimension.getCurrentTime();var e=this._timeDimension.getCurrentTime(),t=0;if(this._duration){var n=new Date(e);L.TimeDimension.Util.subtractTimeDuration(n,this._duration,!0),t=n.getTime()}for(var i=L.geoJson(null,this._baseLayer.options),r=this._baseLayer.getLayers(),s=0,o=r.length;s<o;s++){var a=this._getFeatureBetweenDates(r[s].feature,t,e);if(a&&(i.addData(a),this._addlastPoint&&"LineString"==a.geometry.type&&a.geometry.coordinates.length>0)){var l=a.properties;l.last=!0,i.addData({type:"Feature",properties:l,geometry:{type:"Point",coordinates:a.geometry.coordinates[a.geometry.coordinates.length-1]}})}}this._currentLayer&&this._map.removeLayer(this._currentLayer),i.getLayers().length&&(i.addTo(this._map),this._currentLayer=i)}},_setAvailableTimes:function(){var e=[];this._availableTimes=[];for(var t=this._baseLayer.getLayers(),n=0,i=t.length;n<i;n++)t[n].feature&&(e=L.TimeDimension.Util.union_arrays(e,this._getFeatureTimes(t[n].feature)));for(n=0,i=e.length;n<i;n++){var r=e[n];("string"==typeof r||r instanceof String)&&(r=Date.parse(r.trim())),this._availableTimes.push(r)}this._timeDimension&&(this._updateTimeDimension||0==this._timeDimension.getAvailableTimes().length)&&this._timeDimension.setAvailableTimes(this._availableTimes,this._updateTimeDimensionMode)},_getFeatureTimes:function(e){return e.properties?e.properties.hasOwnProperty("coordTimes")?e.properties.coordTimes:e.properties.hasOwnProperty("times")?e.properties.times:e.properties.hasOwnProperty("linestringTimestamps")?e.properties.linestringTimestamps:e.properties.hasOwnProperty("time")?[e.properties.time]:[]:[]},_getFeatureBetweenDates:function(e,t,n){var i=this._getFeatureTimes(e);if(0==i.length)return e;for(var r=[],s=0,o=i.length;s<o;s++){var a=i[s];("string"==typeof a||a instanceof String)&&(a=Date.parse(a.trim())),r.push(a)}if(r[0]>n||r[o-1]<t)return null;var l,u=null,h=null;if(r[(o=r.length)-1]>t)for(s=0;s<o;s++)if(null===u&&r[s]>t&&(u=s),r[s]>n){h=s;break}return null===u&&(u=0),null===h&&(h=o),l=e.geometry.coordinates[0].length?e.geometry.coordinates.slice(u,h):e.geometry.coordinates,{type:"Feature",properties:e.properties,geometry:{type:e.geometry.type,coordinates:l}}},_onReadyBaseLayer:function(){this._loaded=!0,this._setAvailableTimes(),this._update()}}),L.timeDimension.layer.geoJson=function(e,t){return new L.TimeDimension.Layer.GeoJson(e,t)},L.TimeDimension.Player=(L.Layer||L.Class).extend({includes:L.Evented||L.Mixin.Events,initialize:function(e,t){L.setOptions(this,e),this._timeDimension=t,this._paused=!1,this._buffer=this.options.buffer||5,this._minBufferReady=this.options.minBufferReady||1,this._waitingForBuffer=!1,this._loop=this.options.loop||!1,this._steps=1,this._timeDimension.on("timeload",(function(e){this.release(),this._waitingForBuffer=!1}).bind(this)),this.setTransitionTime(this.options.transitionTime||1e3),this._timeDimension.on("limitschanged availabletimeschanged timeload",(function(e){this._timeDimension.prepareNextTimes(this._steps,this._minBufferReady,this._loop)}).bind(this))},_tick:function(){var e=this._getMaxIndex(),t=this._timeDimension.getCurrentTimeIndex()>=e&&this._steps>0,n=0==this._timeDimension.getCurrentTimeIndex()&&this._steps<0;if((t||n)&&!this._loop)return this.pause(),this.stop(),void this.fire("animationfinished");if(!this._paused){var i=0,r=this._bufferSize;if(this._minBufferReady>0)if(i=this._timeDimension.getNumberNextTimesReady(this._steps,r,this._loop),this._waitingForBuffer){if(i<r)return void this.fire("waiting",{buffer:r,available:i});this.fire("running"),this._waitingForBuffer=!1}else if(i<this._minBufferReady)return this._waitingForBuffer=!0,this._timeDimension.prepareNextTimes(this._steps,r,this._loop),void this.fire("waiting",{buffer:r,available:i});this.pause(),this._timeDimension.nextTime(this._steps,this._loop),r>0&&this._timeDimension.prepareNextTimes(this._steps,r,this._loop)}},_getMaxIndex:function(){return Math.min(this._timeDimension.getAvailableTimes().length-1,this._timeDimension.getUpperLimitIndex()||1/0)},start:function(e){this._intervalID||(this._steps=e||1,this._waitingForBuffer=!1,this.options.startOver&&this._timeDimension.getCurrentTimeIndex()===this._getMaxIndex()&&this._timeDimension.setCurrentTimeIndex(this._timeDimension.getLowerLimitIndex()||0),this.release(),this._intervalID=window.setInterval(L.bind(this._tick,this),this._transitionTime),this._tick(),this.fire("play"),this.fire("running"))},stop:function(){this._intervalID&&(clearInterval(this._intervalID),this._intervalID=null,this._waitingForBuffer=!1,this.fire("stop"))},pause:function(){this._paused=!0},release:function(){this._paused=!1},getTransitionTime:function(){return this._transitionTime},isPlaying:function(){return!!this._intervalID},isWaiting:function(){return this._waitingForBuffer},isLooped:function(){return this._loop},setLooped:function(e){this._loop=e,this.fire("loopchange",{loop:e})},setTransitionTime:function(e){this._transitionTime=e,this._bufferSize="function"==typeof this._buffer?this._buffer.call(this,this._transitionTime,this._minBufferReady,this._loop):this._buffer,this._intervalID&&(this.stop(),this.start(this._steps)),this.fire("speedchange",{transitionTime:e,buffer:this._bufferSize})},getSteps:function(){return this._steps}}),L.UI=L.ui=L.UI||{},L.UI.Knob=L.Draggable.extend({options:{className:"knob",step:1,rangeMin:0,rangeMax:10},initialize:function(e,t){L.setOptions(this,t),this._element=L.DomUtil.create("div",this.options.className||"knob",e),L.Draggable.prototype.initialize.call(this,this._element,this._element),this._container=e,this.on("predrag",function(){this._newPos.y=0,this._newPos.x=this._adjustX(this._newPos.x)},this),this.on("dragstart",function(){L.DomUtil.addClass(e,"dragging")}),this.on("dragend",function(){L.DomUtil.removeClass(e,"dragging")}),L.DomEvent.on(this._element,"dblclick",function(e){this.fire("dblclick",e)},this),L.DomEvent.disableClickPropagation(this._element),this.enable()},_getProjectionCoef:function(){return(this.options.rangeMax-this.options.rangeMin)/(this._container.offsetWidth||this._container.style.width)},_update:function(){this.setPosition(L.DomUtil.getPosition(this._element).x)},_adjustX:function(e){var t=this._toValue(e)||this.getMinValue();return this._toX(this._adjustValue(t))},_adjustValue:function(e){return e=Math.max(this.getMinValue(),Math.min(this.getMaxValue(),e)),e-=this.options.rangeMin,e=Math.round(e/this.options.step)*this.options.step,e+=this.options.rangeMin,Math.round(100*e)/100},_toX:function(e){return(e-this.options.rangeMin)/this._getProjectionCoef()},_toValue:function(e){return e*this._getProjectionCoef()+this.options.rangeMin},getMinValue:function(){return this.options.minValue||this.options.rangeMin},getMaxValue:function(){return this.options.maxValue||this.options.rangeMax},setStep:function(e){this.options.step=e,this._update()},setPosition:function(e){L.DomUtil.setPosition(this._element,L.point(this._adjustX(e),0)),this.fire("positionchanged")},getPosition:function(){return L.DomUtil.getPosition(this._element).x},setValue:function(e){this.setPosition(this._toX(e))},getValue:function(){return this._adjustValue(this._toValue(this.getPosition()))}}),L.Control.TimeDimension=L.Control.extend({options:{styleNS:"leaflet-control-timecontrol",position:"bottomleft",title:"Time Control",backwardButton:!0,forwardButton:!0,playButton:!0,playReverseButton:!1,loopButton:!1,displayDate:!0,timeSlider:!0,timeSliderDragUpdate:!1,limitSliders:!1,limitMinimumRange:5,speedSlider:!0,minSpeed:.1,maxSpeed:10,speedStep:.1,timeSteps:1,autoPlay:!1,playerOptions:{transitionTime:1e3}},initialize:function(e){L.Control.prototype.initialize.call(this,e),this._dateUTC=!0,this._timeDimension=this.options.timeDimension||null},onAdd:function(e){var t;return this._map=e,!this._timeDimension&&e.timeDimension&&(this._timeDimension=e.timeDimension),this._initPlayer(),t=L.DomUtil.create("div","leaflet-bar leaflet-bar-horizontal leaflet-bar-timecontrol"),this.options.backwardButton&&(this._buttonBackward=this._createButton("Backward",t)),this.options.playReverseButton&&(this._buttonPlayReversePause=this._createButton("Play Reverse",t)),this.options.playButton&&(this._buttonPlayPause=this._createButton("Play",t)),this.options.forwardButton&&(this._buttonForward=this._createButton("Forward",t)),this.options.loopButton&&(this._buttonLoop=this._createButton("Loop",t)),this.options.displayDate&&(this._displayDate=this._createButton("Date",t)),this.options.timeSlider&&(this._sliderTime=this._createSliderTime(this.options.styleNS+" timecontrol-slider timecontrol-dateslider",t)),this.options.speedSlider&&(this._sliderSpeed=this._createSliderSpeed(this.options.styleNS+" timecontrol-slider timecontrol-speed",t)),this._steps=this.options.timeSteps||1,this._timeDimension.on("timeload",this._update,this),this._timeDimension.on("timeload",this._onPlayerStateChange,this),this._timeDimension.on("timeloading",this._onTimeLoading,this),this._timeDimension.on("limitschanged availabletimeschanged",this._onTimeLimitsChanged,this),L.DomEvent.disableClickPropagation(t),t},addTo:function(){return L.Control.prototype.addTo.apply(this,arguments),this._onPlayerStateChange(),this._onTimeLimitsChanged(),this._update(),this},onRemove:function(){this._player.off("play stop running loopchange speedchange",this._onPlayerStateChange,this),this._player.off("waiting",this._onPlayerWaiting,this),this._timeDimension.off("timeload",this._update,this),this._timeDimension.off("timeload",this._onPlayerStateChange,this),this._timeDimension.off("timeloading",this._onTimeLoading,this),this._timeDimension.off("limitschanged availabletimeschanged",this._onTimeLimitsChanged,this)},_initPlayer:function(){this._player||(this._player=this.options.player?this.options.player:new L.TimeDimension.Player(this.options.playerOptions,this._timeDimension)),this.options.autoPlay&&this._player.start(this._steps),this._player.on("play stop running loopchange speedchange",this._onPlayerStateChange,this),this._player.on("waiting",this._onPlayerWaiting,this),this._onPlayerStateChange()},_onTimeLoading:function(e){e.time==this._timeDimension.getCurrentTime()&&this._displayDate&&L.DomUtil.addClass(this._displayDate,"loading")},_onTimeLimitsChanged:function(){var e=this._timeDimension.getLowerLimitIndex(),t=this._timeDimension.getUpperLimitIndex(),n=this._timeDimension.getAvailableTimes().length-1;this._limitKnobs&&(this._limitKnobs[0].options.rangeMax=n,this._limitKnobs[1].options.rangeMax=n,this._limitKnobs[0].setValue(e||0),this._limitKnobs[1].setValue(t||n)),this._sliderTime&&(this._sliderTime.options.rangeMax=n,this._sliderTime._update())},_onPlayerWaiting:function(e){this._buttonPlayPause&&this._player.getSteps()>0&&(L.DomUtil.addClass(this._buttonPlayPause,"loading"),this._buttonPlayPause.innerHTML=this._getDisplayLoadingText(e.available,e.buffer)),this._buttonPlayReversePause&&this._player.getSteps()<0&&(L.DomUtil.addClass(this._buttonPlayReversePause,"loading"),this._buttonPlayReversePause.innerHTML=this._getDisplayLoadingText(e.available,e.buffer))},_onPlayerStateChange:function(){if(this._buttonPlayPause&&(this._player.isPlaying()&&this._player.getSteps()>0?(L.DomUtil.addClass(this._buttonPlayPause,"pause"),L.DomUtil.removeClass(this._buttonPlayPause,"play")):(L.DomUtil.removeClass(this._buttonPlayPause,"pause"),L.DomUtil.addClass(this._buttonPlayPause,"play")),this._player.isWaiting()&&this._player.getSteps()>0?L.DomUtil.addClass(this._buttonPlayPause,"loading"):(this._buttonPlayPause.innerHTML="",L.DomUtil.removeClass(this._buttonPlayPause,"loading"))),this._buttonPlayReversePause&&(this._player.isPlaying()&&this._player.getSteps()<0?L.DomUtil.addClass(this._buttonPlayReversePause,"pause"):L.DomUtil.removeClass(this._buttonPlayReversePause,"pause"),this._player.isWaiting()&&this._player.getSteps()<0?L.DomUtil.addClass(this._buttonPlayReversePause,"loading"):(this._buttonPlayReversePause.innerHTML="",L.DomUtil.removeClass(this._buttonPlayReversePause,"loading"))),this._buttonLoop&&(this._player.isLooped()?L.DomUtil.addClass(this._buttonLoop,"looped"):L.DomUtil.removeClass(this._buttonLoop,"looped")),this._sliderSpeed&&!this._draggingSpeed){var e=this._player.getTransitionTime()||1e3;e=Math.round(1e4/e)/10,this._sliderSpeed.setValue(e)}},_update:function(){if(this._timeDimension)if(this._timeDimension.getCurrentTimeIndex()>=0){var e=new Date(this._timeDimension.getCurrentTime());this._displayDate&&(L.DomUtil.removeClass(this._displayDate,"loading"),this._displayDate.innerHTML=this._getDisplayDateFormat(e)),this._sliderTime&&!this._slidingTimeSlider&&this._sliderTime.setValue(this._timeDimension.getCurrentTimeIndex())}else this._displayDate&&(this._displayDate.innerHTML=this._getDisplayNoTimeError())},_createButton:function(e,t){var n=L.DomUtil.create("a",this.options.styleNS+" timecontrol-"+e.toLowerCase(),t);return n.href="#",n.title=e,L.DomEvent.addListener(n,"click",L.DomEvent.stopPropagation).addListener(n,"click",L.DomEvent.preventDefault).addListener(n,"click",this["_button"+e.replace(/ /i,"")+"Clicked"],this),n},_createSliderTime:function(e,t){var n,i,r,s,o;return n=L.DomUtil.create("div",e,t),i=L.DomUtil.create("div","slider",n),r=this._timeDimension.getAvailableTimes().length-1,this.options.limitSliders&&(o=this._limitKnobs=this._createLimitKnobs(i)),(s=new L.UI.Knob(i,{className:"knob main",rangeMin:0,rangeMax:r})).on("dragend",function(e){var t=e.target.getValue();this._sliderTimeValueChanged(t),this._slidingTimeSlider=!1},this),s.on("drag",function(e){this._slidingTimeSlider=!0;var t=this._timeDimension.getAvailableTimes()[e.target.getValue()];if(t){var n=new Date(t);this._displayDate&&(this._displayDate.innerHTML=this._getDisplayDateFormat(n)),this.options.timeSliderDragUpdate&&this._sliderTimeValueChanged(e.target.getValue())}},this),s.on("predrag",function(){var e,t;o&&(e=o[0].getPosition(),t=o[1].getPosition(),this._newPos.x<e&&(this._newPos.x=e),this._newPos.x>t&&(this._newPos.x=t))},s),L.DomEvent.on(i,"click",function(e){if(!L.DomUtil.hasClass(e.target,"knob")){var t=L.DomEvent.getMousePosition(e.touches&&1===e.touches.length?e.touches[0]:e,i).x;o?o[0].getPosition()<=t&&t<=o[1].getPosition()&&(s.setPosition(t),this._sliderTimeValueChanged(s.getValue())):(s.setPosition(t),this._sliderTimeValueChanged(s.getValue()))}},this),s.setPosition(0),s},_createLimitKnobs:function(e){L.DomUtil.addClass(e,"has-limits");var t=this._timeDimension.getAvailableTimes().length-1,n=L.DomUtil.create("div","range",e),i=new L.UI.Knob(e,{className:"knob lower",rangeMin:0,rangeMax:t}),r=new L.UI.Knob(e,{className:"knob upper",rangeMin:0,rangeMax:t});return L.DomUtil.setPosition(n,0),i.setPosition(0),r.setPosition(t),i.on("dragend",function(e){var t=e.target.getValue();this._sliderLimitsValueChanged(t,r.getValue())},this),r.on("dragend",function(e){var t=e.target.getValue();this._sliderLimitsValueChanged(i.getValue(),t)},this),i.on("drag positionchanged",function(){L.DomUtil.setPosition(n,L.point(i.getPosition(),0)),n.style.width=r.getPosition()-i.getPosition()+"px"},this),r.on("drag positionchanged",function(){n.style.width=r.getPosition()-i.getPosition()+"px"},this),r.on("predrag",function(){var e=i._toX(i.getValue()+this.options.limitMinimumRange);r._newPos.x<=e&&(r._newPos.x=e)},this),i.on("predrag",function(){var e=r._toX(r.getValue()-this.options.limitMinimumRange);i._newPos.x>=e&&(i._newPos.x=e)},this),i.on("dblclick",function(){this._timeDimension.setLowerLimitIndex(0)},this),r.on("dblclick",function(){this._timeDimension.setUpperLimitIndex(this._timeDimension.getAvailableTimes().length-1)},this),[i,r]},_createSliderSpeed:function(e,t){var n=L.DomUtil.create("div",e,t),i=L.DomUtil.create("span","speed",n),r=L.DomUtil.create("div","slider",n),s=Math.round(1e4/(this._player.getTransitionTime()||1e3))/10;i.innerHTML=this._getDisplaySpeed(s);var o=new L.UI.Knob(r,{step:this.options.speedStep,rangeMin:this.options.minSpeed,rangeMax:this.options.maxSpeed});return o.on("dragend",function(e){var t=e.target.getValue();this._draggingSpeed=!1,i.innerHTML=this._getDisplaySpeed(t),this._sliderSpeedValueChanged(t)},this),o.on("drag",function(e){this._draggingSpeed=!0,i.innerHTML=this._getDisplaySpeed(e.target.getValue())},this),o.on("positionchanged",function(e){i.innerHTML=this._getDisplaySpeed(e.target.getValue())},this),L.DomEvent.on(r,"click",function(e){if(e.target!==o._element){var t=L.DomEvent.getMousePosition(e.touches&&1===e.touches.length?e.touches[0]:e,r).x;o.setPosition(t),i.innerHTML=this._getDisplaySpeed(o.getValue()),this._sliderSpeedValueChanged(o.getValue())}},this),o},_buttonBackwardClicked:function(){this._timeDimension.previousTime(this._steps)},_buttonForwardClicked:function(){this._timeDimension.nextTime(this._steps)},_buttonLoopClicked:function(){this._player.setLooped(!this._player.isLooped())},_buttonPlayClicked:function(){this._player.isPlaying()?this._player.stop():this._player.start(this._steps)},_buttonPlayReverseClicked:function(){this._player.isPlaying()?this._player.stop():this._player.start(-1*this._steps)},_buttonDateClicked:function(){this._toggleDateUTC()},_sliderTimeValueChanged:function(e){this._timeDimension.setCurrentTimeIndex(e)},_sliderLimitsValueChanged:function(e,t){this._timeDimension.setLowerLimitIndex(e),this._timeDimension.setUpperLimitIndex(t)},_sliderSpeedValueChanged:function(e){this._player.setTransitionTime(1e3/e)},_toggleDateUTC:function(){this._dateUTC?(L.DomUtil.removeClass(this._displayDate,"utc"),this._displayDate.title="Local Time"):(L.DomUtil.addClass(this._displayDate,"utc"),this._displayDate.title="UTC Time"),this._dateUTC=!this._dateUTC,this._update()},_getDisplayDateFormat:function(e){return this._dateUTC?e.toISOString():e.toLocaleString()},_getDisplaySpeed:function(e){return e+"fps"},_getDisplayLoadingText:function(e,t){return"<span>"+Math.floor(e/t*100)+"%</span>"},_getDisplayNoTimeError:function(){return"Time not available"}}),L.Map.addInitHook(function(){this.options.timeDimensionControl&&(this.timeDimensionControl=L.control.timeDimension(this.options.timeDimensionControlOptions||{}),this.addControl(this.timeDimensionControl))}),L.control.timeDimension=function(e){return new L.Control.TimeDimension(e)}},"jfS+":function(e,t,n){"use strict";var i=n("endd");function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},"pU+3":function(e,t,n){!function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)};function r(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");var t=[];for(var r in e)n(e,r)&&i(e,r)&&t.push([r,e[r]]);return t}var s={TEST:{rpmUrl:"sit-rpm.geoplatform.us",sites:{"localhost:8081":2,"localhost:8092":6,"localhost:8082":13,"localhost:8083":7,"localhost:8085":10,"localhost:4200":11,localhost:11}},SIT:{rpmUrl:"sit-rpm.geoplatform.us",sites:{"sit-viewer.geoplatform.us":3,"sit-maps.geoplatform.us":4,"sit-oe.geoplatform.us":5,"sit-data.geoplatform.us":10,"sit.geoplatform.us":11,"sit-marketplace.geoplatform.us":12,"sit-dashboard.geoplatform.us":13}},STG:{rpmUrl:"stg-rpm.geoplatform.gov",sites:{"stg.geoplatform.gov":1,"stg-oe.geoplatform.gov":2,"stg-maps.geoplatform.gov":3,"stg-viewer.geoplatform.gov":4,"stg-data.geoplatform.gov":6,"stg-dashboard.geoplatform.gov":5}},PRD:{rpmUrl:"rpm.geoplatform.gov",sites:{"www.geoplatform.gov":1,"oe.geoplatform.gov":2,"maps.geoplatform.gov":3,"viewer.geoplatform.gov":4,"data.geoplatform.gov":8,"communities.geoplatform.gov":9,"dashboard.geoplatform.gov":10}}};function o(e){return void 0===e||"undefined"===e}function a(e,t){if(o(e)||o(t)){var n=function(e){return function(e){return r(e).reduce(function(e,t){return r(t[1].sites).map(function(n){e[n[0]]={siteId:n[1],rpmUrl:t[1].rpmUrl}}),e},{})}(s)[e]||(console.error("No Matomo server configuration was found for url: "+e+"\n Your actions will not be tracked by Matomo."),{siteId:0,rpmUrl:"sit-rpm.geoplatform.us"})}(window.location.host);e=n.rpmUrl,t=n.siteId}return window._paq||function(e,t){window._paq=window._paq||[],window._paq.push(["setDocumentTitle",document.title]),window._paq.push(["trackPageView"]),window._paq.push(["enableLinkTracking"]),window.location.host.match("localhost")?window._paq.push(["setCookieDomain","*.localhost"]):window._paq.push(["setCookieDomain","*."+window.location.host]),function(){var n="//"+e+"/";window._paq.push(["setTrackerUrl",n+"piwik.php"]),window._paq.push(["setSiteId","number"==typeof t?t:parseInt(t)]);var i=document,r=i.createElement("script"),s=i.getElementsByTagName("script")[0];r.type="text/javascript",r.async=!0,r.defer=!0,r.src=n+"piwik.js",s.parentNode.insertBefore(r,s)}(),window}(e,t),{setUserId:function(e){e&&window._paq.push(["setUserId",e])},logPageView:function(e){var t=""+window.location.hash.substr(1);window._paq.push(["setCustomUrl","/"+t]),window._paq.push(["setDocumentTitle",e]),window._paq.push(["deleteCustomVariables","page"]),window._paq.push(["setGenerationTimeMs",0]),window._paq.push(["trackPageView"])},logEvent:function(e,t,n){window._paq.push(["trackEvent",e,t,n])},logSearch:function(e,t){window._paq.push(["trackSiteSearch",e,!1,t||!1])}}}function l(e){var t;return function(e){return t=window,n=document,i="script",t.GoogleAnalyticsObject="ga",t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,r=n.createElement(i),s=n.getElementsByTagName(i)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(r,s),window.ga("create",e,"auto"),window.ga("send","pageview"),window.ga;var t,n,i,r,s}(e||((t=window.location.host).match("sit[-.]|localhost[:]?")?"UA-42040723-1":t.match("stg[-.]")?"UA-42040723-1":"UA-42040723-2")),{setUserId:function(e){e&&ga("set","userId",e)},logPageView:function(e){ga("set","page","title"),ga("send","pageview")},logEvent:function(e,t,n){ga("send","event",e,t,n)},logSearch:function(e,t){ga("event","search",e)}}}var u=["Created","Deleted","Edited","Viewed","Displayed","Accessed","Exported","Added","Removed"],h={Application:{ualType:"Application",actions:[]},Community:{ualType:"Community",actions:[]},Concept:{ualType:"skos:Concept",actions:[]},"Concept Scheme":{ualType:"skos:ConceptScheme",actions:[]},Contact:{ualType:"vcard:VCard",actions:[]},Dataset:{ualType:"dcat:Dataset",actions:[]},Gallery:{ualType:"Gallery",actions:[]},Layer:{ualType:"Layer",actions:["Moved"]},Map:{ualType:"Map",actions:[]},Organization:{ualType:"org:Organization",actions:[]},Person:{ualType:"foaf:Person",actions:[]},"Image Product":{ualType:"eo:Product",actions:[]},"Rights Statement":{ualType:"dct:RightsStatement",actions:[]},Service:{ualType:"regp:Service",actions:[]},Standard:{ualType:"dct:Standard",actions:[]},Topic:{ualType:"Topic",actions:[]},Website:{ualType:"WebSite",actions:[]},"Unknown Category":{ualType:"Unknown Category",actions:[]}},c=r(h).reduce(function(e,t){var n=t[0];return e[t[1].ualType||n]=n,e},{});function d(e,t){return!(!h[r=e]&&!c[r])&&(i=h[e]||h[(n=e,c[n]||n)],u.concat(i?i.actions:[])).includes(t);var n,i,r}function p(e,n,i){return s=[a(e,n),l(i)],o=s.map(function(e){return t=e,{setUserId:function(e){t.setUserId(e)},logPageView:function(e){t.logPageView(e)},logSearch:function(e,n){t.logSearch.apply(null,arguments)},logEvent:function(e,n){var i,r;(d(i=e,r=n)||(console.error('Invalid Action "'+r+'" Provided for Category "'+i+'"'),0))&&t.logEvent.apply(null,arguments)}};var t}),{setUserId:function(e){o.map(function(t){return t.setUserId(e)})},logPageView:function(e){o.map(function(t){return t.logPageView(e)})},logEvent:function(e,t,n){o.map(function(i){return i.logEvent(e,t,n)})},logSearch:function(e,n){var i="object"===(void 0===e?"undefined":t(e))?"?"+r(e).map(function(e){var n;return e[0]+"="+(n=function(e){return Array.isArray(e)?e.join(","):"object"==(void 0===e?"undefined":t(e))?JSON.stringify(e):e}(e[1]),Array.isArray(n)?n:[n]).join(",")}).join("&"):e,s=window&&window.location?window.location.search:null;o.map(function(e){return e.logSearch(i||s,n)})}};var s,o}window&&window.angular&&1===window.angular.version.major&&window.angular.module("gp-rpm",[]).service("RPMService",function(){return p}),window.RPMService=p,e.RPMServiceFactory=function(e,t,n){return p(e,t,n)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},r8II:function(e,t,n){"use strict";t.decode=t.parse=n("YcCt"),t.encode=t.stringify=n("6MUB")},tQ2B:function(e,t,n){"use strict";var i=n("xTJ+"),r=n("Rn+g"),s=n("MLWZ"),o=n("w0Vi"),a=n("OTTw"),l=n("LYNF");e.exports=function(e){return new Promise(function(t,u){var h=e.data,c=e.headers;i.isFormData(h)&&delete c["Content-Type"];var d=new XMLHttpRequest;if(e.auth&&(c.Authorization="Basic "+btoa((e.auth.username||"")+":"+(e.auth.password||""))),d.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null;r(t,u,{data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d}),d=null}},d.onabort=function(){d&&(u(l("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){u(l("Network Error",e,null,d)),d=null},d.ontimeout=function(){u(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},i.isStandardBrowserEnv()){var p=n("eqyj"),f=(e.withCredentials||a(e.url))&&e.xsrfCookieName?p.read(e.xsrfCookieName):void 0;f&&(c[e.xsrfHeaderName]=f)}if("setRequestHeader"in d&&i.forEach(c,function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete c[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(m){if("json"!==e.responseType)throw m}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),u(e),d=null)}),void 0===h&&(h=null),d.send(h)})}},vDqi:function(e,t,n){e.exports=n("zuR4")},w0Vi:function(e,t,n){"use strict";var i=n("xTJ+"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e?(i.forEach(e.split("\n"),function(e){if(s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t){if(o[t]&&r.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}}),o):o}},x86X:function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},xAGQ:function(e,t,n){"use strict";var i=n("xTJ+");e.exports=function(e,t,n){return i.forEach(n,function(n){e=n(e,t)}),e}},"xTJ+":function(e,t,n){"use strict";var i=n("HSsa"),r=n("x86X"),s=Object.prototype.toString;function o(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===s.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:r,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:l,isStream:function(e){return a(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,i){t[i]="object"==typeof t[i]&&"object"==typeof n?e(t[i],n):n}for(var i=0,r=arguments.length;i<r;i++)u(arguments[i],n);return t},deepMerge:function e(){var t={};function n(n,i){t[i]="object"==typeof t[i]&&"object"==typeof n?e(t[i],n):"object"==typeof n?e({},n):n}for(var i=0,r=arguments.length;i<r;i++)u(arguments[i],n);return t},extend:function(e,t,n){return u(t,function(t,r){e[r]=n&&"function"==typeof t?i(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},yK9s:function(e,t,n){"use strict";var i=n("xTJ+");e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},zUnb:function(e,t,n){"use strict";function i(e){return"function"==typeof e}n.r(t);let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){r=e},get useDeprecatedSynchronousErrorHandling(){return r}};function o(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},l=Array.isArray||(e=>e&&"number"==typeof e.length);function u(e){return null!==e&&"object"==typeof e}function h(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}h.prototype=Object.create(Error.prototype);const c=h;let d=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(i(r))try{r.call(this)}catch(o){t=o instanceof c?p(o.errors):[o]}if(l(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(u(n))try{n.unsubscribe()}catch(o){t=t||[],o instanceof c?t=t.concat(p(o.errors)):t.push(o)}}}if(t)throw new c(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;(n=new e)._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function p(e){return e.reduce((e,t)=>e.concat(t instanceof c?t.errors:t),[])}const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class m extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof m?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,n)}}[f](){return this}static create(e,t,n){const i=new m(e,t,n);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class g extends m{constructor(e,t,n,r){let s;super(),this._parentSubscriber=e;let o=this;i(t)?s=t:t&&(s=t.next,n=t.error,r=t.complete,t!==a&&(i((o=Object.create(t)).unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(o(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const _="function"==typeof Symbol&&Symbol.observable||"@@observable";let y=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:i}=this,r=function(e,t,n){if(e){if(e instanceof m)return e;if(e[f])return e[f]()}return e||t||n?new m(e,t,n):new m(a)}(e,t,n);if(r.add(i?i.call(r,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),s.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof m?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=v(t))((t,n)=>{let i;i=this.subscribe(t=>{try{e(t)}catch(r){n(r),i&&i.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[_](){return this}pipe(...e){return 0===e.length?this:((t=e)?1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)}:function(){})(this);var t}toPromise(e){return new(e=v(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function v(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function b(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}b.prototype=Object.create(Error.prototype);const w=b;class x extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class T extends m{constructor(e){super(e),this.destination=e}}let C=(()=>{class e extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new T(this)}lift(e){const t=new L(this,this);return t.operator=e,t}next(e){if(this.closed)throw new w;if(!this.isStopped){const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].next(e)}}error(e){if(this.closed)throw new w;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].error(e);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let i=0;i<t;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new w;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new w;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new x(this,e))}asObservable(){const e=new y;return e.source=this,e}}return e.create=(e,t)=>new L(e,t),e})();class L extends C{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function S(e){return e&&"function"==typeof e.schedule}class E extends m{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const P=e=>t=>{for(let n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()};function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const A=I(),k=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function M(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const O=e=>{if(e&&"function"==typeof e[_])return(e=>t=>{const n=e[_]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(e);if(k(e))return P(e);if(M(e))return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t))(e);if(e&&"function"==typeof e[A])return(e=>t=>{const n=e[A]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(e);{const t=u(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};class D extends m{notifyNext(e,t,n,i,r){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function R(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new N(e,t))}}class N{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new F(e,this.project,this.thisArg))}}class F extends m{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function B(e,t){return new y(n=>{const i=new d;let r=0;return i.add(t.schedule(function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function U(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[_]}(e))return function(e,t){return new y(n=>{const i=new d;return i.add(t.schedule(()=>{const r=e[_]();i.add(r.subscribe({next(e){i.add(t.schedule(()=>n.next(e)))},error(e){i.add(t.schedule(()=>n.error(e)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i})}(e,t);if(M(e))return function(e,t){return new y(n=>{const i=new d;return i.add(t.schedule(()=>e.then(e=>{i.add(t.schedule(()=>{n.next(e),i.add(t.schedule(()=>n.complete()))}))},e=>{i.add(t.schedule(()=>n.error(e)))}))),i})}(e,t);if(k(e))return B(e,t);if(function(e){return e&&"function"==typeof e[A]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new y(n=>{const i=new d;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(()=>{r=e[A](),i.add(t.schedule(function(){if(n.closed)return;let e,t;try{const s=r.next();e=s.value,t=s.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof y?e:new y(O(e))}function j(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(j((n,i)=>U(e(n,i)).pipe(R((e,r)=>t(n,e,i,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new z(e,n)))}class z{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new V(e,this.project,this.concurrent))}}class V extends D{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const i=new E(this,void 0,void 0);this.destination.add(i),function(e,t,n,i,r=new E(e,n,i)){r.closed||(t instanceof y?t.subscribe(r):O(t)(r))}(this,e,t,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,i,r){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function q(e){return e}function G(e,t){return t?B(e,t):new y(P(e))}function Z(){return function(e){return e.lift(new H(e))}}class H{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const i=new W(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class W extends m{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}const $=class extends y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new Y(this.getSubject(),this))),e.closed&&(this._connection=null,e=d.EMPTY)),e}refCount(){return Z()(this)}}.prototype,J={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:$._subscribe},_isComplete:{value:$._isComplete,writable:!0},getSubject:{value:$.getSubject},connect:{value:$.connect},refCount:{value:$.refCount}};class Y extends T{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function K(){return new C}const Q="__parameters__";function X(e,t,n){const i=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function r(...e){if(this instanceof r)return i.apply(this,e),this;const t=new r(...e);return n.annotation=t,n;function n(e,n,i){const r=e.hasOwnProperty(Q)?e[Q]:Object.defineProperty(e,Q,{value:[]})[Q];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(t),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r}const ee=X("Inject",e=>({token:e})),te=X("Optional"),ne=X("Self"),ie=X("SkipSelf");var re=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function se(e){for(let t in e)if(e[t]===se)return t;throw Error("Could not find renamed property on target object.")}function oe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ae(e){const t=e[le];return t&&t.token===e?t:null}const le=se({ngInjectableDef:se});function ue(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ue).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}const he=se({__forward_ref__:se});function ce(e){return e.__forward_ref__=ce,e.toString=function(){return ue(this())},e}function de(e){const t=e;return"function"==typeof t&&t.hasOwnProperty(he)&&t.__forward_ref__===ce?t():e}const pe="undefined"!=typeof globalThis&&globalThis,fe="undefined"!=typeof window&&window,me="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ge="undefined"!=typeof global&&global,_e=pe||ge||fe||me;class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.ngInjectableDef=oe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ve=new ye("INJECTOR",-1),be=new Object,we="ngTempTokenPath",xe="ngTokenPath",Te=/\n/gm,Ce="\u0275",Le="__source",Se=se({provide:String,useValue:se});let Ee,Pe=void 0;function Ie(e){const t=Pe;return Pe=e,t}class Ae{get(e,t=be){if(t===be){const t=new Error(`NullInjectorError: No provider for ${ue(e)}!`);throw t.name="NullInjectorError",t}return t}}function ke(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Ce?e.substr(2):e;let r=ue(t);if(t instanceof Array)r=t.map(ue).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push(n+":"+("string"==typeof i?JSON.stringify(i):ue(i)))}r=`{${e.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(Te,"\n  ")}`}const Me=new ye("The presence of this token marks an injector as being the root injector."),Oe=function(e,t,n){return new je(e,t,n)};let De=(()=>{class e{static create(e,t){return Array.isArray(e)?Oe(e,t,""):Oe(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=be,e.NULL=new Ae,e.ngInjectableDef=oe({token:e,providedIn:"any",factory:()=>(function(e,t=re.Default){return(Ee||function(e,t=re.Default){if(void 0===Pe)throw new Error("inject() must be called from an injection context");return null===Pe?function(e,t,n){const i=ae(e);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&re.Optional)return null;throw new Error(`Injector: NOT_FOUND [${ue(e)}]`)}(e,0,t):Pe.get(e,t&re.Optional?null:void 0,t)})(e,t)})(ve)}),e.__NG_ELEMENT_ID__=-1,e})();const Re=function(e){return e},Ne=[],Fe=Re,Be=function(){return Array.prototype.slice.call(arguments)},Ue="\u0275";class je{constructor(e,t=De.NULL,n=null){this.parent=t,this.source=n;const i=this._records=new Map;i.set(De,{token:De,fn:Re,deps:Ne,value:this,useNew:!1}),i.set(ve,{token:ve,fn:Re,deps:Ne,value:this,useNew:!1}),function e(t,n){if(n)if((n=de(n))instanceof Array)for(let i=0;i<n.length;i++)e(t,n[i]);else{if("function"==typeof n)throw Ve("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ve("Unexpected provider",n);{let e=de(n.provide);const i=function(e){const t=function(e){let t=Ne;const n=e.deps;if(n&&n.length){t=[];for(let e=0;e<n.length;e++){let i=6,r=de(n[e]);if(r instanceof Array)for(let e=0,t=r;e<t.length;e++){const n=t[e];n instanceof te||n==te?i|=1:n instanceof ie||n==ie?i&=-3:n instanceof ne||n==ne?i&=-5:r=n instanceof ee?n.token:de(n)}t.push({token:r,options:i})}}else if(e.useExisting)t=[{token:de(e.useExisting),options:6}];else if(!(n||Se in e))throw Ve("'deps' required",e);return t}(e);let n=Re,i=Ne,r=!1,s=de(e.provide);if(Se in e)i=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)r=!0,n=de(e.useClass);else{if("function"!=typeof s)throw Ve("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);r=!0,n=s}return{deps:t,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){let i=t.get(e);if(i){if(i.fn!==Be)throw ze(e)}else t.set(e,i={token:n.provide,deps:[],useNew:!1,fn:Be,value:Ne});i.deps.push({token:e=n,options:6})}const r=t.get(e);if(r&&r.fn==Be)throw ze(e);t.set(e,i)}}}(i,e)}get(e,t,n=re.Default){const i=this._records.get(e);try{return function e(t,n,i,r,s,o){try{return function(t,n,i,r,s,o){let a;if(!n||o&re.SkipSelf)o&re.Self||(a=r.get(t,s,re.Default));else{if((a=n.value)==Fe)throw Error(Ue+"Circular dependency");if(a===Ne){n.value=Fe;let t=void 0,s=n.useNew,o=n.fn,l=n.deps,u=Ne;if(l.length){u=[];for(let t=0;t<l.length;t++){const n=l[t],s=n.options,o=2&s?i.get(n.token):void 0;u.push(e(n.token,o,i,o||4&s?r:De.NULL,1&s?null:De.THROW_IF_NOT_FOUND,re.Default))}}n.value=a=s?new o(...u):o.apply(t,u)}}return a}(t,n,i,r,s,o)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[we]=a[we]||[]).unshift(t),n&&n.value==Fe&&(n.value=Ne),a}}(e,i,this._records,this.parent,t,n)}catch(r){return function(e,t,n,i){const r=e[we];throw t[Le]&&r.unshift(t[Le]),e.message=ke("\n"+e.message,r,"StaticInjectorError",i),e[xe]=r,e[we]=null,e}(r,e,0,this.source)}}toString(){const e=[];return this._records.forEach((t,n)=>e.push(ue(n))),`StaticInjector[${e.join(", ")}]`}}function ze(e){return Ve("Cannot mix multi providers and regular providers",e)}function Ve(e,t){return new Error(ke(e,t,"StaticInjectorError"))}const qe="ngDebugContext",Ge="ngOriginalError",Ze="ngErrorLogger",He=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),We=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_e))();let $e=!0,Je=!1;function Ye(){return Je=!0,$e}class Ke{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(i){return null}const t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);const n=t.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const n=t.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Qe=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Xe=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function et(e){return(e=String(e)).match(Qe)||e.match(Xe)?e:(Ye()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function tt(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function nt(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const it=tt("area,br,col,hr,img,wbr"),rt=tt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),st=tt("rp,rt"),ot=nt(st,rt),at=nt(it,nt(rt,tt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nt(st,tt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ot),lt=tt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ut=tt("srcset"),ht=nt(lt,ut,tt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ct=tt("script,style,template");class dt{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!at.hasOwnProperty(t))return this.sanitizedSomething=!0,!ct.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,s=t.toLowerCase();if(!ht.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;lt[s]&&(o=et(o)),ut[s]&&(i=o,o=(i=String(i)).split(",").map(e=>et(e.trim())).join(", ")),this.buf.push(" ",t,'="',mt(o),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();at.hasOwnProperty(t)&&!it.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(mt(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const pt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ft=/([^\#-~ |!])/g;function mt(e){return e.replace(/&/g,"&amp;").replace(pt,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(ft,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gt;function _t(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const yt=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();class vt{}const bt=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),wt=/^url\(([^)]+)\)$/;function xt(e){return e[qe]}function Tt(e){return e[Ge]}function Ct(e,...t){e.error(...t)}class Lt{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e[Ze]||Ct}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?xt(e)?xt(e):this._findContext(Tt(e)):null}_findOriginalError(e){let t=Tt(e);for(;t&&Tt(t);)t=Tt(t);return t}}const St=/([A-Z])/g;function Et(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}let Pt=null;function It(){if(!Pt){const e=_e.Symbol;if(e&&e.iterator)Pt=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Pt=n)}}}return Pt}function At(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function kt(e,t){const n=Ot(e),i=Ot(t);if(n&&i)return function(e,t,n){const i=e[It()](),r=t[It()]();for(;;){const e=i.next(),t=r.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,kt);{const r=e&&("object"==typeof e||"function"==typeof e),s=t&&("object"==typeof t||"function"==typeof t);return!(n||!r||i||!s)||At(e,t)}}class Mt{constructor(e){this.wrapped=e}static wrap(e){return new Mt(e)}static unwrap(e){return Mt.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Mt}}function Ot(e){return!!Dt(e)&&(Array.isArray(e)||!(e instanceof Map)&&It()in e)}function Dt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Rt(e){return!!e&&"function"==typeof e.then}function Nt(e){return!!e&&"function"==typeof e.subscribe}class Ft{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}class Bt{}class Ut{}function jt(e){const t=Error(`No component factory found for ${ue(e)}. Did you add it to @NgModule.entryComponents?`);return t[zt]=e,t}const zt="ngComponent";class Vt{resolveComponentFactory(e){throw jt(e)}}let qt=(()=>{class e{}return e.NULL=new Vt,e})();class Gt{constructor(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(let i=0;i<e.length;i++){const t=e[i];this._factories.set(t.componentType,t)}}resolveComponentFactory(e){let t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw jt(e);return new Zt(t,this._ngModule)}}class Zt extends Ut{constructor(e,t){super(),this.factory=e,this.ngModule=t,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,t,n,i){return this.factory.create(e,t,n,i||this.ngModule)}}class Ht{}class Wt{}function $t(...e){}let Jt=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>Yt(e),e})();const Yt=$t;class Kt{}class Qt{}const Xt=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let en=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>tn(),e})();const tn=$t;class nn{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rn=new nn("8.1.2");class sn{constructor(){}supports(e){return Ot(e)}create(e){return new an(e)}}const on=(e,t)=>t;class an{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||on}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,r=null;for(;t||n;){const s=!n||t&&t.currentIndex<cn(n,i,r)?t:n,o=cn(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{r||(r=[]);const e=o-i,t=a-i;if(e!=t){for(let n=0;n<e;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;t<=s&&s<e&&(r[n]=i+1)}r[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ot(e))throw new Error(`Error trying to diff '${ue(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,i,r=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)i=this._trackByFn(t,n=e[t]),null!==r&&At(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,t)),At(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,t),s=!0),r=r._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[It()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(e,e=>{i=this._trackByFn(t,e),null!==r&&At(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,e,i,t)),At(r.item,e)||this._addIdentityChange(r,e)):(r=this._mismatch(r,e,i,t),s=!0),r=r._next,t++}),this.length=t;return this._truncate(r),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(At(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(At(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):e=this._addAfter(new ln(t,n),r,i),e}_verifyReinsertion(e,t,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new hn),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hn),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ln{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class un{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&At(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class hn{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new un,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cn(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class dn{constructor(){}supports(e){return e instanceof Map||Dt(e)}create(){return new pn}}class pn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Dt(e)))throw new Error(`Error trying to diff '${ue(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new fn(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){At(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class fn{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let mn=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ie,new te]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.ngInjectableDef=oe({token:e,providedIn:"root",factory:()=>new e([new sn])}),e})(),gn=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ie,new te]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.ngInjectableDef=oe({token:e,providedIn:"root",factory:()=>new e([new dn])}),e})(),_n=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>yn(),e})();const yn=(...e)=>{},vn=[new dn],bn=new mn([new sn]),wn=new gn(vn);let xn=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Tn(e,Jt),e})();const Tn=$t;let Cn=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ln(e,Jt),e})();const Ln=$t;function Sn(e,t,n,i){let r=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${t}'. Current value: '${n}'.`;return i&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){const n=new Error(e);return En(n,t),n}(r,e)}function En(e,t){e[qe]=t,e[Ze]=t.logError.bind(t)}function Pn(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}function In(e,t,n){const i=e.state,r=1792&i;return r===t?(e.state=-1793&i|n,e.initIndex=-1,!0):r===n}function An(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function kn(e,t){return e.nodes[t]}function Mn(e,t){return e.nodes[t]}function On(e,t){return e.nodes[t]}function Dn(e,t){return e.nodes[t]}function Rn(e,t){return e.nodes[t]}const Nn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Fn=()=>{},Bn=new Map;function Un(e){let t=Bn.get(e);return t||(t=ue(e)+"_"+Bn.size,Bn.set(e,t)),t}const jn="$$undefined",zn="$$empty";function Vn(e){return{id:jn,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let qn=0;function Gn(e,t,n,i){return!(!(2&e.state)&&At(e.oldValues[t.bindingIndex+n],i))}function Zn(e,t,n,i){return!!Gn(e,t,n,i)&&(e.oldValues[t.bindingIndex+n]=i,!0)}function Hn(e,t,n,i){const r=e.oldValues[t.bindingIndex+n];if(1&e.state||!kt(r,i)){const s=t.bindings[n].name;throw Sn(Nn.createDebugContext(e,t.nodeIndex),`${s}: ${r}`,`${s}: ${i}`,0!=(1&e.state))}}function Wn(e){let t=e;for(;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function $n(e,t){let n=e;for(;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function Jn(e,t,n,i){try{return Wn(33554432&e.def.nodes[t].flags?Mn(e,t).componentView:e),Nn.handleEvent(e,t,n,i)}catch(r){e.root.errorHandler.handleError(r)}}function Yn(e){return e.parent?Mn(e.parent,e.parentNodeDef.nodeIndex):null}function Kn(e){return e.parent?e.parentNodeDef.parent:null}function Qn(e,t){switch(201347067&t.flags){case 1:return Mn(e,t.nodeIndex).renderElement;case 2:return kn(e,t.nodeIndex).renderText}}function Xn(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function ei(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function ti(e){const t={};let n=0;const i={};return e&&e.forEach(([e,r])=>{"number"==typeof e?(t[e]=r,n|=function(e){return 1<<e%32}(e)):i[e]=r}),{matchedQueries:t,references:i,matchedQueryIds:n}}function ni(e,t){return e.map(e=>{let n,i;return Array.isArray(e)?[i,n]=e:(i=0,n=e),n&&("function"==typeof n||"object"==typeof n)&&t&&Object.defineProperty(n,Le,{value:t,configurable:!0}),{flags:i,token:n,tokenKey:Un(n)}})}function ii(e,t,n){let i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===He.Native?Mn(e,n.renderParent.nodeIndex).renderElement:void 0:t}const ri=new WeakMap;function si(e){let t=ri.get(e);return t||((t=e(()=>Fn)).factory=e,ri.set(e,t)),t}function oi(e,t,n,i,r){3===t&&(n=e.renderer.parentNode(Qn(e,e.def.lastRenderRootNode))),ai(e,t,0,e.def.nodes.length-1,n,i,r)}function ai(e,t,n,i,r,s,o){for(let a=n;a<=i;a++){const n=e.def.nodes[a];11&n.flags&&ui(e,n,t,r,s,o),a+=n.childCount}}function li(e,t,n,i,r,s){let o=e;for(;o&&!Xn(o);)o=o.parent;const a=o.parent,l=Kn(o),u=l.nodeIndex+l.childCount;for(let h=l.nodeIndex+1;h<=u;h++){const e=a.def.nodes[h];e.ngContentIndex===t&&ui(a,e,n,i,r,s),h+=e.childCount}if(!a.parent){const o=e.root.projectableNodes[t];if(o)for(let t=0;t<o.length;t++)hi(e,o[t],n,i,r,s)}}function ui(e,t,n,i,r,s){if(8&t.flags)li(e,t.ngContent.index,n,i,r,s);else{const o=Qn(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&hi(e,o,n,i,r,s),32&t.bindingFlags&&hi(Mn(e,t.nodeIndex).componentView,o,n,i,r,s)):hi(e,o,n,i,r,s),16777216&t.flags){const o=Mn(e,t.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<o.length;e++)oi(o[e],n,i,r,s)}1&t.flags&&!t.element.name&&ai(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,i,r,s)}}function hi(e,t,n,i,r,s){const o=e.renderer;switch(n){case 1:o.appendChild(i,t);break;case 2:o.insertBefore(i,t,r);break;case 3:o.removeChild(i,t);break;case 0:s.push(t)}}const ci=/^:([^:]+):(.+)$/;function di(e){if(":"===e[0]){const t=e.match(ci);return[t[1],t[2]]}return["",e]}function pi(e){let t=0;for(let n=0;n<e.length;n++)t|=e[n].flags;return t}function fi(e,t,n,i,r,s,o,a,l,u,h,c,d,p,f,m,g,_,y,v){switch(e){case 1:return t+mi(n)+i;case 2:return t+mi(n)+i+mi(r)+s;case 3:return t+mi(n)+i+mi(r)+s+mi(o)+a;case 4:return t+mi(n)+i+mi(r)+s+mi(o)+a+mi(l)+u;case 5:return t+mi(n)+i+mi(r)+s+mi(o)+a+mi(l)+u+mi(h)+c;case 6:return t+mi(n)+i+mi(r)+s+mi(o)+a+mi(l)+u+mi(h)+c+mi(d)+p;case 7:return t+mi(n)+i+mi(r)+s+mi(o)+a+mi(l)+u+mi(h)+c+mi(d)+p+mi(f)+m;case 8:return t+mi(n)+i+mi(r)+s+mi(o)+a+mi(l)+u+mi(h)+c+mi(d)+p+mi(f)+m+mi(g)+_;case 9:return t+mi(n)+i+mi(r)+s+mi(o)+a+mi(l)+u+mi(h)+c+mi(d)+p+mi(f)+m+mi(g)+_+mi(y)+v;default:throw new Error("Does not support more than 9 expressions")}}function mi(e){return null!=e?e.toString():""}const gi=new Object,_i=Un(De),yi=Un(ve),vi=Un(Ht);function bi(e,t,n,i){return n=de(n),{index:-1,deps:ni(i,ue(t)),flags:e,token:t,value:n}}function wi(e,t,n=De.THROW_IF_NOT_FOUND){const i=Ie(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);const o=t.tokenKey;switch(o){case _i:case yi:case vi:return e}const a=e._def.providersByKey[o];let l;if(a){let t=e._providers[a.index];return void 0===t&&(t=e._providers[a.index]=xi(e,a)),t===gi?void 0:t}if((l=ae(t.token))&&(r=e,null!=(s=l).providedIn&&(function(e,t){return e._def.modules.indexOf(s.providedIn)>-1}(r)||"root"===s.providedIn&&r._def.isRoot))){const n=e._providers.length;return e._def.providers[n]=e._def.providersByKey[t.tokenKey]={flags:5120,value:l.factory,deps:[],index:n,token:t.token},e._providers[n]=gi,e._providers[n]=xi(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{Ie(i)}var r,s}function xi(e,t){let n;switch(201347067&t.flags){case 512:n=function(e,t,n){const i=n.length;switch(i){case 0:return new t;case 1:return new t(wi(e,n[0]));case 2:return new t(wi(e,n[0]),wi(e,n[1]));case 3:return new t(wi(e,n[0]),wi(e,n[1]),wi(e,n[2]));default:const r=new Array(i);for(let t=0;t<i;t++)r[t]=wi(e,n[t]);return new t(...r)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){const i=n.length;switch(i){case 0:return t();case 1:return t(wi(e,n[0]));case 2:return t(wi(e,n[0]),wi(e,n[1]));case 3:return t(wi(e,n[0]),wi(e,n[1]),wi(e,n[2]));default:const r=Array(i);for(let t=0;t<i;t++)r[t]=wi(e,n[t]);return t(...r)}}(e,t.value,t.deps);break;case 2048:n=wi(e,t.deps[0]);break;case 256:n=t.value}return n===gi||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?gi:n}function Ti(e,t){const n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;const i=n[t];return i.viewContainerParent=null,Ei(n,t),Nn.dirtyParentQueries(i),Li(i),i}function Ci(e,t,n){const i=t?Qn(t,t.def.lastRenderRootNode):e.renderElement,r=n.renderer.parentNode(i),s=n.renderer.nextSibling(i);oi(n,2,r,s,void 0)}function Li(e){oi(e,3,null,null,void 0)}function Si(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ei(e,t){t>=e.length-1?e.pop():e.splice(t,1)}const Pi=new Object;function Ii(e,t,n,i,r,s){return new Ai(e,t,n,i,r,s)}class Ai extends Ut{constructor(e,t,n,i,r,s){super(),this.selector=e,this.componentType=t,this._inputs=i,this._outputs=r,this.ngContentSelectors=s,this.viewDefFactory=n}get inputs(){const e=[],t=this._inputs;for(let n in t)e.push({propName:n,templateName:t[n]});return e}get outputs(){const e=[];for(let t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}create(e,t,n,i){if(!i)throw new Error("ngModule should be provided");const r=si(this.viewDefFactory),s=r.nodes[0].element.componentProvider.nodeIndex,o=Nn.createRootView(e,t||[],n,r,i,Pi),a=On(o,s).instance;return n&&o.renderer.setAttribute(Mn(o,0).renderElement,"ng-version",rn.full),new ki(o,new Ri(o),a)}}class ki extends Bt{constructor(e,t,n){super(),this._view=e,this._viewRef=t,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=t,this.changeDetectorRef=t,this.instance=n}get location(){return new Jt(Mn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Ui(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function Mi(e,t,n){return new Oi(e,t,n)}class Oi{constructor(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}get element(){return new Jt(this._data.renderElement)}get injector(){return new Ui(this._view,this._elDef)}get parentInjector(){let e=this._view,t=this._elDef.parent;for(;!t&&e;)t=Kn(e),e=e.parent;return e?new Ui(e,t):new Ui(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const t=Ti(this._data,e);Nn.destroyView(t)}}get(e){const t=this._embeddedViews[e];if(t){const e=new Ri(t);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,t,n){const i=e.createEmbeddedView(t||{});return this.insert(i,n),i}createComponent(e,t,n,i,r){const s=n||this.parentInjector;r||e instanceof Zt||(r=s.get(Ht));const o=e.create(s,i,void 0,r);return this.insert(o.hostView,t),o}insert(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=e;return function(e,t,n,i){let r=t.viewContainer._embeddedViews;null==n&&(n=r.length),i.viewContainerParent=e,Si(r,n,i),function(e,t){const n=Yn(t);if(!n||n===e||16&t.state)return;t.state|=16;let i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(t),function(e,n){if(4&n.flags)return;t.parent.def.nodeFlags|=4,n.flags|=4;let i=n.parent;for(;i;)i.childFlags|=4,i=i.parent}(0,t.parentNodeDef)}(t,i),Nn.dirtyParentQueries(i),Ci(t,n>0?r[n-1]:null,i)}(this._view,this._data,t,n._view),n.attachToViewContainerRef(this),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(e._view);return function(e,t,i){const r=e.viewContainer._embeddedViews,s=r[n];Ei(r,n),null==i&&(i=r.length),Si(r,i,s),Nn.dirtyParentQueries(s),Li(s),Ci(e,i>0?r[i-1]:null,s)}(this._data,0,t),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const t=Ti(this._data,e);t&&Nn.destroyView(t)}detach(e){const t=Ti(this._data,e);return t?new Ri(t):null}}function Di(e){return new Ri(e)}class Ri{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const t=[];return oi(e,0,void 0,void 0,t),t}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Wn(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{Nn.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){Nn.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Nn.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Li(this._view),Nn.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function Ni(e,t){return new Fi(e,t)}class Fi extends xn{constructor(e,t){super(),this._parentView=e,this._def=t}createEmbeddedView(e){return new Ri(Nn.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new Jt(Mn(this._parentView,this._def.nodeIndex).renderElement)}}function Bi(e,t){return new Ui(e,t)}class Ui{constructor(e,t){this.view=e,this.elDef=t}get(e,t=De.THROW_IF_NOT_FOUND){return Nn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Un(e)},t)}}function ji(e,t){const n=e.def.nodes[t];if(1&n.flags){const t=Mn(e,n.nodeIndex);return n.element.template?t.template:t.renderElement}if(2&n.flags)return kn(e,n.nodeIndex).renderText;if(20240&n.flags)return On(e,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${t}`)}function zi(e){return new Vi(e.renderer)}class Vi{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,t){const[n,i]=di(t),r=this.delegate.createElement(i,n);return e&&this.delegate.appendChild(e,r),r}createViewRoot(e){return e}createTemplateAnchor(e){const t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}createText(e,t){const n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}projectNodes(e,t){for(let n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}attachViewAfter(e,t){const n=this.delegate.parentNode(e),i=this.delegate.nextSibling(e);for(let r=0;r<t.length;r++)this.delegate.insertBefore(n,t[r],i)}detachView(e){for(let t=0;t<e.length;t++){const n=e[t],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}}destroyView(e,t){for(let n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}listen(e,t,n){return this.delegate.listen(e,t,n)}listenGlobal(e,t,n){return this.delegate.listen(e,t,n)}setElementProperty(e,t,n){this.delegate.setProperty(e,t,n)}setElementAttribute(e,t,n){const[i,r]=di(t);null!=n?this.delegate.setAttribute(e,r,n,i):this.delegate.removeAttribute(e,r,i)}setBindingDebugInfo(e,t,n){}setElementClass(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}setElementStyle(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}invokeElementMethod(e,t,n){e[t].apply(e,n)}setText(e,t){this.delegate.setValue(e,t)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function qi(e,t,n,i){return new Gi(e,t,n,i)}class Gi{constructor(e,t,n,i){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const t=e._def,n=e._providers=new Array(t.providers.length);for(let i=0;i<t.providers.length;i++){const r=t.providers[i];4096&r.flags||void 0===n[i]&&(n[i]=xi(e,r))}}(this)}get(e,t=De.THROW_IF_NOT_FOUND,n=re.Default){let i=0;return n&re.SkipSelf?i|=1:n&re.Self&&(i|=4),wi(this,{token:e,tokenKey:Un(e),flags:i},t)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(qt)}destroy(){if(this._destroyed)throw new Error(`The ng module ${ue(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,t){const n=e._def,i=new Set;for(let r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){const t=e._providers[r];if(t&&t!==gi){const e=t.ngOnDestroy;"function"!=typeof e||i.has(t)||(e.apply(t),i.add(t))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const Zi=Un(Kt),Hi=Un(en),Wi=Un(Jt),$i=Un(Cn),Ji=Un(xn),Yi=Un(_n),Ki=Un(De),Qi=Un(ve);function Xi(e,t,n,i,r,s,o,a){const l=[];if(o)for(let h in o){const[e,t]=o[h];l[e]={flags:8,name:h,nonMinifiedName:t,ns:null,securityContext:null,suffix:null}}const u=[];if(a)for(let h in a)u.push({type:1,propName:h,target:null,eventName:a[h]});return tr(e,t|=16384,n,i,r,r,s,l,u)}function er(e,t,n,i,r){return tr(-1,e,t,0,n,i,r)}function tr(e,t,n,i,r,s,o,a,l){const{matchedQueries:u,references:h,matchedQueryIds:c}=ti(n);l||(l=[]),a||(a=[]),s=de(s);const d=ni(o,ue(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:c,references:h,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:pi(a),outputs:l,element:null,provider:{token:r,value:s,deps:d},text:null,query:null,ngContent:null}}function nr(e,t){return or(e,t)}function ir(e,t){let n=e;for(;n.parent&&!Xn(n);)n=n.parent;return ar(n.parent,Kn(n),!0,t.provider.value,t.provider.deps)}function rr(e,t){const n=ar(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(let i=0;i<t.outputs.length;i++){const r=t.outputs[i],s=n[r.propName];if(!Nt(s))throw new Error(`@Output ${r.propName} not initialized in '${n.constructor.name}'.`);{const n=s.subscribe(sr(e,t.parent.nodeIndex,r.eventName));e.disposables[t.outputIndex+i]=n.unsubscribe.bind(n)}}return n}function sr(e,t,n){return i=>Jn(e,t,n,i)}function or(e,t){const n=(8192&t.flags)>0,i=t.provider;switch(201347067&t.flags){case 512:return ar(e,t.parent,n,i.value,i.deps);case 1024:return function(e,t,n,i,r){const s=r.length;switch(s){case 0:return i();case 1:return i(ur(e,t,n,r[0]));case 2:return i(ur(e,t,n,r[0]),ur(e,t,n,r[1]));case 3:return i(ur(e,t,n,r[0]),ur(e,t,n,r[1]),ur(e,t,n,r[2]));default:const o=Array(s);for(let i=0;i<s;i++)o[i]=ur(e,t,n,r[i]);return i(...o)}}(e,t.parent,n,i.value,i.deps);case 2048:return ur(e,t.parent,n,i.deps[0]);case 256:return i.value}}function ar(e,t,n,i,r){const s=r.length;switch(s){case 0:return new i;case 1:return new i(ur(e,t,n,r[0]));case 2:return new i(ur(e,t,n,r[0]),ur(e,t,n,r[1]));case 3:return new i(ur(e,t,n,r[0]),ur(e,t,n,r[1]),ur(e,t,n,r[2]));default:const o=new Array(s);for(let i=0;i<s;i++)o[i]=ur(e,t,n,r[i]);return new i(...o)}}const lr={};function ur(e,t,n,i,r=De.THROW_IF_NOT_FOUND){if(8&i.flags)return i.token;const s=e;2&i.flags&&(r=null);const o=i.tokenKey;o===Yi&&(n=!(!t||!t.element.componentView)),t&&1&i.flags&&(n=!1,t=t.parent);let a=e;for(;a;){if(t)switch(o){case Zi:return zi(hr(a,t,n));case Hi:return hr(a,t,n).renderer;case Wi:return new Jt(Mn(a,t.nodeIndex).renderElement);case $i:return Mn(a,t.nodeIndex).viewContainer;case Ji:if(t.element.template)return Mn(a,t.nodeIndex).template;break;case Yi:return Di(hr(a,t,n));case Ki:case Qi:return Bi(a,t);default:const e=(n?t.element.allProviders:t.element.publicProviders)[o];if(e){let t=On(a,e.nodeIndex);return t||(t={instance:or(a,e)},a.nodes[e.nodeIndex]=t),t.instance}}n=Xn(a),t=Kn(a),a=a.parent,4&i.flags&&(a=null)}const l=s.root.injector.get(i.token,lr);return l!==lr||r===lr?l:s.root.ngModule.injector.get(i.token,r)}function hr(e,t,n){let i;if(n)i=Mn(e,t.nodeIndex).componentView;else for(i=e;i.parent&&!Xn(i);)i=i.parent;return i}function cr(e,t,n,i,r,s){if(32768&n.flags){const t=Mn(e,n.parent.nodeIndex).componentView;2&t.def.flags&&(t.state|=8)}if(t.instance[n.bindings[i].name]=r,524288&n.flags){s=s||{};const t=Mt.unwrap(e.oldValues[n.bindingIndex+i]);s[n.bindings[i].nonMinifiedName]=new Ft(t,r,0!=(2&e.state))}return e.oldValues[n.bindingIndex+i]=r,s}function dr(e,t){if(!(e.def.nodeFlags&t))return;const n=e.def.nodes;let i=0;for(let r=0;r<n.length;r++){const s=n[r];let o=s.parent;for(!o&&s.flags&t&&fr(e,r,s.flags&t,i++),0==(s.childFlags&t)&&(r+=s.childCount);o&&1&o.flags&&r===o.nodeIndex+o.childCount;)o.directChildFlags&t&&(i=pr(e,o,t,i)),o=o.parent}}function pr(e,t,n,i){for(let r=t.nodeIndex+1;r<=t.nodeIndex+t.childCount;r++){const t=e.def.nodes[r];t.flags&n&&fr(e,r,t.flags&n,i++),r+=t.childCount}return i}function fr(e,t,n,i){const r=On(e,t);if(!r)return;const s=r.instance;s&&(Nn.setCurrentNode(e,t),1048576&n&&An(e,512,i)&&s.ngAfterContentInit(),2097152&n&&s.ngAfterContentChecked(),4194304&n&&An(e,768,i)&&s.ngAfterViewInit(),8388608&n&&s.ngAfterViewChecked(),131072&n&&s.ngOnDestroy())}const mr=new ye("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>We}),gr={},_r=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}(),yr=void 0;var vr=["en",[["a","p"],["AM","PM"],yr],[["AM","PM"],yr,yr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yr,"{1} 'at' {0}",yr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let br="en-US";class wr extends C{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let i,r=e=>null,s=()=>null;e&&"object"==typeof e?(i=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(r=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(i,r,s);return e instanceof d&&e.add(o),o}}function xr(){return this._results[It()]()}class Tr{constructor(){this.dirty=!0,this._results=[],this.changes=new wr,this.length=0;const e=It(),t=Tr.prototype;t[e]||(t[e]=xr)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?(n===t&&(n=t.slice(0,i)),e(r,n)):n!==t&&n.push(r)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Cr=new ye("Application Initializer");let Lr=(()=>(class{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Rt(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}))();const Sr=new ye("AppId");function Er(){return`${Pr()}${Pr()}${Pr()}`}function Pr(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ir=new ye("Platform Initializer"),Ar=new ye("Platform ID"),kr=new ye("appBootstrapListener");let Mr=(()=>(class{log(e){console.log(e)}warn(e){console.warn(e)}}))();const Or=new ye("LocaleId");function Dr(){throw new Error("Runtime compiler is not loaded")}const Rr=Dr,Nr=Dr,Fr=Dr,Br=Dr;let Ur,jr,zr=(()=>(class{constructor(){this.compileModuleSync=Rr,this.compileModuleAsync=Nr,this.compileModuleAndAllComponentsSync=Fr,this.compileModuleAndAllComponentsAsync=Br}clearCache(){}clearCacheFor(e){}getModuleId(e){}}))();class Vr{}function qr(){const e=_e.wtf;return!(!e||!(Ur=e.trace)||(jr=Ur.events,0))}const Gr=qr(),Zr=Gr?function(e,t=null){return jr.createScope(e,t)}:(e,t)=>(function(e,t){return null}),Hr=Gr?function(e,t){return Ur.leaveScope(e,t),t}:(e,t)=>t,Wr=(()=>Promise.resolve(0))();function $r(e){"undefined"==typeof Zone?Wr.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Jr{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wr(!1),this.onMicrotaskEmpty=new wr(!1),this.onStable=new wr(!1),this.onError=new wr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var t;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,i,r,s,o)=>{try{return Xr(t),e.invokeTask(i,r,s,o)}finally{es(t)}},onInvoke:(e,n,i,r,s,o,a)=>{try{return Xr(t),e.invoke(i,r,s,o,a)}finally{es(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t.hasPendingMicrotasks=r.microTask,Qr(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Jr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Jr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,e,Kr,Yr,Yr);try{return r.runTask(s,t,n)}finally{r.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function Yr(){}const Kr={};function Qr(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Xr(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function es(e){e._nesting--,Qr(e)}class ts{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wr,this.onMicrotaskEmpty=new wr,this.onStable=new wr,this.onError=new wr}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}let ns=(()=>(class{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Jr.assertNotInAngularZone(),$r(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$r(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let i=-1;t&&t>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==i),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}))(),is=(()=>{class e{constructor(){this._applications=new Map,os.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return os.findTestabilityInTree(this,e,t)}}return e.ctorParameters=()=>[],e})();class rs{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let ss,os=new rs,as=function(e){return e instanceof Zt};const ls=new ye("AllowMultipleToken");class us{constructor(e,t){this.name=e,this.token=t}}function hs(e,t,n=[]){const i=`Platform: ${t}`,r=new ye(i);return(t=[])=>{let s=cs();if(!s||s.injector.get(ls,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{const e=n.concat(t).concat({provide:r,useValue:!0});!function(e){if(ss&&!ss.destroyed&&!ss.injector.get(ls,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ss=e.get(ds);const t=e.get(Ir,null);t&&t.forEach(e=>e())}(De.create({providers:e,name:i}))}return function(e){const t=cs();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function cs(){return ss&&!ss.destroyed?ss:null}let ds=(()=>(class{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n="noop"===(r=t?t.ngZone:void 0)?new ts:("zone.js"===r?void 0:r)||new Jr({enableLongStackTrace:Ye()}),i=[{provide:Jr,useValue:n}];var r;return n.run(()=>{const t=De.create({providers:i,parent:this.injector,name:e.moduleType.name}),r=e.create(t),s=r.injector.get(Lt,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return function(e){br=e.toLowerCase().replace(/_/g,"-")}(r.injector.get(Or,"en-US")),r.onDestroy(()=>ms(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,t,n){try{const r=n();return Rt(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(s,n,()=>{const e=r.injector.get(Lr);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(r),r))})})}bootstrapModule(e,t=[]){const n=ps({},t);return function(e,t,n){return e.get(Vr).createCompiler([t]).compileModuleAsync(n)}(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(fs);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ue(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}))();function ps(e,t){return Array.isArray(t)?t.reduce(ps,e):Object.assign({},e,t)}let fs=(()=>{class e{constructor(e,t,n,i,r,s){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ye(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Jr.assertNotInAngularZone(),$r(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Jr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return S(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof i&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof y?e[0]:function(e=Number.POSITIVE_INFINITY){return j(q,e)}(t)(G(e,n))}(o,a.pipe(e=>Z()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,J);return i.source=t,i.subjectFactory=n,i}}(K)(e))))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Ut?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const i=as(n)?null:this._injector.get(Ht),r=n.create(De.NULL,[],t||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const s=r.injector.get(ns,null);return s&&r.injector.get(is).registerApplication(r.location.nativeElement,s),this._loadComponent(r),Ye()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const t=e._tickScope();try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,Hr(t)}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;ms(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(kr,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),ms(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e._tickScope=Zr("ApplicationRef#tick()"),e})();function ms(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class gs{constructor(e,t){this.name=e,this.callback=t}}class _s{constructor(e,t,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=e,t&&t instanceof ys&&t.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class ys extends _s{constructor(e,t,n){super(e,t,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}insertChildrenAfter(e,t){const n=this.childNodes.indexOf(e);-1!==n&&(this.childNodes.splice(n+1,0,...t),t.forEach(t=>{t.parent&&t.parent.removeChild(t),e.parent=this}))}insertBefore(e,t){const n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return function e(t,n,i){t.childNodes.forEach(t=>{t instanceof ys&&(n(t)&&i.push(t),e(t,n,i))})}(this,e,t),t}queryAllNodes(e){const t=[];return function e(t,n,i){t instanceof ys&&t.childNodes.forEach(t=>{n(t)&&i.push(t),t instanceof ys&&e(t,n,i)})}(this,e,t),t}get children(){return this.childNodes.filter(e=>e instanceof ys)}triggerEventHandler(e,t){this.listeners.forEach(n=>{n.name==e&&n.callback(t)})}}const vs=new Map,bs=function(e){return vs.get(e)||null};function ws(e){vs.set(e.nativeNode,e)}const xs=hs(null,"core",[{provide:Ar,useValue:"unknown"},{provide:ds,deps:[De]},{provide:is,deps:[]},{provide:Mr,deps:[]}]);function Ts(){return bn}function Cs(){return wn}function Ls(e){return e||"en-US"}function Ss(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}let Es=(()=>(class{constructor(e){}}))();function Ps(e,t,n,i,r,s){e|=1;const{matchedQueries:o,references:a,matchedQueryIds:l}=ti(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:l,references:a,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?si(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||Fn},provider:null,text:null,query:null,ngContent:null}}function Is(e,t,n,i,r,s,o=[],a,l,u,h,c){u||(u=Fn);const{matchedQueries:d,references:p,matchedQueryIds:f}=ti(n);let m=null,g=null;s&&([m,g]=di(s)),a=a||[];const _=new Array(a.length);for(let b=0;b<a.length;b++){const[e,t,n]=a[b],[i,r]=di(t);let s=void 0,o=void 0;switch(15&e){case 4:o=n;break;case 1:case 8:s=n}_[b]={flags:e,ns:i,name:r,nonMinifiedName:r,securityContext:s,suffix:o}}l=l||[];const y=new Array(l.length);for(let b=0;b<l.length;b++){const[e,t]=l[b];y[b]={type:0,target:e,eventName:t,propName:null}}const v=(o=o||[]).map(([e,t])=>{const[n,i]=di(e);return[n,i,t]});return c=function(e){if(e&&e.id===jn){const t=null!=e.encapsulation&&e.encapsulation!==He.None||e.styles.length||Object.keys(e.data).length;e.id=t?`c${qn++}`:zn}return e&&e.id===zn&&(e=null),e||null}(c),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:i,childCount:r,bindings:_,bindingFlags:pi(_),outputs:y,element:{ns:m,name:g,attrs:v,template:null,componentProvider:null,componentView:h||null,componentRendererType:c,publicProviders:null,allProviders:null,handleEvent:u||Fn},provider:null,text:null,query:null,ngContent:null}}function As(e,t,n){const i=n.element,r=e.root.selectorOrNode,s=e.renderer;let o;if(e.parent||!r){o=i.name?s.createElement(i.name,i.ns):s.createComment("");const r=ii(e,t,n);r&&s.appendChild(r,o)}else o=s.selectRootElement(r,!!i.componentRendererType&&i.componentRendererType.encapsulation===He.ShadowDom);if(i.attrs)for(let a=0;a<i.attrs.length;a++){const[e,t,n]=i.attrs[a];s.setAttribute(o,t,n,e)}return o}function ks(e,t,n,i){for(let o=0;o<n.outputs.length;o++){const a=n.outputs[o],l=Ms(e,n.nodeIndex,(s=a.eventName,(r=a.target)?`${r}:${s}`:s));let u=a.target,h=e;"component"===a.target&&(u=null,h=t);const c=h.renderer.listen(u||i,a.eventName,l);e.disposables[n.outputIndex+o]=c}var r,s}function Ms(e,t,n){return i=>Jn(e,t,n,i)}function Os(e,t,n,i){if(!Zn(e,t,n,i))return!1;const r=t.bindings[n],s=Mn(e,t.nodeIndex),o=s.renderElement,a=r.name;switch(15&r.flags){case 1:!function(e,t,n,i,r,s){const o=t.securityContext;let a=o?e.root.sanitizer.sanitize(o,s):s;a=null!=a?a.toString():null;const l=e.renderer;null!=s?l.setAttribute(n,r,a,i):l.removeAttribute(n,r,i)}(e,r,o,r.ns,a,i);break;case 2:!function(e,t,n,i){const r=e.renderer;i?r.addClass(t,n):r.removeClass(t,n)}(e,o,a,i);break;case 4:!function(e,t,n,i,r){let s=e.root.sanitizer.sanitize(yt.STYLE,r);if(null!=s){s=s.toString();const e=t.suffix;null!=e&&(s+=e)}else s=null;const o=e.renderer;null!=s?o.setStyle(n,i,s):o.removeStyle(n,i)}(e,r,o,a,i);break;case 8:!function(e,t,n,i,r){const s=t.securityContext;let o=s?e.root.sanitizer.sanitize(s,r):r;e.renderer.setProperty(n,i,o)}(33554432&t.flags&&32&r.flags?s.componentView:e,r,o,a,i)}return!0}function Ds(e){const t=e.def.nodeMatchedQueries;for(;e.parent&&ei(e);){let n=e.parentNodeDef;e=e.parent;const i=n.nodeIndex+n.childCount;for(let r=0;r<=i;r++){const i=e.def.nodes[r];67108864&i.flags&&536870912&i.flags&&(i.query.filterId&t)===i.query.filterId&&Rn(e,r).setDirty(),!(1&i.flags&&r+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(r+=i.childCount)}}if(134217728&e.def.nodeFlags)for(let n=0;n<e.def.nodes.length;n++){const t=e.def.nodes[n];134217728&t.flags&&536870912&t.flags&&Rn(e,n).setDirty(),n+=t.childCount}}function Rs(e,t){const n=Rn(e,t.nodeIndex);if(!n.dirty)return;let i,r=void 0;if(67108864&t.flags){const n=t.parent.parent;r=Ns(e,n.nodeIndex,n.nodeIndex+n.childCount,t.query,[]),i=On(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(r=Ns(e,0,e.def.nodes.length-1,t.query,[]),i=e.component);n.reset(r);const s=t.query.bindings;let o=!1;for(let a=0;a<s.length;a++){const e=s[a];let t;switch(e.bindingType){case 0:t=n.first;break;case 1:t=n,o=!0}i[e.propName]=t}o&&n.notifyOnChanges()}function Ns(e,t,n,i,r){for(let s=t;s<=n;s++){const t=e.def.nodes[s],n=t.matchedQueries[i.id];if(null!=n&&r.push(Fs(e,t,n)),1&t.flags&&t.element.template&&(t.element.template.nodeMatchedQueries&i.filterId)===i.filterId){const n=Mn(e,s);if((t.childMatchedQueries&i.filterId)===i.filterId&&(Ns(e,s+1,s+t.childCount,i,r),s+=t.childCount),16777216&t.flags){const e=n.viewContainer._embeddedViews;for(let t=0;t<e.length;t++){const s=e[t],o=Yn(s);o&&o===n&&Ns(s,0,s.def.nodes.length-1,i,r)}}const o=n.template._projectedViews;if(o)for(let e=0;e<o.length;e++){const t=o[e];Ns(t,0,t.def.nodes.length-1,i,r)}}(t.childMatchedQueries&i.filterId)!==i.filterId&&(s+=t.childCount)}return r}function Fs(e,t,n){if(null!=n)switch(n){case 1:return Mn(e,t.nodeIndex).renderElement;case 0:return new Jt(Mn(e,t.nodeIndex).renderElement);case 2:return Mn(e,t.nodeIndex).template;case 3:return Mn(e,t.nodeIndex).viewContainer;case 4:return On(e,t.nodeIndex).instance}}function Bs(e,t,n){const i=ii(e,t,n);i&&li(e,n.ngContent.index,1,i,null,void 0)}function Us(e,t){const n=Object.keys(t),i=n.length,r=new Array(i);for(let s=0;s<i;s++){const e=n[s];r[t[e]]=e}return js(64,e,r)}function js(e,t,n){const i=new Array(n.length);for(let r=0;r<n.length;r++){const e=n[r];i[r]={flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:i,bindingFlags:pi(i),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function zs(e,t,n){const i=new Array(n.length-1);for(let r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Vs(e,t,n){let i;const r=e.renderer;i=r.createText(n.text.prefix);const s=ii(e,t,n);return s&&r.appendChild(s,i),{renderText:i}}function qs(e,t){return(null!=e?e.toString():"")+t.suffix}function Gs(e,t,n,i){let r=0,s=0,o=0,a=0,l=0,u=null,h=null,c=!1,d=!1,p=null;for(let f=0;f<t.length;f++){const e=t[f];if(e.nodeIndex=f,e.parent=u,e.bindingIndex=r,e.outputIndex=s,e.renderParent=h,o|=e.flags,l|=e.matchedQueryIds,e.element){const t=e.element;t.publicProviders=u?u.element.publicProviders:Object.create(null),t.allProviders=t.publicProviders,c=!1,d=!1,e.element.template&&(l|=e.element.template.nodeMatchedQueries)}if(Hs(u,e,t.length),r+=e.bindings.length,s+=e.outputs.length,!h&&3&e.flags&&(p=e),20224&e.flags){c||(c=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);const t=0!=(32768&e.flags);0==(8192&e.flags)||t?u.element.publicProviders[Un(e.provider.token)]=e:(d||(d=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[Un(e.provider.token)]=e),t&&(u.element.componentProvider=e)}if(u?(u.childFlags|=e.flags,u.directChildFlags|=e.flags,u.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(u.childMatchedQueries|=e.element.template.nodeMatchedQueries)):a|=e.flags,e.childCount>0)u=e,Zs(e)||(h=e);else for(;u&&f===u.nodeIndex+u.childCount;){const e=u.parent;e&&(e.childFlags|=u.childFlags,e.childMatchedQueries|=u.childMatchedQueries),h=(u=e)&&Zs(u)?u.renderParent:u}}return{factory:null,nodeFlags:o,rootNodeFlags:a,nodeMatchedQueries:l,flags:e,nodes:t,updateDirectives:n||Fn,updateRenderer:i||Fn,handleEvent:(e,n,i,r)=>t[n].element.handleEvent(e,i,r),bindingCount:r,outputCount:s,lastRenderRootNode:p}}function Zs(e){return 0!=(1&e.flags)&&null===e.element.name}function Hs(e,t,n){const i=t.element&&t.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${t.nodeIndex}!`)}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${t.nodeIndex}!`);if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${t.nodeIndex}!`);if(134217728&t.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${t.nodeIndex}!`)}if(t.childCount){const i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${t.nodeIndex}!`)}}function Ws(e,t,n,i){const r=Ys(e.root,e.renderer,e,t,n);return Ks(r,e.component,i),Qs(r),r}function $s(e,t,n){const i=Ys(e,e.renderer,null,null,t);return Ks(i,n,n),Qs(i),i}function Js(e,t,n,i){const r=t.element.componentRendererType;let s;return s=r?e.root.rendererFactory.createRenderer(i,r):e.root.renderer,Ys(e.root,s,e,t.element.componentProvider,n)}function Ys(e,t,n,i,r){const s=new Array(r.nodes.length),o=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:s,state:13,root:e,renderer:t,oldValues:new Array(r.bindingCount),disposables:o,initIndex:-1}}function Ks(e,t,n){e.component=t,e.context=n}function Qs(e){let t;Xn(e)&&(t=Mn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const n=e.def,i=e.nodes;for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];let o;switch(Nn.setCurrentNode(e,r),201347067&s.flags){case 1:const n=As(e,t,s);let a=void 0;if(33554432&s.flags){const t=si(s.element.componentView);a=Nn.createComponentView(e,s,t,n)}ks(e,a,s,n),o={renderElement:n,componentView:a,viewContainer:null,template:s.element.template?Ni(e,s):void 0},16777216&s.flags&&(o.viewContainer=Mi(e,s,o));break;case 2:o=Vs(e,t,s);break;case 512:case 1024:case 2048:case 256:(o=i[r])||4096&s.flags||(o={instance:nr(e,s)});break;case 16:o={instance:ir(e,s)};break;case 16384:(o=i[r])||(o={instance:rr(e,s)}),32768&s.flags&&Ks(Mn(e,s.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Tr;break;case 8:Bs(e,t,s),o=void 0}i[r]=o}ao(e,oo.CreateViewNodes),co(e,201326592,268435456,0)}function Xs(e){no(e),Nn.updateDirectives(e,1),lo(e,oo.CheckNoChanges),Nn.updateRenderer(e,1),ao(e,oo.CheckNoChanges),e.state&=-97}function eo(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,In(e,0,256),no(e),Nn.updateDirectives(e,0),lo(e,oo.CheckAndUpdate),co(e,67108864,536870912,0);let t=In(e,256,512);dr(e,2097152|(t?1048576:0)),Nn.updateRenderer(e,0),ao(e,oo.CheckAndUpdate),co(e,134217728,536870912,0),dr(e,8388608|((t=In(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,In(e,768,1024)}function to(e,t,n,i,r,s,o,a,l,u,h,c,d){return 0===n?function(e,t,n,i,r,s,o,a,l,u,h,c){switch(201347067&t.flags){case 1:return function(e,t,n,i,r,s,o,a,l,u,h,c){const d=t.bindings.length;let p=!1;return d>0&&Os(e,t,0,n)&&(p=!0),d>1&&Os(e,t,1,i)&&(p=!0),d>2&&Os(e,t,2,r)&&(p=!0),d>3&&Os(e,t,3,s)&&(p=!0),d>4&&Os(e,t,4,o)&&(p=!0),d>5&&Os(e,t,5,a)&&(p=!0),d>6&&Os(e,t,6,l)&&(p=!0),d>7&&Os(e,t,7,u)&&(p=!0),d>8&&Os(e,t,8,h)&&(p=!0),d>9&&Os(e,t,9,c)&&(p=!0),p}(e,t,n,i,r,s,o,a,l,u,h,c);case 2:return function(e,t,n,i,r,s,o,a,l,u,h,c){let d=!1;const p=t.bindings,f=p.length;if(f>0&&Zn(e,t,0,n)&&(d=!0),f>1&&Zn(e,t,1,i)&&(d=!0),f>2&&Zn(e,t,2,r)&&(d=!0),f>3&&Zn(e,t,3,s)&&(d=!0),f>4&&Zn(e,t,4,o)&&(d=!0),f>5&&Zn(e,t,5,a)&&(d=!0),f>6&&Zn(e,t,6,l)&&(d=!0),f>7&&Zn(e,t,7,u)&&(d=!0),f>8&&Zn(e,t,8,h)&&(d=!0),f>9&&Zn(e,t,9,c)&&(d=!0),d){let d=t.text.prefix;f>0&&(d+=qs(n,p[0])),f>1&&(d+=qs(i,p[1])),f>2&&(d+=qs(r,p[2])),f>3&&(d+=qs(s,p[3])),f>4&&(d+=qs(o,p[4])),f>5&&(d+=qs(a,p[5])),f>6&&(d+=qs(l,p[6])),f>7&&(d+=qs(u,p[7])),f>8&&(d+=qs(h,p[8])),f>9&&(d+=qs(c,p[9]));const m=kn(e,t.nodeIndex).renderText;e.renderer.setValue(m,d)}return d}(e,t,n,i,r,s,o,a,l,u,h,c);case 16384:return function(e,t,n,i,r,s,o,a,l,u,h,c){const d=On(e,t.nodeIndex),p=d.instance;let f=!1,m=void 0;const g=t.bindings.length;return g>0&&Gn(e,t,0,n)&&(f=!0,m=cr(e,d,t,0,n,m)),g>1&&Gn(e,t,1,i)&&(f=!0,m=cr(e,d,t,1,i,m)),g>2&&Gn(e,t,2,r)&&(f=!0,m=cr(e,d,t,2,r,m)),g>3&&Gn(e,t,3,s)&&(f=!0,m=cr(e,d,t,3,s,m)),g>4&&Gn(e,t,4,o)&&(f=!0,m=cr(e,d,t,4,o,m)),g>5&&Gn(e,t,5,a)&&(f=!0,m=cr(e,d,t,5,a,m)),g>6&&Gn(e,t,6,l)&&(f=!0,m=cr(e,d,t,6,l,m)),g>7&&Gn(e,t,7,u)&&(f=!0,m=cr(e,d,t,7,u,m)),g>8&&Gn(e,t,8,h)&&(f=!0,m=cr(e,d,t,8,h,m)),g>9&&Gn(e,t,9,c)&&(f=!0,m=cr(e,d,t,9,c,m)),m&&p.ngOnChanges(m),65536&t.flags&&An(e,256,t.nodeIndex)&&p.ngOnInit(),262144&t.flags&&p.ngDoCheck(),f}(e,t,n,i,r,s,o,a,l,u,h,c);case 32:case 64:case 128:return function(e,t,n,i,r,s,o,a,l,u,h,c){const d=t.bindings;let p=!1;const f=d.length;if(f>0&&Zn(e,t,0,n)&&(p=!0),f>1&&Zn(e,t,1,i)&&(p=!0),f>2&&Zn(e,t,2,r)&&(p=!0),f>3&&Zn(e,t,3,s)&&(p=!0),f>4&&Zn(e,t,4,o)&&(p=!0),f>5&&Zn(e,t,5,a)&&(p=!0),f>6&&Zn(e,t,6,l)&&(p=!0),f>7&&Zn(e,t,7,u)&&(p=!0),f>8&&Zn(e,t,8,h)&&(p=!0),f>9&&Zn(e,t,9,c)&&(p=!0),p){const p=Dn(e,t.nodeIndex);let m;switch(201347067&t.flags){case 32:m=new Array(d.length),f>0&&(m[0]=n),f>1&&(m[1]=i),f>2&&(m[2]=r),f>3&&(m[3]=s),f>4&&(m[4]=o),f>5&&(m[5]=a),f>6&&(m[6]=l),f>7&&(m[7]=u),f>8&&(m[8]=h),f>9&&(m[9]=c);break;case 64:m={},f>0&&(m[d[0].name]=n),f>1&&(m[d[1].name]=i),f>2&&(m[d[2].name]=r),f>3&&(m[d[3].name]=s),f>4&&(m[d[4].name]=o),f>5&&(m[d[5].name]=a),f>6&&(m[d[6].name]=l),f>7&&(m[d[7].name]=u),f>8&&(m[d[8].name]=h),f>9&&(m[d[9].name]=c);break;case 128:const e=n;switch(f){case 1:m=e.transform(n);break;case 2:m=e.transform(i);break;case 3:m=e.transform(i,r);break;case 4:m=e.transform(i,r,s);break;case 5:m=e.transform(i,r,s,o);break;case 6:m=e.transform(i,r,s,o,a);break;case 7:m=e.transform(i,r,s,o,a,l);break;case 8:m=e.transform(i,r,s,o,a,l,u);break;case 9:m=e.transform(i,r,s,o,a,l,u,h);break;case 10:m=e.transform(i,r,s,o,a,l,u,h,c)}}p.value=m}return p}(e,t,n,i,r,s,o,a,l,u,h,c);default:throw"unreachable"}}(e,t,i,r,s,o,a,l,u,h,c,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){let i=!1;for(let r=0;r<n.length;r++)Os(e,t,r,n[r])&&(i=!0);return i}(e,t,n);case 2:return function(e,t,n){const i=t.bindings;let r=!1;for(let s=0;s<n.length;s++)Zn(e,t,s,n[s])&&(r=!0);if(r){let r="";for(let e=0;e<n.length;e++)r+=qs(n[e],i[e]);r=t.text.prefix+r;const s=kn(e,t.nodeIndex).renderText;e.renderer.setValue(s,r)}return r}(e,t,n);case 16384:return function(e,t,n){const i=On(e,t.nodeIndex),r=i.instance;let s=!1,o=void 0;for(let a=0;a<n.length;a++)Gn(e,t,a,n[a])&&(s=!0,o=cr(e,i,t,a,n[a],o));return o&&r.ngOnChanges(o),65536&t.flags&&An(e,256,t.nodeIndex)&&r.ngOnInit(),262144&t.flags&&r.ngDoCheck(),s}(e,t,n);case 32:case 64:case 128:return function(e,t,n){const i=t.bindings;let r=!1;for(let s=0;s<n.length;s++)Zn(e,t,s,n[s])&&(r=!0);if(r){const r=Dn(e,t.nodeIndex);let s;switch(201347067&t.flags){case 32:s=n;break;case 64:s={};for(let t=0;t<n.length;t++)s[i[t].name]=n[t];break;case 128:const e=n[0],r=n.slice(1);s=e.transform(...r)}r.value=s}return r}(e,t,n);default:throw"unreachable"}}(e,t,i)}function no(e){const t=e.def;if(4&t.nodeFlags)for(let n=0;n<t.nodes.length;n++){const i=t.nodes[n];if(4&i.flags){const t=Mn(e,n).template._projectedViews;if(t)for(let n=0;n<t.length;n++){const i=t[n];i.state|=32,$n(i,e)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function io(e,t,n,i,r,s,o,a,l,u,h,c,d){return 0===n?function(e,t,n,i,r,s,o,a,l,u,h,c){const d=t.bindings.length;d>0&&Hn(e,t,0,n),d>1&&Hn(e,t,1,i),d>2&&Hn(e,t,2,r),d>3&&Hn(e,t,3,s),d>4&&Hn(e,t,4,o),d>5&&Hn(e,t,5,a),d>6&&Hn(e,t,6,l),d>7&&Hn(e,t,7,u),d>8&&Hn(e,t,8,h),d>9&&Hn(e,t,9,c)}(e,t,i,r,s,o,a,l,u,h,c,d):function(e,t,n){for(let i=0;i<n.length;i++)Hn(e,t,i,n[i])}(e,t,i),!1}function ro(e,t){if(Rn(e,t.nodeIndex).dirty)throw Sn(Nn.createDebugContext(e,t.nodeIndex),`Query ${t.query.id} not dirty`,`Query ${t.query.id} dirty`,0!=(1&e.state))}function so(e){if(!(128&e.state)){if(lo(e,oo.Destroy),ao(e,oo.Destroy),dr(e,131072),e.disposables)for(let t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(!(16&e.state))return;const t=Yn(e);if(t){const n=t.template._projectedViews;n&&(Ei(n,n.indexOf(e)),Nn.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const t=e.def.nodes.length;for(let n=0;n<t;n++){const t=e.def.nodes[n];1&t.flags?e.renderer.destroyNode(Mn(e,n).renderElement):2&t.flags?e.renderer.destroyNode(kn(e,n).renderText):(67108864&t.flags||134217728&t.flags)&&Rn(e,n).destroy()}}(e),Xn(e)&&e.renderer.destroy(),e.state|=128}}const oo=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function ao(e,t){const n=e.def;if(33554432&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const r=n.nodes[i];33554432&r.flags?uo(Mn(e,i).componentView,t):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function lo(e,t){const n=e.def;if(16777216&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const r=n.nodes[i];if(16777216&r.flags){const n=Mn(e,i).viewContainer._embeddedViews;for(let e=0;e<n.length;e++)uo(n[e],t)}else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function uo(e,t){const n=e.state;switch(t){case oo.CheckNoChanges:0==(128&n)&&(12==(12&n)?Xs(e):64&n&&ho(e,oo.CheckNoChangesProjectedViews));break;case oo.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Xs(e):64&n&&ho(e,t));break;case oo.CheckAndUpdate:0==(128&n)&&(12==(12&n)?eo(e):64&n&&ho(e,oo.CheckAndUpdateProjectedViews));break;case oo.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?eo(e):64&n&&ho(e,t));break;case oo.Destroy:so(e);break;case oo.CreateViewNodes:Qs(e)}}function ho(e,t){lo(e,t),ao(e,t)}function co(e,t,n,i){if(!(e.def.nodeFlags&t&&e.def.nodeFlags&n))return;const r=e.def.nodes.length;for(let s=0;s<r;s++){const r=e.def.nodes[s];if(r.flags&t&&r.flags&n)switch(Nn.setCurrentNode(e,r.nodeIndex),i){case 0:Rs(e,r);break;case 1:ro(e,r)}r.childFlags&t&&r.childFlags&n||(s+=r.childCount)}}let po=!1;function fo(e,t,n,i,r,s){const o=r.injector.get(Qt);return $s(go(e,r,o,t,n),i,s)}function mo(e,t,n,i,r,s){const o=r.injector.get(Qt),a=go(e,r,new $o(o),t,n),l=So(i);return Ho(Mo.create,$s,null,[a,l,s])}function go(e,t,n,i,r){const s=t.injector.get(vt),o=t.injector.get(Lt),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:i,selectorOrNode:r,sanitizer:s,rendererFactory:n,renderer:a,errorHandler:o}}function _o(e,t,n,i){const r=So(n);return Ho(Mo.create,Ws,null,[e,t,r,i])}function yo(e,t,n,i){return n=xo.get(t.element.componentProvider.provider.token)||So(n),Ho(Mo.create,Js,null,[e,t,n,i])}function vo(e,t,n,i){return qi(e,t,n,function(e){const{hasOverrides:t,hasDeprecatedOverrides:n}=function(e){let t=!1,n=!1;return 0===bo.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(e=>{const i=bo.get(e.token);3840&e.flags&&i&&(t=!0,n=n||i.deprecatedBehavior)}),e.modules.forEach(e=>{wo.forEach((i,r)=>{ae(r).providedIn===e&&(t=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e);return t?(function(e){for(let t=0;t<e.providers.length;t++){const i=e.providers[t];n&&(i.flags|=4096);const r=bo.get(i.token);r&&(i.flags=-3841&i.flags|r.flags,i.deps=ni(r.deps),i.value=r.value)}if(wo.size>0){let t=new Set(e.modules);wo.forEach((i,r)=>{if(t.has(ae(r).providedIn)){let t={token:r,flags:i.flags|(n?4096:0),deps:ni(i.deps),value:i.value,index:e.providers.length};e.providers.push(t),e.providersByKey[Un(r)]=t}})}}(e=e.factory(()=>Fn)),e):e}(i))}const bo=new Map,wo=new Map,xo=new Map;function To(e){let t;bo.set(e.token,e),"function"==typeof e.token&&(t=ae(e.token))&&"function"==typeof t.providedIn&&wo.set(e.token,e)}function Co(e,t){const n=si(t.viewDefFactory),i=si(n.nodes[0].element.componentView);xo.set(e,i)}function Lo(){bo.clear(),wo.clear(),xo.clear()}function So(e){if(0===bo.size)return e;const t=function(e){const t=[];let n=null;for(let i=0;i<e.nodes.length;i++){const r=e.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&bo.has(r.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(()=>Fn);for(let i=0;i<t.length;i++)n(e,t[i]);return e;function n(e,t){for(let n=t+1;n<e.nodes.length;n++){const t=e.nodes[n];if(1&t.flags)return;if(3840&t.flags){const e=t.provider,n=bo.get(e.token);n&&(t.flags=-3841&t.flags|n.flags,e.deps=ni(n.deps),e.value=n.value)}}}}function Eo(e,t,n,i,r,s,o,a,l,u,h,c,d){const p=e.def.nodes[t];return to(e,p,n,i,r,s,o,a,l,u,h,c,d),224&p.flags?Dn(e,t).value:void 0}function Po(e,t,n,i,r,s,o,a,l,u,h,c,d){const p=e.def.nodes[t];return io(e,p,n,i,r,s,o,a,l,u,h,c,d),224&p.flags?Dn(e,t).value:void 0}function Io(e){return Ho(Mo.detectChanges,eo,null,[e])}function Ao(e){return Ho(Mo.checkNoChanges,Xs,null,[e])}function ko(e){return Ho(Mo.destroy,so,null,[e])}const Mo=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();let Oo,Do,Ro;function No(e,t){Do=e,Ro=t}function Fo(e,t,n,i){return No(e,t),Ho(Mo.handleEvent,e.def.handleEvent,null,[e,t,n,i])}function Bo(e,t){if(128&e.state)throw Pn(Mo[Oo]);return No(e,Vo(e,0)),e.def.updateDirectives(function(e,n,i,...r){const s=e.def.nodes[n];return 0===t?jo(e,s,i,r):zo(e,s,i,r),16384&s.flags&&No(e,Vo(e,n)),224&s.flags?Dn(e,s.nodeIndex).value:void 0},e)}function Uo(e,t){if(128&e.state)throw Pn(Mo[Oo]);return No(e,qo(e,0)),e.def.updateRenderer(function(e,n,i,...r){const s=e.def.nodes[n];return 0===t?jo(e,s,i,r):zo(e,s,i,r),3&s.flags&&No(e,qo(e,n)),224&s.flags?Dn(e,s.nodeIndex).value:void 0},e)}function jo(e,t,n,i){if(to(e,t,n,...i)){const o=1===n?i[0]:i;if(16384&t.flags){const n={};for(let e=0;e<t.bindings.length;e++){const i=t.bindings[e],a=o[e];8&i.flags&&(n[(r=i.nonMinifiedName,s=void 0,s=r.replace(/[$@]/g,"_"),`ng-reflect-${r=s.replace(St,(...e)=>"-"+e[1].toLowerCase())}`)]=Et(a))}const i=t.parent,a=Mn(e,i.nodeIndex).renderElement;if(i.element.name)for(let t in n){const i=n[t];null!=i?e.renderer.setAttribute(a,t,i):e.renderer.removeAttribute(a,t)}else e.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var r,s}function zo(e,t,n,i){io(e,t,n,...i)}function Vo(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(16384&t.flags&&t.bindings&&t.bindings.length)return n}return null}function qo(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(3&t.flags&&t.bindings&&t.bindings.length)return n}return null}class Go{constructor(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];let n=this.nodeDef,i=e;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=Kn(i),i=i.parent;this.elDef=n,this.elView=i}get elOrCompView(){return Mn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Bi(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}get references(){const e={};if(this.elDef){Zo(this.elView,this.elDef,e);for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&Zo(this.elView,n,e),t+=n.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!Xn(e);)e=e.parent;return e.parent?Mn(e.parent,Kn(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?Qn(this.view,this.nodeDef):Qn(this.elView,this.elDef)}logError(e,...t){let n,i;2&this.nodeDef.flags?(n=this.view.def,i=this.nodeDef.nodeIndex):(n=this.elView.def,i=this.elDef.nodeIndex);const r=function(e,t){let n=-1;for(let i=0;i<=t;i++)3&e.nodes[i].flags&&n++;return n}(n,i);let s=-1;n.factory(()=>++s===r?e.error.bind(e,...t):Fn),s<r&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...t))}}function Zo(e,t,n){for(let i in t.references)n[i]=Fs(e,t,t.references[i])}function Ho(e,t,n,i){const r=Oo,s=Do,o=Ro;try{Oo=e;const l=t.apply(n,i);return Do=s,Ro=o,Oo=r,l}catch(a){if(xt(a)||!Do)throw a;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),En(e,t),e}(a,Wo())}}function Wo(){return Do?new Go(Do,Ro):null}class $o{constructor(e){this.delegate=e}createRenderer(e,t){return new Jo(this.delegate.createRenderer(e,t))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Jo{constructor(e){this.delegate=e,this.debugContextFactory=Wo,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){!function(e){vs.delete(e.nativeNode)}(bs(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,t){const n=this.delegate.createElement(e,t),i=this.createDebugContext(n);if(i){const t=new ys(n,null,i);t.name=e,ws(t)}return n}createComment(e){const t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&ws(new _s(t,null,n)),t}createText(e){const t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&ws(new _s(t,null,n)),t}appendChild(e,t){const n=bs(e),i=bs(t);n&&i&&n instanceof ys&&n.addChild(i),this.delegate.appendChild(e,t)}insertBefore(e,t,n){const i=bs(e),r=bs(t),s=bs(n);i&&r&&i instanceof ys&&i.insertBefore(s,r),this.delegate.insertBefore(e,t,n)}removeChild(e,t){const n=bs(e),i=bs(t);n&&i&&n instanceof ys&&n.removeChild(i),this.delegate.removeChild(e,t)}selectRootElement(e,t){const n=this.delegate.selectRootElement(e,t),i=Wo();return i&&ws(new ys(n,null,i)),n}setAttribute(e,t,n,i){const r=bs(e);r&&r instanceof ys&&(r.attributes[i?i+":"+t:t]=n),this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){const i=bs(e);i&&i instanceof ys&&(i.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}addClass(e,t){const n=bs(e);n&&n instanceof ys&&(n.classes[t]=!0),this.delegate.addClass(e,t)}removeClass(e,t){const n=bs(e);n&&n instanceof ys&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}setStyle(e,t,n,i){const r=bs(e);r&&r instanceof ys&&(r.styles[t]=n),this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){const i=bs(e);i&&i instanceof ys&&(i.styles[t]=null),this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){const i=bs(e);i&&i instanceof ys&&(i.properties[t]=n),this.delegate.setProperty(e,t,n)}listen(e,t,n){if("string"!=typeof e){const i=bs(e);i&&i.listeners.push(new gs(t,n))}return this.delegate.listen(e,t,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,t){return this.delegate.setValue(e,t)}}function Yo(e,t,n){return new Ko(e,t,n)}class Ko extends Wt{constructor(e,t,n){super(),this.moduleType=e,this._bootstrapComponents=t,this._ngModuleDefFactory=n}create(e){!function(){if(po)return;po=!0;const e=Ye()?{setCurrentNode:No,createRootView:mo,createEmbeddedView:_o,createComponentView:yo,createNgModuleRef:vo,overrideProvider:To,overrideComponentView:Co,clearOverrides:Lo,checkAndUpdateView:Io,checkNoChangesView:Ao,destroyView:ko,createDebugContext:(e,t)=>new Go(e,t),handleEvent:Fo,updateDirectives:Bo,updateRenderer:Uo}:{setCurrentNode:()=>{},createRootView:fo,createEmbeddedView:Ws,createComponentView:Js,createNgModuleRef:qi,overrideProvider:Fn,overrideComponentView:Fn,clearOverrides:Fn,checkAndUpdateView:eo,checkNoChangesView:Xs,destroyView:so,createDebugContext:(e,t)=>new Go(e,t),handleEvent:(e,t,n,i)=>e.def.handleEvent(e,t,n,i),updateDirectives:(e,t)=>e.def.updateDirectives(0===t?Eo:Po,e),updateRenderer:(e,t)=>e.def.updateRenderer(0===t?Eo:Po,e)};Nn.setCurrentNode=e.setCurrentNode,Nn.createRootView=e.createRootView,Nn.createEmbeddedView=e.createEmbeddedView,Nn.createComponentView=e.createComponentView,Nn.createNgModuleRef=e.createNgModuleRef,Nn.overrideProvider=e.overrideProvider,Nn.overrideComponentView=e.overrideComponentView,Nn.clearOverrides=e.clearOverrides,Nn.checkAndUpdateView=e.checkAndUpdateView,Nn.checkNoChangesView=e.checkNoChangesView,Nn.destroyView=e.destroyView,Nn.resolveDep=ur,Nn.createDebugContext=e.createDebugContext,Nn.handleEvent=e.handleEvent,Nn.updateDirectives=e.updateDirectives,Nn.updateRenderer=e.updateRenderer,Nn.dirtyParentQueries=Ds}();const t=function(e){const t=Array.from(e.providers),n=Array.from(e.modules),i={};for(const r in e.providersByKey)i[r]=e.providersByKey[r];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:i}}(si(this._ngModuleDefFactory));return Nn.createNgModuleRef(this.moduleType,e||De.NULL,this._bootstrapComponents,t)}}const Qo={production:!0,env:"prd",ualUrl:"https://ual.geoplatform.gov",wpUrl:"",root:"wp-content/plugins/geoplatform-map-preview/",assets:"/wp-content/plugins/geoplatform-map-preview/assets",rpmUrl:"https://rpm.geoplatform.gov",rpmToken:"f822e078fcb182110b5de9deeba85e7e"};var Xo=n("pU+3"),ea=n("9s/0"),ta=n("4R65");function na(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function ia(e){return function t(n){return 0===arguments.length||na(n)?t:e.apply(this,arguments)}}function ra(e){return function t(n,i){switch(arguments.length){case 0:return t;case 1:return na(n)?t:ia(function(t){return e(n,t)});default:return na(n)&&na(i)?t:na(n)?ia(function(t){return e(t,i)}):na(i)?ia(function(t){return e(n,t)}):e(n,i)}}}var sa=ra(function(e,t){for(var n=0,i=Math.min(e.length,t.length),r={};n<i;)r[e[n]]=t[n],n+=1;return r}),oa=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)},aa=ia(function(e){return!!oa(e)||!!e&&"object"==typeof e&&!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))}),la=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function ua(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,i){return t.apply(this,arguments)};case 4:return function(e,n,i,r){return t.apply(this,arguments)};case 5:return function(e,n,i,r,s){return t.apply(this,arguments)};case 6:return function(e,n,i,r,s,o){return t.apply(this,arguments)};case 7:return function(e,n,i,r,s,o,a){return t.apply(this,arguments)};case 8:return function(e,n,i,r,s,o,a,l){return t.apply(this,arguments)};case 9:return function(e,n,i,r,s,o,a,l,u){return t.apply(this,arguments)};case 10:return function(e,n,i,r,s,o,a,l,u,h){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var ha=ra(function(e,t){return ua(e.length,function(){return e.apply(t,arguments)})});function ca(e,t,n){for(var i=n.next();!i.done;){if((t=e["@@transducer/step"](t,i.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i=n.next()}return e["@@transducer/result"](t)}function da(e,t,n,i){return e["@@transducer/result"](n[i](ha(e["@@transducer/step"],e),t))}var pa="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function fa(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var ma=Object.prototype.toString,ga=function(){return"[object Arguments]"===ma.call(arguments)?function(e){return"[object Arguments]"===ma.call(e)}:function(e){return fa("callee",e)}}(),_a=!{toString:null}.propertyIsEnumerable("toString"),ya=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],va=function(){return arguments.propertyIsEnumerable("length")}(),ba=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},wa="function"!=typeof Object.keys||va?ia(function(e){if(Object(e)!==e)return[];var t,n,i=[],r=va&&ga(e);for(t in e)!fa(t,e)||r&&"length"===t||(i[i.length]=t);if(_a)for(n=ya.length-1;n>=0;)fa(t=ya[n],e)&&!ba(i,t)&&(i[i.length]=t),n-=1;return i}):ia(function(e){return Object(e)!==e?[]:Object.keys(e)}),xa=ra(function(e,t){return function(e,t,n){if("function"==typeof e&&(e=function(e){return new la(e)}(e)),aa(n))return function(e,t,n){for(var i=0,r=n.length;i<r;){if((t=e["@@transducer/step"](t,n[i]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return da(e,t,n,"fantasy-land/reduce");if(null!=n[pa])return ca(e,t,n[pa]());if("function"==typeof n.next)return ca(e,t,n);if("function"==typeof n.reduce)return da(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}(function(n,i){return n[i]=e(t[i],i,t),n},{},wa(t))});function Ta(e){return function t(n,i,r){switch(arguments.length){case 0:return t;case 1:return na(n)?t:ra(function(t,i){return e(n,t,i)});case 2:return na(n)&&na(i)?t:na(n)?ra(function(t,n){return e(t,i,n)}):na(i)?ra(function(t,i){return e(n,t,i)}):ia(function(t){return e(n,i,t)});default:return na(n)&&na(i)&&na(r)?t:na(n)&&na(i)?ra(function(t,n){return e(t,n,r)}):na(n)&&na(r)?ra(function(t,n){return e(t,i,n)}):na(i)&&na(r)?ra(function(t,i){return e(n,t,i)}):na(n)?ia(function(t){return e(t,i,r)}):na(i)?ia(function(t){return e(n,t,r)}):na(r)?ia(function(t){return e(n,i,t)}):e(n,i,r)}}}var Ca=Ta(function(e,t,n){var i,r={};for(i in t)fa(i,t)&&(r[i]=fa(i,n)?e(i,t[i],n[i]):t[i]);for(i in n)fa(i,n)&&!fa(i,r)&&(r[i]=n[i]);return r}),La=ra(function(e,t){return 1===e?ia(t):ua(e,function e(t,n,i){return function(){for(var r=[],s=0,o=t,a=0;a<n.length||s<arguments.length;){var l;a<n.length&&(!na(n[a])||s>=arguments.length)?l=n[a]:(l=arguments[s],s+=1),r[a]=l,na(l)||(o-=1),a+=1}return o<=0?i.apply(this,r):ua(o,e(t,r,i))}}(e,[],t))}),Sa=ia(function(e){return La(e.length,e)});const Ea=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Pa=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Ia(e){const t=["nb_uniq_visitors","nb_visits","nb_events","nb_events_with_value","sum_daily_nb_uniq_visitors"],n=(e,n,i)=>~t.indexOf(e)?n+i:n>i?n:i,i=Object.values(e),r=Object.keys(i[0]);let s=sa(r,Array(r.length).fill([]));const o=i.reduce((e,t)=>(Object.entries(t).map(([t,n])=>{e[t]=e[t].concat(n)}),s),s);return xa((e,t)=>e.length?[e.reduce((e,t)=>Ca(n,e,t))]:[],o)}class Aa{constructor(e){this.http=e,this.getAPIParams=Sa(function(e,t,n,i,r){return{label:r,method:t,period:n,date:i,token_auth:e,module:"API",format:"json",idSite:"all"}}),this.rpmUrl=Qo.rpmUrl,this.usageRequest=this.getAPIParams(Qo.rpmToken,"Events.getName")}getPastWeekUsage(e){return this.getUsageForRange(this.usageRequest("day","previous7",e)).pipe(R(Ia))}getPastMonthUsage(e){return this.getUsageForRange(this.usageRequest("day","previous30",e)).pipe(R(Ia))}getPastYearUsage(e){return this.getUsageForRange(this.usageRequest("month","last12",e)).pipe(R(Ia))}matomoISOtoPrettyDate(e,t){const[n,i,r]=e.split("-").map(e=>parseInt(e)),s=new Date(n,i-1,r||1);if("Invalid Date"===s.toString())return"";switch(t){case"week":return`${Pa[s.getDay()]} (${s.getMonth()+1}/${r})`;case"month":return` ${Ea[s.getMonth()]} ${r}`;case"year":return Ea[s.getMonth()];default:return e}}apiRequestToQueryString(e){return`?${Object.entries(e).map(([e,t])=>`${e}=${t}`).join("&")}`}getStats(e){return this.http.get(`${this.rpmUrl}${e}`)}getUsageForRange(e){return this.getStats(this.apiRequestToQueryString(e))}}ta.Icon.Default.imagePath=Qo.assets,ta.Icon.Default.mergeOptions({iconRetinaUrl:"marker-icon-2x.png",iconUrl:"marker-icon.png",shadowUrl:"marker-shadow.png"});const ka=e=>new Aa(e),Ma=Object(Xo.RPMServiceFactory)();class Oa{}class Da{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Ra(e,this.predicate,this.thisArg))}}class Ra extends m{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}class Na{}const Fa=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Ba=new ye("UseV4Plurals");class Ua{}let ja=(()=>(class extends Ua{constructor(e,t){super(),this.locale=e,this.deprecatedPluralFn=t}getPluralCategory(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){const t=e.toLowerCase().replace(/_/g,"-");let n=gr[t];if(n)return n;const i=t.split("-")[0];if(n=gr[i])return n;if("en"===i)return vr;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[_r.PluralCase]}(t||this.locale)(e)){case Fa.Zero:return"zero";case Fa.One:return"one";case Fa.Two:return"two";case Fa.Few:return"few";case Fa.Many:return"many";default:return"other"}}}))();function za(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[i,r]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(i.trim()===t)return decodeURIComponent(r)}return null}class Va{}let qa=(()=>(class{constructor(e,t,n,i){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=i,this._initialClasses=[]}getValue(){return null}setClass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ot(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ue(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}))(),Ga=(()=>{class e{constructor(e){this._delegate=e}getValue(){return this._delegate.getValue()}}return e.ngDirectiveDef=void 0,e})(),Za=(()=>(class extends Ga{constructor(e){super(e)}set klass(e){this._delegate.setClass(e)}set ngClass(e){this._delegate.setNgClass(e)}ngDoCheck(){this._delegate.applyChanges()}}))();class Ha{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wa=(()=>(class{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){Ye()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,i)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Ha(null,this._ngForOf,-1,-1),i),r=new $a(e,n);t.push(r)}else if(null==i)this._viewContainer.remove(n);else{const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new $a(e,r);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=i,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}))();class $a{constructor(e,t){this.record=e,this.view=t}}let Ja=(()=>(class{constructor(e,t){this._viewContainer=e,this._context=new Ya,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Ka("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Ka("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}))();class Ya{constructor(){this.$implicit=null,this.ngIf=null}}function Ka(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ue(t)}'.`)}let Qa=(()=>(class{}))();const Xa=new ye("DocumentToken");class el{}class tl{}class nl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),i=n.toLowerCase(),r=e.slice(t+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const i=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof nl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new nl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof nl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":const r=e.value;if(r){let e=this.headers.get(t);if(!e)return;0===(e=e.filter(e=>-1===r.indexOf(e))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class il{encodeKey(e){return rl(e)}encodeValue(e){return rl(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function rl(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class sl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new il,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.split("&").forEach(e=>{const i=e.indexOf("="),[r,s]=-1==i?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,i)),t.decodeValue(e.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).join("&")}clone(e){const t=new sl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function ol(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function al(e){return"undefined"!=typeof Blob&&e instanceof Blob}function ll(e){return"undefined"!=typeof FormData&&e instanceof FormData}class ul{constructor(e,t,n,i){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new nl),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new sl,this.urlWithParams=t}serializeBody(){return null===this.body?null:ol(this.body)||al(this.body)||ll(this.body)||"string"==typeof this.body?this.body:this.body instanceof sl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:ll(this.body)?null:al(this.body)?this.body.type||null:ol(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,i=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,o=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(l=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),l)),new ul(t,n,r,{params:l,headers:a,reportProgress:o,responseType:i,withCredentials:s})}}const hl=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}();class cl{constructor(e,t=200,n="OK"){this.headers=e.headers||new nl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class dl extends cl{constructor(e={}){super(e),this.type=hl.ResponseHeader}clone(e={}){return new dl({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class pl extends cl{constructor(e={}){super(e),this.type=hl.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new pl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class fl extends cl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ml(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let gl=(()=>(class{constructor(e){this.handler=e}request(e,t,n={}){let i;if(e instanceof ul)i=e;else{let r=void 0;r=n.headers instanceof nl?n.headers:new nl(n.headers);let s=void 0;n.params&&(s=n.params instanceof sl?n.params:new sl({fromObject:n.params})),i=new ul(e,t,void 0!==n.body?n.body:null,{headers:r,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=function(...e){let t=e[e.length-1];return S(t)?(e.pop(),B(e,t)):G(e)}(i).pipe(j(e=>this.handler.handle(e),void 0,1));if(e instanceof ul||"events"===n.observe)return r;const s=r.pipe((o=e=>e instanceof pl,function(e){return e.lift(new Da(o,void 0))}));var o;switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe(R(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(R(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(R(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(R(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new sl).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,ml(n,t))}post(e,t,n={}){return this.request("POST",e,ml(n,t))}put(e,t,n={}){return this.request("PUT",e,ml(n,t))}}))();class _l{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const yl=new ye("HTTP_INTERCEPTORS");let vl=(()=>(class{intercept(e,t){return t.handle(e)}}))(),bl=0;class wl{}let xl=(()=>(class{constructor(e,t){this.callbackMap=e,this.document=t}nextCallback(){return`ng_jsonp_callback_${bl++}`}handle(e){if("JSONP"!==e.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==e.responseType)throw new Error("JSONP requests must use Json response type.");return new y(t=>{const n=this.nextCallback(),i=e.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,`=${n}$1`),r=this.document.createElement("script");r.src=i;let s=null,o=!1,a=!1;this.callbackMap[n]=e=>{delete this.callbackMap[n],a||(s=e,o=!0)};const l=()=>{r.parentNode&&r.parentNode.removeChild(r),delete this.callbackMap[n]},u=e=>{a||(l(),o?(t.next(new pl({body:s,status:200,statusText:"OK",url:i})),t.complete()):t.error(new fl({url:i,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")})))},h=e=>{a||(l(),t.error(new fl({error:e,status:0,statusText:"JSONP Error",url:i})))};return r.addEventListener("load",u),r.addEventListener("error",h),this.document.body.appendChild(r),t.next({type:hl.Sent}),()=>{a=!0,r.removeEventListener("load",u),r.removeEventListener("error",h),l()}})}}))(),Tl=(()=>(class{constructor(e){this.jsonp=e}intercept(e,t){return"JSONP"===e.method?this.jsonp.handle(e):t.handle(e)}}))();const Cl=/^\)\]\}',?\n/;class Ll{}let Sl=(()=>(class{constructor(){}build(){return new XMLHttpRequest}}))(),El=(()=>(class{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new y(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const i=e.serializeBody();let r=null;const s=()=>{if(null!==r)return r;const t=1223===n.status?204:n.status,i=n.statusText||"OK",s=new nl(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return r=new dl({headers:s,status:t,statusText:i,url:o})},o=()=>{let{headers:i,status:r,statusText:o,url:a}=s(),l=null;204!==r&&(l=void 0===n.response?n.responseText:n.response),0===r&&(r=l?200:0);let u=r>=200&&r<300;if("json"===e.responseType&&"string"==typeof l){const e=l;l=l.replace(Cl,"");try{l=""!==l?JSON.parse(l):null}catch(h){l=e,u&&(u=!1,l={error:h,text:l})}}u?(t.next(new pl({body:l,headers:i,status:r,statusText:o,url:a||void 0})),t.complete()):t.error(new fl({error:l,headers:i,status:r,statusText:o,url:a||void 0}))},a=e=>{const{url:i}=s(),r=new fl({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});t.error(r)};let l=!1;const u=i=>{l||(t.next(s()),l=!0);let r={type:hl.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===e.responseType&&n.responseText&&(r.partialText=n.responseText),t.next(r)},h=e=>{let n={type:hl.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),e.reportProgress&&(n.addEventListener("progress",u),null!==i&&n.upload&&n.upload.addEventListener("progress",h)),n.send(i),t.next({type:hl.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",o),e.reportProgress&&(n.removeEventListener("progress",u),null!==i&&n.upload&&n.upload.removeEventListener("progress",h)),n.abort()}})}}))();const Pl=new ye("XSRF_COOKIE_NAME"),Il=new ye("XSRF_HEADER_NAME");class Al{}let kl=(()=>(class{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=za(e,this.cookieName),this.lastCookieString=e),this.lastToken}}))(),Ml=(()=>(class{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const i=this.tokenService.getToken();return null===i||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,i)})),t.handle(e)}}))(),Ol=(()=>(class{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(yl,[]);this.chain=e.reduceRight((e,t)=>new _l(e,t),this.backend)}return this.chain.handle(e)}}))();function Dl(){return"object"==typeof window?window:{}}let Rl=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:Ml,useClass:vl}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:Pl,useValue:t.cookieName}:[],t.headerName?{provide:Il,useValue:t.headerName}:[]]}}}return e})(),Nl=(()=>(class{}))(),Fl=(()=>(class{}))();n("r8II");class Bl{constructor(e,t){}setUserId(e){}logPageView(e){}logSearch(e,t){}logEvent(e,t,n){}}class Ul extends ea.GPHttpClient{constructor(e,t){super(t),this.http=e}setZone(e){this.zone=e}createRequestOpts(e){let t={};t.responseType=e.options&&e.options.responseType?e.options.responseType:"json",e.params&&(t.params=new sl({fromObject:e.params})),e.data&&(t.body=e.data),t.headers=new nl;let n=this.getToken();return n&&t.headers.set("Authorization","Bearer "+n),t.body?new ul(e.method,e.url,t.body,t):new ul(e.method,e.url,t)}execute(e){let t=null;return new Promise((n,i)=>{this.http.request(e).pipe(R(e=>e instanceof pl?e.body:{})).subscribe(e=>{t=e},e=>{i(e)},()=>{this.zone?this.zone.run(()=>{n(t)}):n(t)})})}}var jl=null,zl=null,Vl=null,ql=null,Gl=null,Zl=null,Hl=null;function Wl(e){return zl||(null===jl&&(jl=new Ul(e)),zl=new ea.ItemService(ea.Config.ualUrl,jl))}function $l(e){return Vl||(null===jl&&(jl=new Ul(e)),Vl=new ea.ServiceService(ea.Config.ualUrl,jl))}function Jl(e){return Zl||(null===jl&&(jl=new Ul(e)),Zl=new ea.LayerService(ea.Config.ualUrl,jl))}function Yl(e){return ql||(null===jl&&(jl=new Ul(e)),ql=new ea.UtilsService(ea.Config.ualUrl,jl))}function Kl(e){return Gl||(null===jl&&(jl=new Ul(e)),Gl=new ea.KGService(ea.Config.ualUrl,jl))}const Ql=new class{constructor(){this.isDev="development"===Qo.env}log(e,...t){let n=this.toStr(e);n+=t.map(e=>this.toStr(e)).join(""),console.log(n)}debug(e,...t){if(!this.isDev)return;let n="[DEBUG] "+this.toStr(e);this.log(n,...t)}error(e,...t){let n="[ERROR] "+this.toStr(e);this.log(n,...t)}warn(e,...t){let n="[WARN] "+this.toStr(e);this.log(n,...t)}toStr(e){return null==e?"":"string"==typeof e?e:JSON.stringify(e)}},Xl={ON:Symbol("on"),OFF:Symbol("off"),ADD:Symbol("add"),DEL:Symbol("del"),VIZ:Symbol("viz"),BASE:Symbol("base"),EXTENT:Symbol("extent")};class eu{constructor(e){this.details={id:null,uri:null,type:ea.ItemTypes.MAP,title:null,description:null,createdBy:null,resourceTypes:[],keywords:[],layers:[],themes:[],topics:[],publishers:[],usedBy:[],classifiers:{},extent:null},this.data=[],this.selected={},this.visibility={},this.sub=new C,this.itemService=e}getDetails(){return this.details}setDetails(e){Object.keys(this.details).forEach(t=>{if("resourceTypes"===t&&e.type!==ea.ItemTypes.MAP)return;let n=e[t]||null;if(this.details[t])if(Array.isArray(n)){let e="keywords"!==t,i=(this.details[t]||[]).concat(n);if(e){let e=[];const n=new Map;for(const t of i)n.has(t.id)||(n.set(t.id,!0),e.push(t));this.details[t]=e}else this.details[t]=[...Array.from(new Set(i))]}else"extent"===t&&(this.details.extent?(this.details.extent.minx||(this.details.extent.minx=n.minx||-120),this.details.extent.miny||(this.details.extent.miny=n.miny||20),this.details.extent.maxx||(this.details.extent.maxx=n.maxx||-76),this.details.extent.maxy||(this.details.extent.maxy=n.maxy||50)):this.details.extent=n);else this.details[t]=n})}processItem(e){if(!e)throw new Error("Nothing exists to be processed into renderables");let t=e;Array.isArray(e)||(t=[e]);let n=[],i=[],r=[];t.forEach(e=>{let t=e.type;t?(this.details.title||this.setDetails(e),ea.ItemTypes.DATASET===t?n.push(e):ea.ItemTypes.SERVICE===t?i.push(e):ea.ItemTypes.LAYER===t&&r.push(e)):Ql.warn("Item ("+e.id+") has no type and therefore cannot be previewed")}),n.length&&this.processDatasets(n),i.length&&this.processServices(i),r.length&&this.processLayers(r)}processDatasets(e){let t=[];e.map(e=>{t=t.concat((e.services||[]).map(e=>e.id))});let n=(new ea.Query).fields("*").types(ea.ItemTypes.LAYER).page(0).pageSize(100);n.setParameter("service",t.join(",")),this.searchItems(n)}processServices(e){let t=(new ea.Query).fields("*").types(ea.ItemTypes.LAYER).page(0).pageSize(100);t.setParameter("service",e.map(e=>e.id).join(",")),this.searchItems(t)}processLayers(e){this.addData(e)}searchItems(e){let t=e.getPage(),n=e.getPageSize();this.itemService.search(e).then(i=>{let r=null;if(t*n>50&&(r="More layers exist but are not available for performance reasons"),setTimeout(()=>{this.addData(i.results,r)}),i.totalResults>t*n+n){if(t*n>50)return;e.setPage(t+1),setTimeout(()=>{this.searchItems(e)})}}).catch(e=>{Ql.error("Error searching for items: "+e.message)})}setExtent(e){this.extent=e,this.sub.next({type:Xl.EXTENT,data:[e]})}getExtent(){return this.extent}addData(e,t){Array.isArray(e)?this.data=this.data.concat(e):this.data.push(e),this.adjustExtent();let n={type:Xl.ADD,data:Array.isArray(e)?e:[e]};t&&(n.warning=t),this.sub.next(n)}removeData(e){let t=this.data.findIndex(t=>t.id===e.id);if(t>-1){this.data.splice(t,1);let n={type:Xl.DEL,data:[e]};this.adjustExtent(),this.sub.next(n)}}getData(){return this.data}getSelected(e){return this.data.filter(e=>!!this.selected[e.id])}toggleData(e){let t=e;Array.isArray(e)||(t=[e]);let n=Xl.ON;t.forEach(e=>{this.selected[e.id]=!this.selected[e.id],this.selected[e.id]?this.visibility[e.id]=!0:(n=Xl.OFF,this.visibility[e.id]=!1)}),this.sub.next({type:n,data:t})}isSelected(e){let t=this.getId(e);return!!this.selected[t]}isVisible(e){let t=this.getId(e);return!!this.visibility[t]}toggleVisibility(e){e&&e.id&&(this.visibility[e.id]=!this.visibility[e.id],this.trigger({type:Xl.VIZ,data:[e]}))}getId(e){if(!e)return null;let t=null;return void 0!==e.id?t=e.id:"string"==typeof e&&(t=e),t}setBaseLayer(e,t){this.details.baseLayer=e,(void 0===t||!0===t)&&this.sub.next({type:Xl.BASE,data:[e]})}getBaseLayer(){return this.details.baseLayer}trigger(e){if(!e)return null;Xl.BASE===e.type&&this.setBaseLayer(e.data[0],!1),this.sub.next(e)}subscribe(e){return this.sub.subscribe(e)}adjustExtent(){let e={minx:179,maxx:-179,miny:89,maxy:-89};this.data.forEach(t=>{let n=t.extent;n&&(e.minx=Math.min(e.minx,n.minx||179),e.miny=Math.min(e.miny,n.miny||89),e.maxx=Math.max(e.maxx,n.maxx||-179),e.maxy=Math.max(e.maxy,n.maxy||-89))}),this.extent=e}}class tu{constructor(){}static isAsset(e){if(!e)return!1;let t=null;return"string"==typeof e?t=e:e.type&&(t=e.type),t&&(t===ea.ItemTypes.DATASET||t===ea.ItemTypes.SERVICE||t===ea.ItemTypes.LAYER||t===ea.ItemTypes.MAP||t===ea.ItemTypes.GALLERY||t===ea.ItemTypes.COMMUNITY||t===ea.ItemTypes.APPLICATION||t===ea.ItemTypes.TOPIC||t===ea.ItemTypes.WEBSITE)}static getIcon(e){return e?"string"==typeof e?this.determineIconType(e):e.type?this.determineIconType(e.type):null:null}static getLabel(e){if(!e||!e.type)return"Unknown type";switch(e.type){case ea.ItemTypes.ORGANIZATION:case ea.ItemTypes.PERSON:return e.label||e.name||"Un-titled resource";case ea.ItemTypes.CONCEPT:case ea.ItemTypes.CONCEPT_SCHEME:return e.label||e.prefLabel||"Un-titled resource";case ea.ItemTypes.CONTACT:let t=e.fullName||"",n=e.positionTitle||"",i=t+(t.length?" - ":"")+n+(n.length?" - ":"")+(e.orgName||"");return i.length||(i=e.email||"Untitled Contact"),i;default:return e.label||e.title||"Un-titled resource"}}static getTypeLabel(e){if(!e)return"Unknown Resource Type";let t=null;if("string"==typeof e)t=e;else{if(!e.type)return null;t=e.type}switch(t){case ea.ItemTypes.DATASET:case ea.ItemTypes.SERVICE:case ea.ItemTypes.PERSON:case ea.ItemTypes.ORGANIZATION:case ea.ItemTypes.CONCEPT:return t.replace(/^[a-z]+\:/i,"");case ea.ItemTypes.CONCEPT_SCHEME:return"Concept Scheme";case ea.ItemTypes.WEBSITE:return"Website";case ea.ItemTypes.CONTACT:return"Contact";default:return t}}static getTypeKey(e){if(!e)return null;let t=null;if("string"==typeof e)t=e;else{if(!e.type)return null;t=e.type}switch(t){case ea.ItemTypes.GALLERY:return"galleries";case ea.ItemTypes.COMMUNITY:return"communities";case ea.ItemTypes.CONTACT:return"contacts";default:return t.replace(/^[a-z]+\:/i,"").toLowerCase()+"s"}}static determineIconType(e){let t=e.replace(/^[a-z]+\:/i,"").toLowerCase();return`${Qo.assets}/icons/${t}.svg`}}class nu{constructor(e){this.authService=e}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}init(){this.gpAuthSubscription=this.authService.subscribe({next:e=>{this.user=e,this.onUserChange(this.user)},error:e=>{Ql.error("Unable to get authenticated user info: ",e.message)},complete:()=>{}})}destroy(){this.gpAuthSubscription.unsubscribe(),this.gpAuthSubscription=null,this.user=null,this.authService=null}isAuthenticated(){return!!this.user}getUser(){return this.user}getAuthToken(){return this.authService.getToken()}checkAuth(){return this.authService.check()}onUserChange(e){}}function iu(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,a)}l((i=i.apply(e,t||[])).next())})}var ru=n("vDqi"),su=n.n(ru);class ou{constructor(e){this.id=e.sub,this.username=e.username,this.name=e.name,this.email=e.email,this.org=e.orgs[0]&&e.orgs[0].name,this.groups=e.groups,this.roles=e.roles,this.exp=e.exp}toJSON(){return JSON.parse(JSON.stringify(Object.assign({},this)))}clone(){return Object.assign({},this)}compare(e){return e instanceof ou?this.id===e.id:"object"==typeof e&&void 0!==e.id&&e.id===this.id}isAuthorized(e){return this.groups&&!!this.groups.map(e=>e.name).filter(t=>t===e).length}}const au="gpoauthJWT",lu="<REVOKED>";function uu(e,t){return iu(this,void 0,void 0,function*(){return(yield su.a.get(e,{headers:{Authorization:t?`Bearer ${t}`:""},responseType:"json"})).data})}class hu{constructor(e,t){const n=this;this.config=e,this.messenger=t,addEventListener("message",e=>{"iframe:userAuthenticated"===e.data&&n.init(),"userSignOut"===e.data&&n.removeAuth()}),n.init().then(e=>{this.config.ALLOW_SSO_LOGIN&&!e&&"grant"===this.config.AUTH_TYPE&&n.ssoCheck()})}getMessenger(){return this.messenger}saveToLocalStorage(e,t){localStorage.setItem(e,btoa(t))}getFromLocalStorage(e){const t=localStorage.getItem(e);try{return t?atob(t):void 0}catch(n){return}}ssoCheck(){const e=this,t=`${this.config.APP_BASE_URL}/login?sso=true&cachebuster=${(new Date).getTime()}`,n=this.createIframe(t);addEventListener("message",t=>{"iframe:ssoFailed"===t.data&&(n&&n.remove&&n.remove(),this.config.FORCE_LOGIN&&e.forceLogin()),"iframe:userAuthenticated"===t.data&&n&&n.remove&&n.remove()})}init(){return iu(this,void 0,void 0,function*(){const e=this.getJWT();return this.getJWTFromUrl()&&this.removeTokenFromUrl(),e?(this.setAuth(e),this.getUserFromJWT(e)):yield this.getUser()})}removeTokenFromUrl(){const e=/[\?\&]access_token=.*(\&token_type=Bearer)?/;window.history&&window.history.replaceState?window.history.replaceState({},"Remove token from URL",window.location.href.replace(e,"")):window.location.search.replace(e,"")}createIframe(e){let t=document.createElement("iframe");return t.style.display="none",t.src=e,document.body.appendChild(t),t}login(e){const t=e?`${window.location.origin}${e}`:this.config.CALLBACK?this.config.CALLBACK:window.location.href;"token"===this.config.AUTH_TYPE?window.location.href=this.config.IDP_BASE_URL+`/auth/authorize?client_id=${this.config.APP_ID}`+`&response_type=${this.config.AUTH_TYPE}`+`&redirect_uri=${encodeURIComponent(t||"/login")}`:this.config.ALLOW_IFRAME_LOGIN?this.messenger.broadcast("auth:requireLogin"):window.location.href=this.config.LOGIN_URL||`/login?redirect_url=${encodeURIComponent(t)}`}logout(){return iu(this,void 0,void 0,function*(){this.config.IDP_BASE_URL&&this.createIframe(`${this.config.IDP_BASE_URL}/auth/logout`),yield uu(`${this.config.APP_BASE_URL}/revoke?sso=true`,this.getJWT()),this.removeAuth(),this.config.LOGOUT_URL&&(window.location.href=this.config.LOGOUT_URL),this.config.FORCE_LOGIN&&this.forceLogin()})}forceLogin(){this.login()}getOauthProfile(){return iu(this,void 0,void 0,function*(){const e=this.getJWT();return e?yield uu(`${this.config.IDP_BASE_URL}/api/profile`,e):null})}getUserFromJWT(e){const t=this.parseJwt(e);return t?new ou(Object.assign({},t,{id:t.sub})):null}getUserSync(e){const t=this.getJWT();return this.isImplicitJWT(t)&&this.isExpired(t)?null:this.getUserFromJWT(t)}getUser(){return iu(this,void 0,void 0,function*(){return(yield this.check())||(this.config.ALLOW_IFRAME_LOGIN&&this.config.FORCE_LOGIN&&this.messenger.on("userAuthenticated",(e,t)=>t),this.config.ALLOW_IFRAME_LOGIN&&!this.config.FORCE_LOGIN?null:!this.config.ALLOW_IFRAME_LOGIN&&this.config.FORCE_LOGIN?(addEventListener("message",e=>{if("iframe:ssoFailed"===e.data)return this.getUser()}),null):this.config.ALLOW_IFRAME_LOGIN||this.config.FORCE_LOGIN?void 0:null)})}check(){return iu(this,void 0,void 0,function*(){const e=this.getJWT();if(!e){const t=yield this.checkWithClient("");return e&&e.length?this.getUserFromJWT(t):null}return this.isImplicitJWT(e)?this.isExpired(e)?Promise.reject(null):this.getUserFromJWT(e):this.isExpired(e)?yield this.checkWithClient(e).then(e=>this.getUserFromJWT(e)):this.getUserFromJWT(e)})}checkWithClient(e){return iu(this,void 0,void 0,function*(){if("token"===this.config.AUTH_TYPE)return null;{const t=(yield su()(`${this.config.APP_BASE_URL}/checktoken`,{headers:{Authorization:e?`Bearer ${e}`:""}})).headers.authorization,n=t&&t.replace("Bearer","").trim();return t&&n.length&&this.setAuth(n),n||e}})}getJWTFromUrl(){const e=(window&&window.location&&window.location.hash?window.location.hash:window.location.toString()).match(/access_token=([^\&]*)/);return e&&e[1]}getJWTfromLocalStorage(){return this.getFromLocalStorage(au)}getJWT(){const e=this.getJWTFromUrl()||this.getJWTfromLocalStorage();return!e||e&&this.isImplicitJWT(e)&&this.isExpired(e)?null:e}clearLocalStorageJWT(){localStorage.removeItem(au)}isExpired(e){const t=this.parseJwt(e);return!t||(new Date).getTime()/1e3>t.exp}isImplicitJWT(e){const t=this.parseJwt(e);return t&&t.implicit}parseJwt(e){var t;if(e)try{var n=e.split(".")[1].replace("-","+").replace("_","/");t=JSON.parse(atob(n))}catch(i){}return t}validateJwt(e){var t=this.parseJwt(e);return!!(t&&t.exp&&1e3*t.exp>Date.now())}setAuth(e){e==lu?this.logout():(this.saveToLocalStorage(au,e),this.messenger.broadcast("userAuthenticated",this.getUserFromJWT(e)))}removeAuth(){localStorage.removeItem(au),this.messenger.broadcast("userAuthenticated",null),this.messenger.broadcast("userSignOut")}}const cu={AUTH_TYPE:"grant",APP_BASE_URL:"",ALLOW_IFRAME_LOGIN:!0,FORCE_LOGIN:!1,ALLOW_DEV_EDITS:!1,ALLOW_SSO_LOGIN:!0};class du{constructor(){this.sub=new C}raw(){return this.sub}broadcast(e,t){this.sub.next({name:e,user:t})}on(e,t){this.sub.filter(t=>t.name===e).subscribe(e=>t(new Event(e.name),e.user))}}const pu=["AUTH_TYPE","IDP_BASE_URL","APP_BASE_URL","ALLOW_SSO_LOGIN","APP_ID","ALLOW_IFRAME_LOGIN","FORCE_LOGIN","CALLBACK","LOGIN_URL","LOGOUT_URL","ALLOW_DEV_EDITS"];var fu=null;class mu{constructor(){this.authService=function(){if(!Qo.production)return null;if(fu)return fu;let e={},t=window.GeoPlatform;return t&&t.config&&t.config.auth?e=t.config.auth:(e.APP_BASE_URL=Qo.wpUrl||"",pu.forEach(t=>{let n=Qo[t];void 0!==n&&((~t.indexOf("ALLOW")||~t.indexOf("FORCE"))&&(n=!0===n||"true"===n),e[t]=n)})),fu=new hu(Object.assign({},cu,e),new du)}(),this.rpm=Hl||(Hl=new Bl(Qo.rpmUrl,Qo.rpmToken)),this.init()}init(){if(this.user$=new C,!this.authService)return;const e=this.authService.getMessenger().raw();this.gpAuthSubscription=e.subscribe(e=>{switch(e.name){case"userAuthenticated":this.onUserChange(e.user);break;case"userSignOut":this.onUserChange(null)}}),this.authService.checkWithClient(null).then(e=>e?this.authService.getUser():null).then(e=>{this.onUserChange(e)}).catch(e=>{this.onUserChange(null)})}onUserChange(e){Ql.debug("User: "+(e?e.username:"N/A")),this.user=e,this.rpm.setUserId(e?e.id:null),this.user$.next(e)}isAuthenticated(){return!!this.user}getUser(){return this.user}getToken(){return this.authService?this.authService.getJWT():null}check(){return this.authService?(Ql.debug("Checking with auth service for token"),this.authService.check().then(e=>(setTimeout(()=>{this.onUserChange(e)},100),e))):(Ql.warn("No auth service to check token with..."),Promise.resolve(null))}subscribe(e){return this.user$.subscribe(e)}dispose(){this.gpAuthSubscription&&(this.gpAuthSubscription.unsubscribe(),this.gpAuthSubscription=null),this.user=null,this.user$=null,this.authService=null}}const gu=/resources\/([A-Za-z]+)\/([a-z0-9]+)\/map/i;class _u extends nu{constructor(e,t){super(e),this.itemService=Wl(t),this._authService=e,this.data=new eu(this.itemService)}ngOnInit(){super.ngOnInit();let e=this.parseURL();e&&e.id?this.itemService.get(e.id).then(e=>{this.item=e,this.processItem(this.item)}).catch(e=>{this.error=e}):this.error=new Error("The URL provided did not contain a valid GeoPlatform resource identifier")}ngOnDestroy(){super.ngOnDestroy(),this.itemService=null,this.item=null,this.error=null,this._authService.dispose(),this._authService=null}parseURL(){let e=window.location.href,t=gu.exec(e);return t&&t.length?{id:t[2],type:t[1]}:null}processItem(e){if(e)if(e.type)try{this.data.processItem(e)}catch(t){this.error=t}else this.error=new Error("Requested item has no type and therefore cannot be previewed");else this.error=new Error("Nothing exists to be processed into renderables")}getTypeKey(){return tu.getTypeKey(this.item)}}var yu=n("EVdn"),vu=n("ArNd");const bu=/OGC.+\(([A-Z\-]+)\)/,wu=/Esri REST ([A-Za-z]+) Service/,xu=(e,t)=>{let n=e.exec(t);return n&&n.length?n[1]:null};var Tu={ESRI_FEATURE_SERVER:{id:"48980c5bad0c8d4666b393874eb5279a",uri:"http://www.geoplatform.gov/spec/esri-feature-rest",type:"dct:Standard",description:"Esri ArcGIS Feature Server REST API",label:"Esri REST Feature Service"},ESRI_IMAGE_SERVER:{id:"bcdf764e52064c84323f3f1baea7e245",uri:"http://www.geoplatform.gov/spec/esri-image-rest",type:"dct:Standard",description:"Esri ArcGIS Image Server REST API",label:"Esri REST Image Service"},ESRI_MAP_SERVER:{id:"370cf6ca5d91c07b63329b8384fe76c7",uri:"http://www.geoplatform.gov/spec/esri-map-rest",type:"dct:Standard",description:"Esri ArcGIS Map Server REST API",label:"Esri REST Map Service"},ESRI_TILE_SERVER:{id:"c75570ff2523b1a1631afe7ddac27beb",uri:"http://www.geoplatform.gov/spec/esri-tile-rest",type:"dct:Standard",description:"Esri ArcGIS Tile Server REST API",label:"Esri REST Tile Service"},KML:{id:"c0b39ca2049ba2184472ff27408ffd7e",uri:"http://opengis.net/spec/kml",type:"dct:Standard",description:"OGC Keyhole Markup Language (KML)",label:"OGC Keyhole Markup Language (KML)"},CSW:{id:"60de6a422475493b7901ae453d6f4562",uri:"http://opengis.net/spec/csw",type:"dct:Standard",description:"OGC Web Catalog Service (CSW)",label:"OGC Web Catalog Service (CSW)"},WCS:{id:"a7e5a2d81a83d4eae9bf9138f24d0a32",uri:"http://opengis.net/spec/wcs",type:"dct:Standard",description:"OGC Web Coverage Service (WCS)",label:"OGC Web Coverage Service (WCS)"},WFS:{id:"e70e43ed52f83634285a09e959734bff",uri:"http://opengis.net/spec/wfs",type:"dct:Standard",description:"OGC Web Feature Service (WFS)",label:"OGC Web Feature Service (WFS)"},WMS:{id:"abed5a00c536fb2d7019092c37ed634c",uri:"http://opengis.net/spec/wms",type:"dct:Standard",description:"OGC Web Map Service (WMS)",label:"OGC Web Map Service (WMS)"},WMTS:{id:"757858ae77cf8c602b39294c27632dd7",uri:"http://opengis.net/spec/wmts",type:"dct:Standard",description:"OGC Web Map Tile Service (WMTS)",label:"OGC Web Map Tile Service (WMTS)"},WMST:{id:"faae5bff49b1144d500380cbc055c1e5",uri:"http://www.geoplatform.gov/spec/ogc-wms-t",type:"dct:Standard",description:"OGC WMS support for temporal according to OGC Best Practice guidance",label:"OGC WMS-T Service"},FEED:{id:"8edc61870e534a1f23dc967753da3b72",uri:"http://www.geoplatform.gov/spec/feed",type:"dct:Standard",description:"GeoPlatform GeoJSON Feed Service converts an Atom/RSS feed (including GeoRSS and CAP extensions) to GeoJSON",label:"GeoPlatform GeoJSON Feed Service"},refresh:function(e){let t=ea.Config.ualUrl;if(t){let n=Object(ea.QueryFactory)().types("dct:Standard").resourceTypes("ServiceType").pageSize(50),i=null;(i=e&&void 0!==e.search?e:new ea.ItemService(t,new ea.XHRHttpClient)).search(n).then(e=>{for(let t=0;t<e.results.length;++t){let n=e.results[t],i=null,r=n.label;~r.indexOf("WMS-T")?(i="WMST",n.supported=!0):~r.indexOf("OGC")?(i=xu(bu,r),n.supported="WMS"===i||"WMTS"===i):~r.indexOf("Esri")?(i=xu(wu,r),n.supported=!0,i="ESRI_"+i.toUpperCase()+"_SERVER"):~r.indexOf("Feed")?(i="FEED",n.supported=!0):i=r,Tu[i]=n}}).catch(e=>{console.log("Error loading supported service types: "+e.message)})}else console.log("WARN : ServiceTypes - no GeoPlatform API URL configured, unable to load service types")}},Cu=Tu;n("cxmq");var Lu=vu.FeatureManager.extend({statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose",CLUSTEREVENTS:"clusterclick clusterdblclick clustermouseover clustermouseout clustermousemove clustercontextmenu"},initialize:function(e){vu.FeatureManager.prototype.initialize.call(this,e),e=ta.Util.setOptions(this,e),this._layers={},this._leafletIds={},this.cluster=new ta.MarkerClusterGroup(e),this._key="c"+(1e9*Math.random()).toString(36).replace(".","_"),this.cluster.addEventParent(this)},onAdd:function(e){vu.FeatureManager.prototype.onAdd.call(this,e),this._map.addLayer(this.cluster)},onRemove:function(e){vu.FeatureManager.prototype.onRemove.call(this,e),this._map.removeLayer(this.cluster)},createLayers:function(e){for(var t=[],n=e.length-1;n>=0;n--){var i=e[n];if(!this._layers[i.id]){var r=ta.GeoJSON.geometryToLayer(i,this.options);r.feature=ta.GeoJSON.asFeature(i),r.defaultOptions=r.options,r._leaflet_id=this._key+"_"+i.id,this.resetStyle(r.feature.id),this._layers[r.feature.id]=r,this._leafletIds[r._leaflet_id]=i.id,this.options.onEachFeature&&this.options.onEachFeature(r.feature,r),this.fire("createfeature",{feature:r.feature}),(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(i))&&t.push(r)}}t.length&&this.cluster.addLayers(t)},addLayers:function(e){for(var t=[],n=e.length-1;n>=0;n--){var i=this._layers[e[n]];this.fire("addfeature",{feature:i.feature}),t.push(i)}this.cluster.addLayers(t)},removeLayers:function(e,t){for(var n=[],i=e.length-1;i>=0;i--){var r=e[i],s=this._layers[r];this.fire("removefeature",{feature:s.feature,permanent:t}),n.push(s),this._layers[r]&&t&&delete this._layers[r]}this.cluster.removeLayers(n)},resetStyle:function(e){var t=this._layers[e];return t&&(t.options=t.defaultOptions,this.setFeatureStyle(t.feature.id,this.options.style)),this},setStyle:function(e){return this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},setFeatureStyle:function(e,t){var n=this._layers[e];"function"==typeof t&&(t=t(n.feature)),n.setStyle&&n.setStyle(t)},eachFeature:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getFeature:function(e){return this._layers[e]}});const Su=yu;var Eu=function(e){return new Promise((t,n)=>{Su||n(new Error("Unable to load feature layer style, jQuery is not installed")),Su.ajax({url:ea.Config.ualUrl+"/api/layers/"+e+"/style",dataType:"json",success:function(e){t(e)},error:function(t,i,r){n(new Error(`FeatureStyleResolver() -\n                   Error loading style information for layer ${e} : ${r}`))}})})},Pu=function(e){let t=Object.keys(e.properties);const n=function(e,t){return e&&e.find?e.find(e=>{let n=e.toLowerCase();return t.indexOf(n)>=0}):null};let i=n(t,["title","name","label"]),r=i?e.properties[i]:"Untitled",s=n(t,["description","summary","descript"]),o='<div class="feature-popup"><h5>'+r+"</h5><p>"+(s?e.properties[s]:"No description provided")+"</p>";if(e.properties.modified&&(o+='<div><span class="label">Updated</span><span class="value">'+new Date(e.properties.modified).toDateString()+"</span></div>"),e.properties["cap:effective"]){let t=new Date(e.properties["cap:effective"]);o+='<div><span class="label">Effective</span><span class="value">'+t.toDateString()+" "+t.toTimeString()+"</span></div>"}if(e.properties["cap:expires"]){let t=new Date(e.properties["cap:expires"]);o+='<div><span class="label">Expires</span><span class="value">'+t.toDateString()+" "+t.toTimeString()+"</span></div>"}let a=n(t,["landingpage","link","website"]);a&&(o+="<br>",o+='<a href="'+e.properties[a]+'" target="_blank">link</a>'),o+="<hr>";for(let l in e.properties){if(i===l||s===l||a===l||"modified"===l)continue;let t=e.properties[l];if("object"==typeof t)for(let e in t)o+='<div><span class="label">'+l+"."+e+'</span><span class="value">'+t[e]+"</span></div>";else o+='<div><span class="label">'+l+'</span><span class="value">'+t+"</span></div>"}return o+"</div>"};const Iu=yu;var Au=Lu.extend({currentVisibility:!0,currentOpacity:1,_gpStyle:{color:"#00f",weight:2,fillColor:"#00f",fillOpacity:.3},pointToLayerFn:function(e,t){var n=e&&e.properties?e.properties.style:null;if(!n&&"function"==typeof this.options.style)try{n=this.options.style(e)}catch(r){console.log("error using style function in ClusteredFeatureLayer: "+r.message)}(n=n||this.options.style||{}).radius=n["stroke-width"]||n.radius||4,n.weight=n["stroke-width"]||n.weight||2,n.color=n.stroke||n.color||"#03f",n.opacity=n["stroke-opacity"]||n.opacity||.9,n.fillOpacity=n["fill-opacity"]||n.opacity||.3,n.fillColor=n.fill||n.color||"#03f",n.renderer=this.options.renderer;let i=null;if("image"===n.shape){let e=n.width||16,r=n.height||16,s={icon:Object(ta.icon)({iconUrl:n.content,iconSize:[e,r],iconAnchor:[.5*e,.5*r],popupAnchor:[0,-11]})};ea.Config.leafletPane&&(s.pane=ea.Config.leafletPane),i=Object(ta.marker)(t,s)}else i=Object(ta.circleMarker)(t,n);return i.bindPopup((this.options.popupTemplate||Pu)(e)),i},eachFeatureFn:function(e,t){e&&e.geometry&&"Point"!==e.geometry.type&&t.bindPopup(Pu(e))},initialize:function(e){e=e||{},ea.Config.leafletPane&&(e.pane=ea.Config.leafletPane),e.pointToLayer=ta.Util.bind(this.pointToLayerFn,this),e.onEachFeature=ta.Util.bind(this.eachFeatureFn,this),e.spiderfyDistanceMultiplier=2,e.style=e.style||(()=>this._gpStyle),e.styleResolver&&(this.styleResolver=e.styleResolver);let t={};ea.Config.leafletPane&&(t.pane=ea.Config.leafletPane);var n=ta.SVG&&Object(ta.svg)(t)||ta.Canvas&&Object(ta.canvas)();e.renderer=n,Lu.prototype.initialize.call(this,e),this.on("load",function(){void 0!==this.options.zIndex&&this.setZIndex(this.options.zIndex)})},onAdd:function(e){Lu.prototype.onAdd.call(this,e),this.options.layerId&&this.loadStyle(this.options.layerId)},createLayers:function(e){Lu.prototype.createLayers.call(this,e),this.setVisibility(this.currentVisibility),this.setOpacity(this.currentOpacity)},setZIndex:function(e){for(var t in this.options.zIndex=e,this._layers){let n=this._layers[t];n.setZIndex?n.setZIndex(e):n._updateZIndex?n._updateZIndex(e):n._renderer&&n._renderer._container&&(n._renderer._container.style.zIndex=e)}},toggleVisibility:function(){this.currentVisibility=!this.currentVisibility,this.setVisibility(this.currentVisibility)},setVisibility:function(e){if(this.currentVisibility=!!e,this.options.renderer._container&&(this.options.renderer._container.style.display=e?"":"none"),this.cluster&&this.cluster._featureGroup&&this.cluster._featureGroup._layers)for(let n in this.cluster._featureGroup._layers){let i=this.cluster._featureGroup._layers[n];if(i._icon){var t=Iu(i._icon);e?t.removeClass("invisible"):t.addClass("invisible")}}if(this._layers)for(let n in this._layers){let t=this._layers[n];t.setVisibility?t.setVisibility(e):t.setStyle&&t.setStyle({display:e?"":"none"})}},setOpacity:function(e){if(this.currentOpacity=isNaN(e)?1:1*e,this.cluster&&this.cluster._featureGroup&&this.cluster._featureGroup._layers)for(let t in this.cluster._featureGroup._layers){let n=this.cluster._featureGroup._layers[t];n._icon&&Iu(n._icon).css({opacity:e})}if(this._layers)for(let t in this._layers){let n=this._layers[t];n.setOpacity&&n.setOpacity(e)}},setStyle:function(e){this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this)},loadStyle:function(e){this.options.styleLoader&&this.options.styleLoader(e).then(e=>{if(!e)return;let t=null;if(e&&e.styles){let t=function(e){let t=this.property||this.field1,n=e[t]||(e.properties?e.properties[t]:null),i=null;if(this.styles){let t=this.styles.find(e=>e.value===n);t?((i=t.style).radius=i["stroke-width"]||i.radius||4,i.weight=i["stroke-width"]||i.weight||2,i.color=i.stroke||i.color||"#03f",i.opacity=i["stroke-opacity"]||i.opacity||.9,i.fillOpacity=i["fill-opacity"]||i.opacity||.3,i.fillColor=i.fill||i.color||"#03f"):console.log("No matching style for "+JSON.stringify(e.properties))}return i},n=()=>t(e);return this.options.style=n,void setTimeout((e,t)=>{e.setStyle(t)},1e3,this,n)}if(e&&void 0!==e.push)t=e[0];else{if(!e)return;t=e}if(t.shape){var n=Iu.extend({},t);n.style=t,this._gpStyle=t;for(let e in this._layers)this._layers[e].setStyle(n)}}).catch(e=>{console.log("Error fetching feature layer style"),console.log(e)})}});const ku=yu;class Mu extends ta.TileLayer.WMS{constructor(e,t){super(e,t),this._enabled=!1,this._enabled=!1}enableGetFeatureInfo(){this._map.on("click",this.getFeatureInfo,this),this._enabled=!0}disableGetFeatureInfo(){this._map.off("click",this.getFeatureInfo,this),this._enabled=!1}isGetFeatureInfoEnabled(){return this._enabled}onRemove(e){return this.isGetFeatureInfoEnabled()&&this.disableGetFeatureInfo(),super.onRemove.call(this,e)}getFeatureInfo(e){var t=this.getFeatureInfoUrl(e.latlng),n=this.parseGetFeatureInfo;ku.ajax({url:t,success(e,t,i){"string"!=typeof e&&(e=n(e))},error(e,t,n){}})}getFeatureInfoUrl(e){var t=this._map.latLngToContainerPoint(e),n=this._map.getSize(),i={srs:"EPSG:4326",bbox:this._map.getBounds().toBBoxString(),height:n.y,width:n.x,info_format:"text/xml",x:t.x,y:t.y,i:t.x,j:t.y},r="/api/layers/"+this.wmsParams.wmvId+"/feature";return ea.Config.ualUrl+r+ta.Util.getParamString(i,r,!0)}parseGetFeatureInfo(e){var t=[];for(var n in e)t.push(["<div><strong>",n,": </strong>",e[n],"</div>"].join(" "));return 0==t.length&&t.push("<em>No data available</em>"),"<div>"+t.join(" ")+"</div>"}showGetFeatureInfo(e,t,n){e?console.log(e):Object(ta.popup)({maxWidth:800}).setLatLng(t).setContent(n).openOn(this._map)}}function Ou(e){let t=e.services&&e.services.length?e.services[0]:null;if(!t)throw new Error("Cannot create leaflet layer for WMS Layer '"+(e.label||e.id)+"' because layer has no service associated with it");let n=t.href;if(!n)throw new Error("WMS layer's service does not defined a service url");let i=e.supportedFormats||[],r=i.length?i[0]:"image/png",s=e.crs||[];s&&s.length>0&&~s.indexOf("ESPG:3857")&&console.log("Layer '"+e.label+"' does not support EPSG:3857 Spherical Mercator projection and may not render appropriately or at all.");let o="1.1.1",a=t.serviceTypeVersions||[];a.length&&a.indexOf("1.1.1")<0?o=a[0]:console.log("Warning: WMS Service doesn't list supported versions, assuming 1.1.1");let l={layers:e.layerName,transparent:!0,format:r,wmvId:e.id,version:o};return ea.Config.leafletPane&&(l.pane=ea.Config.leafletPane),new Mu(n,l)}if(window.L){const e=window.L;e.TileLayer.WMS=Mu,e.tileLayer.wms=Ou}n("ipqG");class Du extends ta.TimeDimension.Layer.WMS{constructor(e,t){super(e,t)}_parseTimeDimensionFromCapabilities(e){var t=e.querySelectorAll("Layer"),n=this._baseLayer.wmsParams.layers,i=null,r=null;return t.forEach(function(e){e.querySelector("Name").innerHTML===n&&(i=e)}),i&&((r=this._getTimesFromLayerCapabilities(i))||(r=this._getTimesFromLayerCapabilities(i.parentNode))),r}_getTimesFromLayerCapabilities(e){var t=null,n=e.querySelectorAll("Dimension[name='time']");if(n&&n.length&&n[0].textContent.length&&(t=n[0].textContent.trim()),!t||!t.length){var i=e.querySelectorAll("Extent[name='time']");i&&i.length&&i[0].textContent.length&&(t=i[0].textContent.trim())}return t&&~t.indexOf("current")&&(t=t.replace("current",(new Date).toISOString())),t}}function Ru(e){let t=e.services[0],n=t.href;if(!n)throw new Error("WMST Layer's service does not defined a service url");let i={layers:e.layerName,transparent:!0,format:"image/png",wmvId:e.layerId};ea.Config.leafletPane&&(i.pane=ea.Config.leafletPane);let r=new Mu(n,i),s=ea.Config.ualUrl+"/api/services/"+t.id+"/proxy/capabilities",o={times:null};if(e.temporal){let t=e.temporal.startDate?new Date(e.temporal.startDate):new Date,n=e.temporal.endDate?new Date(e.temporal.endDate):new Date;o.times=t.toISOString()+"/"+n.toISOString()+"/P1D"}return new Du(r,{timeDimension:new ta.TimeDimension(o),proxy:s})}if(window.L){const e=window.L;e.TileLayer.WMST=Du,e.tileLayer.wmst=Ru}const Nu=/\{ *([\w_-]+) *\}/g;class Fu extends ta.TileLayer{constructor(e,t){super(e,t)}initialize(e,t){this._url=e,this.defaultWmtsParams={service:"WMTS",request:"GetTile",version:"1.0.0",layers:"",styles:"",tileMatrixSet:"",format:"image/png"};var n=ta.Util.extend({},this.defaultWmtsParams),i=t.tileSize||this.options.tileSize;for(var r in n.width=n.height=t.detectRetina&&ta.Browser.retina?2*i:i,t)this.options.hasOwnProperty(r)||"matrixIds"==r||(n[r]=t[r]);this.wmtsParams=n,this.matrixIds=t.matrixIds||this.getDefaultMatrix(),ta.Util.setOptions(this,t)}onAdd(e){return this._crs=this.options.crs||e.options.crs,super.onAdd(e)}getTileUrl(e){var t=this.options.tileSize,n=e.multiplyBy(t);n.x+=1,n.y-=1;var i=n.add(new ta.Point(t,t)),r=this._tileZoom,s=this._crs.project(this._map.unproject(n,r)),o=this._crs.project(this._map.unproject(i,r)).x-s.x,a=this.matrixIds[r].identifier,l=this.matrixIds[r].topLeftCorner.lat,u=Math.floor((s.x-this.matrixIds[r].topLeftCorner.lng)/o),h=-Math.floor((s.y-l)/o);let c=this._url,d=c.indexOf("{TileMatrix}"),p=c.indexOf("{TileRow}"),f=c.indexOf("{TileCol}"),m=Object.assign({s:this._getSubdomain(e)},this.wmtsParams);d>0&&(m.TileMatrix=a),p>0&&(m.TileRow=h),f>0&&(m.TileCol=u);for(let y in m)m[y.toLowerCase()]=m[y];var g;g=m;let _=(c=c.replace(Nu,function(e,t){var n=g[t];if(void 0===n&&(n=g[t.toLowerCase()]),void 0===n)throw new Error("No value provided for variable "+e);return"function"==typeof n&&(n=n(g)),n})).indexOf("?");return _<0||d<_&&p<_||f<_||(c+=ta.Util.getParamString(this.wmtsParams,c),d<0&&(c+="&TileMatrix="+a),p<0&&(c+="&TileRow="+h),f<0&&(c+="&TileCol="+u)),c}setParams(e,t){return ta.Util.extend(this.wmtsParams,e),t||this.redraw(),this}getDefaultMatrix(){for(var e=new Array(22),t=0;t<22;t++)e[t]={identifier:""+t,topLeftCorner:new ta.LatLng(20037508.3428,-20037508.3428)};return e}_getSubdomain(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]}}function Bu(e){let t=e.services&&e.services.length?e.services[0].href:null,n=e.crs||[];n&&n.length>0&&~n.indexOf("ESPG:3857")&&console.log("Layer '"+e.label+"' does not support EPSG:3857 Spherical Mercator projection and may not render appropriately or at all.");let i={layer:e.layerName,style:"default",tileMatrixSet:"default",format:"image/png"};ea.Config.leafletPane&&(i.pane=ea.Config.leafletPane);let r=(e.distributions||[]).find(e=>e&&e.href&&("image/png"===e.mediaType||"image/jpeg"===e.mediaType));if(!r)throw new Error("WTMS Layer - layer "+e.id+" has no distribution(s) usable to make WMTS requests");if(t=r.href,i.format=r.mediaType,(r.parameters||[]).forEach(e=>{let n=e.name.toLowerCase();if("tilematrix"===n||"tilerow"===n||"tilecol"===n)return;let i=e.defaultValue||e.values&&e.values.length&&e.values[0];null!=i&&(t=t.replace("{"+e.name+"}",i))}),!t)throw new Error("Unable to determine WMTS URL for layer "+e.id+". Please make sure it is defined by either the service or a distribution on the layer itself.");return new Fu(t,i)}if(window.L){const e=window.L;e.TileLayer.WMTS=Fu,e.tileLayer.wmts=Bu}class Uu extends ta.TileLayer{constructor(e,t){super(e,t)}initialize(e,t){if(!e)throw new Error("Layer was not configured with a URL");if(this.defaultESRIParams={layers:"",transparent:!0,format:"png32",f:"image"},e.indexOf("/export")<0){let t=e.indexOf("?");t>0?e=e.substring(0,t)+"/export"+e.substring(t):e+="/export"}this._url=e;let n,i=ta.Util.extend({},this.defaultESRIParams),r=t.tileSize||this.options.tileSize;for(var s in n=i.height=t.detectRetina&&ta.Browser.retina?2*r:r,i.size=n+","+n,t)this.options.hasOwnProperty(s)||"crs"===s||(i[s]=t[s]);this.esriParams=i,ta.Util.setOptions(this,t)}onAdd(e){return this._crs=this.options.crs||e.options.crs,this.esriParams.srs=this.esriParams.imagesr=this.esriParams.bboxsr=this._crs.code,super.onAdd(e)}getTileUrl(e){let t=this._map,n=this.options.tileSize,i=e.multiplyBy(n),r=i.add([n,n]),s=this._crs.project(t.unproject(i,e.z)),o=this._crs.project(t.unproject(r,e.z)),a=[s.x,o.y,o.x,s.y].join(","),l=ta.Util.template(this._url,{s:this._getSubdomain(e)}),u=ta.Util.extend({},this.esriParams);return u.layers="show:"+u.layers,"EPSG:3857"===u.bboxsr&&(u.bboxsr="102100"),"EPSG:3857"===u.imagesr&&(u.imagesr="102100"),l+ta.Util.getParamString(u,l,!0)+"&BBOX="+a}setParams(e,t){return ta.Util.extend(this.esriParams,e),t||this.redraw(),this}_getSubdomain(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]}}if(window.L){const e=window.L;e.TileLayer.ESRI=Uu,e.tileLayer.esri=function(t,n){return new e.TileLayer.ESRI(t,n)}}var ju=Uu,zu=function(){return new ta.TileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:1,maxZoom:19,attribution:'Map data (c) <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'})};const Vu={MapBoxVectorTile:"http://www.geoplatform.gov/ont/openlayer/MapBoxVectorTileLayer",OSM:"http://www.geoplatform.gov/ont/openlayer/OSMLayer",BaseLayer:"http://www.geoplatform.gov/ont/openlayer/BaseLayer"};class qu{constructor(){this.factories=[],this.init()}register(e){"function"==typeof e&&this.factories.push(e)}setLayerService(e){this.service=e}getStyleResolver(){return this.service&&void 0!==this.service.style||(this.service=new ea.LayerService(ea.Config.ualUrl,new ea.XHRHttpClient)),function(e){if(!e||"function"!=typeof e.style)throw new Error("Must provide a LayerService instance");return function(t){return new Promise((n,i)=>{e.style(t).then(e=>n(e)).catch(e=>{i(new Error(`Error loading style information for layer ${t} : ${e.message}`))})})}}(this.service)}create(e){if(!e)throw new Error("LayerFactory expects a layer object");for(let t=0;t<this.factories.length;++t){let n=this.factories[t],i=n&&"function"==typeof n&&n(e);if(i)return i}return null}init(){this.register(e=>{if(e&&e.resourceTypes&&e.resourceTypes.length&&~e.resourceTypes.indexOf(Vu.OSM))return zu()}),this.register(e=>{if(!e||!e.services||!e.services.length)return null;let t,n=e.services[0],i=n.href,r=n.serviceType,s=r?r.uri:null,o=e.supportedFormats?e.supportedFormats[0]:null;function a(e){if(!e)throw new Error("Layer's service does not define a service url")}if(Cu.ESRI_MAP_SERVER&&Cu.ESRI_MAP_SERVER.uri===s){a(i),t={layers:e.layerName,transparent:!0,format:o||"png32"};let n=e.crs||[];return n&&n.length>0&&~n.indexOf("ESPG:3857")&&console.log("Layer '"+e.label+"' does not support EPSG:3857 Spherical Mercator projection and may not render appropriately or at all."),ea.Config.leafletPane&&(t.pane=ea.Config.leafletPane),new ju(i,t)}return Cu.ESRI_FEATURE_SERVER&&Cu.ESRI_FEATURE_SERVER.uri===s?(a(i),function(e,t){let n=e.services&&e.services.length?e.services[0]:null;if(!n)throw new Error("clusteredFeatures() -\n                  Cannot create leaflet layer for GP Layer:\n                  layer has no service");let i={url:n.href+"/"+e.layerName,styleLoader:t&&t.styleResolver?t.styleResolver:Eu,layerId:e.id};return ea.Config.leafletPane&&(i.pane=ea.Config.leafletPane),t&&t.leafletPane&&(i.pane=t.leafletPane),new Au(i)}(e,{styleResolver:this.getStyleResolver()})):Cu.ESRI_TILE_SERVER&&Cu.ESRI_TILE_SERVER.uri===s?(a(i),t={url:i,useCors:!0},ea.Config.leafletPane&&(t.pane=ea.Config.leafletPane),vu.tiledMapLayer(t)):Cu.ESRI_IMAGE_SERVER&&Cu.ESRI_IMAGE_SERVER.uri===s?(t={url:i,useCors:!0},ea.Config.leafletPane&&(t.pane=ea.Config.leafletPane),vu.imageMapLayer(t)):null}),this.register(e=>{if(!e||!e.services||!e.services.length)return null;let t=e.services[0].serviceType,n=t?t.uri:null;return Cu.WMS&&Cu.WMS.uri===n?Ou(e):Cu.WMST&&Cu.WMST.uri===n?Ru(e):Cu.WMTS&&Cu.WMTS.uri===n?Bu(e):null}),this.register(e=>{if(!e||!e.services||!e.services.length)return null;let t=e.services[0].serviceType;return Cu.FEED&&Cu.FEED.uri===(t?t.uri:null)?function(e,t){let n=e.services&&e.services.length?e.services[0]:null;if(!n)throw new Error("geoJsonFeed() -\n                  Cannot create leaflet layer for GP Layer:\n                  layer has no service");let i=n.href,r=i+("/"===i[i.length-1]?"":"/")+e.id+"/FeatureServer/"+e.layerName,s=i.replace("feeds","styles")+("/"===i[i.length-1]?"":"/")+e.id,o={url:r,isModern:!0,layerId:e.id,styleLoader:function(e){return function(t){return new Promise((n,i)=>{Iu||i(new Error("Unable to load GeoJSON feed style, jQuery is not installed")),Iu.ajax(e,{dataType:"json",success:function(e){n(e)},error:function(e,n,r){i(new Error(`geoJsonFeed() -\n                            Error loading style information for layer ${t} : ${r}`))}})})}}(s)};return ea.Config.leafletPane&&(o.pane=ea.Config.leafletPane),t&&t.leafletPane&&(o.pane=t.leafletPane),new Au(o)}(e,{styleResolver:this.getStyleResolver()}):null}),this.register(e=>{if(!e)return null;if((e.resourceTypes||[]).indexOf(Vu.MapBoxVectorTile)<0)return null;let t=e.href;if(!t||t.indexOf(".pbf")<0)return console.log("LayerFactory - Layer does not define an Access URL"),null;const n=ta;if(void 0===n.vectorGrid&&void 0===n.vectorGrid.protobuf)return console.log("LayerFactory - Leaflet Vector Tiles plugin not found"),null;var i={rendererFactory:ta.canvas.tile};return ea.Config.leafletPane&&(i.pane=ea.Config.leafletPane),n.vectorGrid.protobuf(t,i)})}}var Gu=new qu,Zu={get:function(e){return e||(e=new ea.LayerService(ea.Config.ualUrl,new ea.XHRHttpClient)),e.get(ea.Config.defaultBaseLayerId||"86a8babde086689e21248669ba4ed579").catch(e=>(function(e){let t=Object(ea.QueryFactory)().fields("*").resourceTypes(Vu.OSM);return e||(e=new ea.LayerService(ea.Config.ualUrl,new ea.XHRHttpClient)),e.search(t).then(e=>e.results.length?e.results[0]:null)})())},set:function(e){let t=null;e&&e.id?t=e.id:e&&"string"==typeof e&&(t=e),t&&ea.Config.configure({defaultBaseLayerId:e.id})}};const Hu=yu;class Wu{constructor(){this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){if(e||(this._listeners={}),this._listeners[e])if(t){var n=this._listeners[e].indexOf(t);n>=0&&this._listeners[e].splice(n,1)}else this._listeners[e]=[]}notify(e,...t){if(this._listeners[e]){var n=Array.prototype.slice.call(arguments,1);this._listeners[e].forEach(function(e){e.apply(null,n)})}}}class $u extends Wu{constructor(e){super(),this.setHttpClient(new ea.XHRHttpClient),this.setServiceFactory(ea.ServiceFactory),this._key=e||Math.ceil(9999*Math.random()),this._mapId=null,this._mapDef=this.initializeMapDefinition(),this._mapInstance=null,this._defaultExtent=null,this._baseLayerDef=null,this._baseLayer=null,this._layerStates=[],this._layerCache={},this._layerErrors=[],this._layerErrorHandler=function(e){console.log(`MapInstance.defaultLayerErrorHandler() - ${e.id} : ${e.message}`)},this._featureLayer=null,this._featureLayerVisible=!0,this._tools=[],this.state={dirty:!1},this._geoJsonLayerOpts={style:function(e){if(e.properties.style)return e.properties.style},onEachFeature:function(e,t){var n={weight:2,color:"#03f",opacity:.9,radius:4,fillColor:"#03f",fillOpacity:.5};~e.geometry.type.indexOf("Point")&&(n.fillOpacity=.9);var i=e.properties=e.properties||{};null==e.properties.id&&(e.properties.id=Math.floor(999999*Math.random())),e.properties.label=i.label||i.title||i.name||"Untitled "+e.geometry.type+" Feature",e.properties.description=i.description||i.desc||"This feature needs a description!",e.properties.style=i.style||n,t.bindTooltip(i.label)},pointToLayer:function(e,t){var n=e.properties.style||{};return n.radius=n.radius||4,n.weight=n.weight||2,n.color=n.color||"#03f",n.opacity=n.opacity||.9,n.fillOpacity=n.opacity,n.fillColor=n.color,Object(ta.circleMarker)(t,n)}}}dispose(){this.destroyMap(),this.svcCache=null,this.serviceFactory=null,this.httpClient=null,this._key=null,this._mapId=null,this._mapDef=null,this._mapInstance=null,this._defaultExtent=null,this._baseLayerDef=null,this._baseLayer=null,this._layerStates=null,this._layerCache=null,this._layerErrors=null,this._featureLayer=null,this._featureLayerVisible=!0,this._tools=null,this.state=null,this._geoJsonLayerOpts=null}getKey(){return this._key}setService(e){}setServiceFactory(e){this.svcCache={},this.serviceFactory=e}setHttpClient(e){this.svcCache={},this.httpClient=e}getService(e){return this.svcCache[e]||(this.svcCache[e]=this.serviceFactory(e,ea.Config.ualUrl,this.httpClient)),this.svcCache[e]}setErrorHandler(e){this._layerErrorHandler=e}getLayerStateIndex(e){if(!e)return-1;for(let t=0;t<this._layerStates.length;++t)if(this._layerStates[t].layer&&e===this._layerStates[t].layer.id)return t;return-1}getLayerState(e){let t=this.getLayerStateIndex(e);return t>=0?this._layerStates[t]:null}initializeMapDefinition(){return{type:ea.ItemTypes.MAP,title:"My New Map",label:"My New Map",description:"This map needs a description",createdBy:null,baseLayer:this._baseLayerDef,layers:[],keywords:[],themes:[],resourceTypes:["http://www.geoplatform.gov/ont/openmap/GeoplatformMap"]}}getMapResourceContent(e){(e=e||{}).layers=this._layerStates.map(e=>({visibility:e.visibility||!0,opacity:isNaN(e.opacity)?1:1*e.opacity,layer:{id:e.layer.id,uri:e.layer.uri,label:e.layer.label}})),e.baseLayer={id:this._baseLayerDef.id,uri:this._baseLayerDef.uri,label:this._baseLayerDef.label},e.annotations=this._featureLayer?{title:"Map Features",geoJSON:this._featureLayer.toGeoJSON()}:null;let t=this._mapInstance.getBounds();return e.extent={minx:t.getWest(),miny:t.getSouth(),maxx:t.getEast(),maxy:t.getNorth()},e}getDrawControlToolbar(){if(!this._mapInstance.drawControl)return null;var e=this._mapInstance.drawControl._toolbars,t=null;for(var n in e)if(e.hasOwnProperty(n)&&e[n]._modes){t=e[n];break}return t}handleLayerError(e){if(this._layerCache){var t=e.target;for(var n in this._layerCache)if(this._layerCache[n]===t){this.processLayerError(e,n);break}}else console.log("Unable to find layer in layer cache. Layer error is "+e)}processLayerError(e,t){var n=e=>e.id===t||e.layer&&e.layer.id===t;if(!this._layerErrors.find(n)){let s=this.logLayerError(t,"Layer ('"+t+"') failed to completely load. It may be inaccessible or misconfigured.");var i=e.tile.src,r={id:t};i.substring(i.indexOf("?")+1,i.length).split("&").forEach(function(e){var t=e.split("=");r[t[0]]=t[1]});let o=this.getService(ea.ItemTypes.LAYER);o&&o.validate(t,r).catch(e=>{var t=this._layerStates.find(n);t&&(s.message="Layer '"+t.layer.label+"' failed to completely load. Reported cause: "+e.message),this.notify("layer:error",s)})}}logLayerError(e,t){let n={id:e,message:t};return this._layerErrors.push(n),this._layerErrorHandler&&this._layerErrorHandler(n),n}touch(e,...t){this.state.dirty=!0,e&&(arguments.length>1?this.notify.apply(this,Array.prototype.slice.call(arguments)):this.notify(e))}clean(){this.state.dirty=!1}setMap(e){this._mapInstance=e}getMap(){return this._mapInstance}getMapDefinition(){return this._mapDef}getMapId(){return this._mapId}setView(e,t,n){let i=n;void 0===i&&(i=this._mapInstance.getZoom()),this._mapInstance.setView([e,t],i),this.touch("map:view:changed")}getView(){var e=this._mapInstance.getCenter();return[e.lat,e.lng]}getZoom(){return this._mapInstance.getZoom()}zoomToDefault(){if(this._mapInstance){this._defaultExtent?this._mapInstance.fitBounds([[this._defaultExtent.miny,this._defaultExtent.minx],[this._defaultExtent.maxy,this._defaultExtent.maxx]]):(console.log("MapInstance.zoomToDefault() - No default extent specified"),this._mapInstance.setView([38,-96],5));try{this.touch("map:view:changed")}catch(e){}}}setExtent(e){e&&(void 0!==e.minx&&void 0!==e.miny&&void 0!==e.maxx&&void 0!==e.maxy?this._mapInstance.fitBounds([[e.miny,e.minx],[e.maxy,e.maxx]]):void 0!==e.getWest&&this._mapInstance.fitBounds(e))}setBaseLayer(e){let t=null;if(e)t=Promise.resolve(e);else{let e=this.getService(ea.ItemTypes.LAYER);t=Zu.get(e)}t.then(e=>{let t=Gu.create(e);if(!t)return void console.log("Warning: MapInstance could not create base layer for '"+e.id+"'");this._mapInstance.addLayer(t),t.setZIndex(0);let n=this._baseLayer;n&&this._mapInstance.removeLayer(n),this._baseLayer=t,this._baseLayerDef=e,this.touch("baselayer:changed",e,t)}).catch(t=>{console.log(`MapInstance.setBaseLayer() - Error getting base layer for map : ${t.message}`),this.logLayerError(e.id,"Error setting baselayer on map because of the following error(s): "+t.message)})}getBaseLayer(){return this._baseLayerDef}getLayers(){return this._layerStates}getLayerErrors(){return this._layerErrors}clearLayerErrors(){this._layerErrors=[],this.notify("layer:error")}clearOverlays(){if(this._layerCache){for(var e=this._layerStates.length-1;e>=0;--e){var t=this._layerStates[e],n=this._layerCache[t.layer.id];n&&(n.off("layer:error"),this._layerCache[t.layer.id]=null,this._mapInstance.removeLayer(n))}this._layerStates=[],this.touch("layers:changed")}}addLayers(e){this._layerCache?this._layerCache?e&&(void 0===e.push&&(e=[e]),e.forEach((t,n)=>{let i=null,r=null;if(t.type&&t.type===ea.ItemTypes.LAYER?i=t:t.layer&&(i=t.layer,r=t),i){if(!this._layerCache[i.id]){if(!r)try{r={opacity:1,visibility:!0,layer:JSON.parse(JSON.stringify(i))}}catch(s){throw new Error("Unable to add layer to map because of "+s.message)}r.zIndex=e.length-n,this.addLayerWithState(i,r)}}else console.log("MapInstance.addLayers() - layer ("+n+") is not a Layer or a Layer state. Ignoring...")}),this.touch("layers:changed")):console.log("WARN: Attempting to add layers to a map with no layer cache"):console.log("WARN: attempting to add layers to an empty cache")}addLayerWithState(e,t){var n=null;try{if(!e||!t)throw new Error("Invalid argument, missing layer and or state");if(!(n=Gu.create(e))){let t="Could not create leaflet instance for GP Layer '"+e.id+"'.";throw e.services&&e.services.length||(t+="  The layer instance has no services included, which will prevent most layers from being displayed."),new Error(t)}}catch(i){this.logLayerError(e.id,"Layer '"+e.label+"' could not be added to the map instance; "+i.message)}n&&(this._layerCache&&(this._layerCache[e.id]=n),n.on("tileerror",e=>{this.handleLayerError(e)}),this._mapInstance.addLayer(n),!isNaN(t.zIndex)&&n.setZIndex&&n.setZIndex(t.zIndex),this._layerStates.push(t),this.notify("layer:added",e,n),(!t.visibility||t.opacity<1)&&setTimeout((e,t)=>{this.setLayerVisibility(e,t.visibility),this.setLayerOpacity(e,t.opacity)},2e3,n,t))}moveLayer(e,t){if(!this._layerCache)return;if(!this._layerCache)return;if(isNaN(e))return;isNaN(t)&&(t=this._layerStates.length-1);let n=this._layerStates.splice(e,1)[0];this._layerStates.splice(t,0,n);for(let i=1,r=this._layerStates.length-1;r>=0;--r,++i){let e=this._layerStates[r],t=this._layerCache[e.layer.id];t&&(t.setZIndex(i),e.zIndex=i)}this.touch("layers:changed",this.getLayers())}removeLayer(e){if(this._layerCache){var t=this._layerCache[e];if(t){let n=this.getLayerStateIndex(e);n>=0&&n<this._layerStates.length&&this._layerStates.splice(n,1),t.off("layer:error"),this._mapInstance.removeLayer(t),this._layerCache[e]=null}this.touch("layers:changed")}}toggleLayerVisibility(e){if(this._layerCache){var t=this._layerCache[e];if(t){let n=this.getLayerState(e);if(n.visibility=!n.visibility,t._currentImage)return t.setOpacity(n.visibility?1:0),void(n.opacity=t.getOpacity());this.setLayerVisibility(t,n.visibility)}}}setLayerVisibility(e,t){e.setVisibility?e.setVisibility(t):e._container&&Hu(e._container).css({display:t?"":"none"}),this.touch("map:layer:changed")}updateLayerOpacity(e,t){if(!this._layerCache)return;var n=this._layerCache[e];n||this._baseLayerDef.id!==e||(n=this._baseLayer),t=this.setLayerOpacity(n,t);let i=this.getLayerState(e);i&&(i.opacity=t)}setLayerOpacity(e,t){return e&&e.setOpacity&&(t>1&&(t/=100),e.setOpacity(t),this.touch("map:layer:changed")),t}getLeafletLayerFor(e){return e&&this._layerCache&&this._layerCache[e.id]||null}toggleGetFeatureInfo(e){if(this._layerCache){var t=this._layerCache[e];t&&void 0!==t.enableGetFeatureInfo&&(t.isGetFeatureInfoEnabled()?(t.disableGetFeatureInfo(),Hu(this._mapInstance._container).removeClass("selectable-cursor")):(t.enableGetFeatureInfo(),Hu(this._mapInstance._container).addClass("selectable-cursor")))}}getFeatures(){return this._featureLayer?this._featureLayer.toGeoJSON().features:[]}addFeatures(e){if(e)if(void 0!==e.push){for(var t=0;t<e.length;++t)this.addFeature(e[t],!1);this.touch("features:changed")}else e.features?this.addFeatures(e.features):this.addFeature(e,!0)}addFeature(e,t){this._featureLayer||(this._featureLayer=Object(ta.featureGroup)().addTo(this._mapInstance));var n=Hu.extend({},this._geoJsonLayerOpts);Object(ta.geoJSON)(e,n).eachLayer(e=>this.addFeatureLayer(e)),void 0===t||!0===t?this.touch("features:changed"):this.touch()}updateFeature(e){var t=this.getFeatureLayer(e.properties.id);t&&(t.feature=e,t.setStyle(e.properties.style),t.bindTooltip(e.properties.label||"Untitled "+e.geometry.type+" Feature"),this.touch("map:feature:changed"))}replaceFeature(e){var t=this.getFeatureLayer(e.properties.id);t&&(this._featureLayer.removeLayer(t),Object(ta.geoJSON)(e,this._geoJsonLayerOpts).eachLayer(e=>this.addFeatureLayer(e)),this.touch("map:feature:changed"))}focusFeature(e){var t=this.getFeatureLayer(e);if(t)if(void 0!==t.getBounds){let e=t.getBounds();this._mapInstance.fitBounds(e)}else if(void 0!==t.getLatLng){let e=t.getLatLng();this._mapInstance.panTo(e)}else console.log("MapInstance.focusFeature() - Cannot focus feature because it has no bounds or lat/lng");else console.log("MapInstance.focusFeature() - Cannot focus feature because it has no layer")}removeFeature(e){var t=this.getFeatureLayer(e);t&&this._featureLayer&&(this._featureLayer.removeLayer(t),this.touch("features:changed"))}removeFeatures(){this._featureLayer&&(this._featureLayer.clearLayers(),this.touch("features:changed"))}getFeatureLayer(e){if(!e)return this._featureLayer;if(!this._featureLayer)return null;for(var t=this._featureLayer.getLayers(),n=0;n<t.length;++n)if(t[n].feature&&t[n].feature.properties.id===e)return t[n];return null}toggleFeaturesLayer(){return!!this._featureLayer&&(this._featureLayerVisible=!this._featureLayerVisible,this.setFeatureLayerVisibility(this._featureLayer,this._featureLayerVisible),this._featureLayerVisible)}setFeatureVisibility(e,t){this.setFeatureLayerVisibility(e,t)}getFeaturesLayerVisibility(){return this._featureLayerVisible}addFeatureLayer(e){this._addFeatureLayer(e),this.touch("features:changed")}_addFeatureLayer(e){!e.feature&&e instanceof ta.LayerGroup?e.eachLayer(e=>{this._addFeatureLayer(e)}):this._featureLayer.addLayer(e)}setFeatureLayerVisibility(e,t){if(e)if(this._featureLayerVisible=t,e.getLayers)e.getLayers().forEach(e=>{this.setFeatureLayerVisibility(e,t)});else{let n=e._container||e._path;n&&(n.style.display=t?"":"none")}}save(e){return this.saveMap(e)}saveMap(e){let t=e||{};const n="http://www.geoplatform.gov/ont/openmap/GeoplatformMap";t.resourceTypes=t.resourceTypes||[],t.resourceTypes.indexOf(n)<0&&t.resourceTypes.push(n);var i=this.getMapResourceContent(t);return i.title&&i.title!==i.label?i.label=i.title:i.label&&!i.title&&(i.title=i.label),new Promise((e,t)=>{this.getService(ea.ItemTypes.MAP).save(i).then(t=>{this._mapId||(this._mapId=t.id),this._mapDef=t,this._defaultExtent=t.extent,this.clean(),e(t)}).catch(e=>{console.log("MapCore MapInstance.saveMap() - The requested map could not be saved because: "+e.message);let n=new Error("The requested map could not be saved because of the following error(s): "+e.message);t(n)})})}fetchMap(e){return this.getService(ea.ItemTypes.MAP).get(e)}loadMap(e){return new Promise((t,n)=>{this.fetchMap(e).then(n=>{if(!n)throw new Error("The requested map ('"+e+"') came back null");if("string"==typeof n)throw new Error("The requested map ('"+e+"') came back as a string");if(n.message)throw new Error("There was an error loading the requested map ('"+e+"'): "+n.message);"development"!==ea.Config.env&&setTimeout(t=>{let n=[{op:"replace",path:"/statistics/numViews",value:(t.statistics&&t.statistics.numViews||0)+1}];this.getService(ea.ItemTypes.MAP).patch(t.id,n).then(e=>{t.statistics=e.statistics}).catch(t=>{console.log("MapInstance.saveMap() - Error updating view count for map ('"+e+"'): "+t)})},1e3,n),this.loadMapFromObj(n),t(n)}).catch(t=>{console.log("MapInstance.loadMap() - The requested map could not be loaded because "+t.message);let i=new Error("The requested map ('"+e+"') could not be loaded because of the following error(s): "+t.message);n(i)})})}loadMapFromObj(e){this._mapId=e.id,this._mapDef=e,e.extent=this.ensureExtent(e.extent),this._defaultExtent=e.extent;var t=e.extent;if(this._mapInstance.eachLayer(e=>{this._mapInstance.removeLayer(e)}),this._layerCache={},this._layerStates=[],this.setBaseLayer(e.baseLayer),this.addLayers(e.layers),e.annotations&&e.annotations.geoJSON){let t=e.annotations.geoJSON;this.addFeatures(t.features?t.features:[t])}this._mapInstance.fitBounds([[t.miny,t.minx],[t.maxy,t.maxx]]),this.clean(),this.notify("map:loaded",e)}ensureExtent(e){let t,n=!e||isNaN(e.minx)?-179:1*e.minx,i=!e||isNaN(e.maxx)?179:1*e.maxx,r=!e||isNaN(e.miny)?-89:1*e.miny,s=!e||isNaN(e.maxy)?89:1*e.maxy;return n>i&&(t=Math.min(n,i),i=Math.max(n,i),n=t),r>s&&(t=Math.min(r,s),s=Math.max(r,s),r=t),n<-180&&(n=-179),i>180&&(i=179),r<-90&&(r=-89),s>90&&(s=89),{minx:n,miny:r,maxx:i,maxy:s}}destroyMap(){this._mapInstance=null,this._layerCache=null,this._layerStates=null,this._featureLayer=null}setAsNewMap(e){this._mapId=null,this._mapDef=e||this.initializeMapDefinition()}registerTool(e,t){this._tools[e]=t}unregisterTool(e){this._tools[e]=null}enableTool(e,t){if(!this._tools[e])return!1;this._tools[e].activate(function(){this.notify("tool:disabled",e)}),this.notify("tool:enabled",e)}cacheMap(){this.state&&this.state.dirty&&(this.getMapResourceContent().layers=this._layerStates.slice(0))}restoreMap(){}}var Ju={},Yu={get:function(e){if(e&&Ju[e])return Ju[e];let t=new $u(e);return Ju[t._key]=t,t},dispose:function(e){e?(Ju[e].dispose(),delete Ju[e]):Ju=null}};n("iNfD");const Ku={color:"transparent",weight:1,fill:!0,fillColor:"#777777",fillOpacity:.7};class Qu{constructor(e){this.errors=[],this.warnings=[],this.httpClient=new Ul(e),this.layerService=Jl(e)}ngOnInit(){this.initMap(),this.data&&(this.dataSubscription=this.data.subscribe(e=>{this.onDataEvent(e)}))}ngOnChanges(e){}ngOnDestroy(){this.dataSubscription&&this.dataSubscription.unsubscribe(),this.data&&(this.data=null),this.map&&(this.map.destroyMap(),this.map=null)}initMap(){let e=ta.map("previewMap",{zoomControl:!0,center:[38,-96],zoom:3,minZoom:2,maxZoom:21,maxBounds:[[-90,-180],[90,180]]});ea.Config.leafletPane&&(e.createPane(ea.Config.leafletPane),e.getPane(ea.Config.leafletPane).style.zIndex="250"),this.map=Yu.get("GP_MP_MAP"),this.map.setMap(e),this.map.setErrorHandler(e=>{this.errors.push(e)}),this.map.setHttpClient(this.httpClient),this.map.setServiceFactory(this.getServiceFactory()),Gu.setLayerService(this.layerService),this.setDefaultBaseLayer(),e.on("moveend",()=>{this.onMapBoundsChange()})}onMapBoundsChange(){let e=this.map.getMap().getBounds();Ql.debug("Map Extent Changed: ",e.toBBoxString());let t={minx:e.getWest(),miny:e.getSouth(),maxx:e.getEast(),maxy:e.getNorth()};this.data.setExtent(t)}setDefaultBaseLayer(){return Zu.get(this.layerService).then(e=>(this.map&&this.map.setBaseLayer(e),e))}loadMap(e){return this.map.loadMap(e).then(e=>(e&&e.baseLayer||this.setDefaultBaseLayer(),e)).catch(t=>(Ql.error("Unable to load map ("+e+") because of: ",t.message),console.log(t),this.setDefaultBaseLayer(),this.errors.push(t),Promise.resolve(null)))}setExtent(e){if(e){if(!this.getBoundsFor(e))return;this.map.setExtent(e)}}getBoundsFor(e){if(!e)return null;if(isNaN(e.minx)||isNaN(e.miny)||isNaN(e.maxx)||isNaN(e.maxy))return null;let t=[];return t.push([1*e.miny,1*e.minx]),t.push([1*e.maxy,1*e.maxx]),t[0][0]<-89&&(t[0][0]=-89),t[0][1]<-179&&(t[0][1]=-179),t[1][0]>89&&(t[1][0]=89),t[1][1]>179&&(t[1][1]=179),t}renderBounds(e,t){return e?t?new ta.Rectangle(e,Ku):new ta.Polygon([[[-90,-180],[-90,180],[90,180],[90,-180],[-90,-180]],[e[0],[e[0][0],e[1][1]],e[1],[e[1][0],e[0][1]],e[0]]],Ku):null}getServiceFactory(){return function(e,t,n){let i="string"==typeof e?e:e&&e.type?e.type:null;if(!i)throw new Error("Must provide a type or object with a type specified");if(!n)throw new Error("Must provide an http client to use to make requests");switch(i){case ea.ItemTypes.LAYER:return this.layerService;case ea.ItemTypes.MAP:return new ea.MapService(ea.Config.ualUrl,this.httpClient);default:return Object(ea.ServiceFactory)(e,ea.Config.ualUrl,this.httpClient)}}}isValidExtent(e){if(!e)return!1;if(isNaN(e.minx)||isNaN(e.maxx)||isNaN(e.miny)||isNaN(e.maxy))return!1;if(e.maxx*=1,e.minx*=1,e.maxy*=1,e.miny*=1,e.maxx<e.minx){let t=e.maxx;e.maxx=e.minx,e.minx=t}else e.maxx-e.minx<1e-4&&(e.minx<-179?e.minx-=1:e.maxx+=1);if(e.maxy<e.miny){let t=e.maxy;e.maxy=e.miny,e.miny=t}else e.maxy-e.miny<1e-4&&(e.miny<-79?e.miny-=1:e.maxy+=1);return!0}wrapLayer(e){return e.layer?e:{layer:e,layerId:e.id,opacity:1,visibility:!0}}onDataEvent(e){switch(Ql.debug("Map.onDataEvent("+e.type.toString()+")"),e.type){case Xl.ON:this.data.getData();let t=e.data.map(e=>this.wrapLayer(e));this.map.addLayers(t),this.extentTimer&&clearTimeout(this.extentTimer),this.extentTimer=setTimeout(()=>{this.extentTimer=null,this.map.setExtent(this.data.getExtent())},500);break;case Xl.OFF:this.map.removeLayer(e.data[0].id);break;case Xl.VIZ:this.map.toggleLayerVisibility(e.data[0].id);break;case Xl.BASE:this.map.setBaseLayer(e.data[0])}}}var Xu=Vn({encapsulation:0,styles:[["[_nghost-%COMP%]{height:513px;width:90%;display:block;margin-left:5%}@media (min-width:768px){[_nghost-%COMP%]{-webkit-box-flex:1;flex:1;border-bottom:1px solid #ddd;height:calc(50vw);width:100%;margin:0}}.o-map-container[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function eh(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"div",[["class","o-map-container"],["id","previewMap"]],null,null,null,null,null))],null,null)}let th=null;function nh(){return th}class ih{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class rh extends ih{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(e=>{null!=this.getStyle(t,e)&&(this._transitionEnd=n[e])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,t,n){e.href=null==n?t:t+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const sh={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},oh=3,ah={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},uh=(()=>{if(_e.Node)return _e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}})();class hh extends rh{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new hh,th||(th=e)}hasProperty(e,t){return t in e}setProperty(e,t,n){e[t]=n}getProperty(e,t){return e[t]}invoke(e,t,n){e[t](...n)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return sh}contains(e,t){return uh.call(e,t)}querySelector(e,t){return e.querySelector(t)}querySelectorAll(e,t){return e.querySelectorAll(t)}on(e,t,n){e.addEventListener(t,n,!1)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}createMouseEvent(e){const t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}createEvent(e){const t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const t=e.childNodes,n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=t[i];return n}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,t){e.appendChild(t)}removeChild(e,t){e.removeChild(t)}replaceChild(e,t,n){e.replaceChild(t,n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,t,n){e.insertBefore(n,t)}insertAllBefore(e,t,n){n.forEach(n=>e.insertBefore(n,t))}insertAfter(e,t,n){e.insertBefore(n,t.nextSibling)}setInnerHTML(e,t){e.innerHTML=t}getText(e){return e.textContent}setText(e,t){e.textContent=t}getValue(e){return e.value}setValue(e,t){e.value=t}getChecked(e){return e.checked}setChecked(e,t){e.checked=t}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createElementNS(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}createTextNode(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,t,n){const i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(e,t),i}createStyleElement(e,t){const n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,t){return e.getElementsByClassName(t)}getElementsByTagName(e,t){return e.getElementsByTagName(t)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}hasClass(e,t){return e.classList.contains(t)}setStyle(e,t,n){e.style[t]=n}removeStyle(e,t){e.style[t]=""}getStyle(e,t){return e.style[t]}hasStyle(e,t,n){const i=this.getStyle(e,t)||"";return n?i==n:i.length>0}tagName(e){return e.tagName}attributeMap(e){const t=new Map,n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i);t.set(e.name,e.value)}return t}hasAttribute(e,t){return e.hasAttribute(t)}hasAttributeNS(e,t,n){return e.hasAttributeNS(t,n)}getAttribute(e,t){return e.getAttribute(t)}getAttributeNS(e,t,n){return e.getAttributeNS(t,n)}setAttribute(e,t,n){e.setAttribute(t,n)}setAttributeNS(e,t,n,i){e.setAttributeNS(t,n,i)}removeAttribute(e,t){e.removeAttribute(t)}removeAttributeNS(e,t,n){e.removeAttributeNS(t,n)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,t){e.title=t||""}elementMatches(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===oh&&lh.hasOwnProperty(t)&&(t=lh[t]))}return ah[t]||t}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=dh||(dh=document.querySelector("base"))?dh.getAttribute("href"):null;return null==t?null:(n=t,ch||(ch=document.createElement("a")),ch.setAttribute("href",n),"/"===ch.pathname.charAt(0)?ch.pathname:"/"+ch.pathname);var n}resetBaseElement(){dh=null}getUserAgent(){return window.navigator.userAgent}setData(e,t,n){this.setAttribute(e,"data-"+t,n)}getData(e,t){return this.getAttribute(e,"data-"+t)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return za(document.cookie,e)}setCookie(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}}let ch,dh=null;function ph(){return!!window.history.pushState}let fh=(()=>{class e extends Na{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=nh().getLocation(),this._history=nh().getHistory()}getBaseHrefFromDOM(){return nh().getBaseHref(this._doc)}onPopState(e){nh().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){nh().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){ph()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){ph()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.ctorParameters=()=>[{type:void 0,decorators:[{type:ee,args:[Xa]}]}],e})();const mh=new ye("TRANSITION_ID"),gh=[{provide:Cr,useFactory:function(e,t,n){return()=>{n.get(Lr).donePromise.then(()=>{const n=nh();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(t=>n.getAttribute(t,"ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[mh,Xa,De],multi:!0}];class _h{static init(){var e;e=new _h,os=e}addToWindow(e){_e.getAngularTestability=(t,n=!0)=>{const i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},_e.getAllAngularTestabilities=()=>e.getAllTestabilities(),_e.getAllAngularRootElements=()=>e.getAllRootElements(),_e.frameworkStabilizers||(_e.frameworkStabilizers=[]),_e.frameworkStabilizers.push(e=>{const t=_e.getAllAngularTestabilities();let n=t.length,i=!1;const r=function(t){i=i||t,0==--n&&e(i)};t.forEach(function(e){e.whenStable(r)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?nh().isShadowRoot(t)?this.findTestabilityInTree(e,nh().getHost(t),!0):this.findTestabilityInTree(e,nh().parentElement(t),!0):null}}function yh(e,t){"undefined"!=typeof COMPILED&&COMPILED||((_e.ng=_e.ng||{})[e]=t)}const vh=(()=>({ApplicationRef:fs,NgZone:Jr}))();function bh(e){return bs(e)}const wh=new ye("EventManagerPlugins");let xh=(()=>(class{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let i=0;i<n.length;i++){const t=n[i];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}))();class Th{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=nh().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let Ch=(()=>(class{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}))(),Lh=(()=>(class extends Ch{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>nh().remove(e))}}))();const Sh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Eh=/%COMP%/g,Ph="_nghost-%COMP%",Ih="_ngcontent-%COMP%";function Ah(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Ah(e,r,n):(r=r.replace(Eh,e),n.push(r))}return n}function kh(e){return t=>{!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Mh=(()=>(class{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Oh(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case He.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new Nh(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case He.Native:case He.ShadowDom:return new Fh(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Ah(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}))();class Oh{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Sh[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const r=Sh[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=Sh[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&Xt.DashCase?e.style.setProperty(t,n,i&Xt.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Xt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){Rh(t,"property"),e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return Rh(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,kh(n)):this.eventManager.addEventListener(e,t,kh(n))}}const Dh=(()=>"@".charCodeAt(0))();function Rh(e,t){if(e.charCodeAt(0)===Dh)throw new Error(`Found the synthetic ${t} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class Nh extends Oh{constructor(e,t,n,i){super(e),this.component=n;const r=Ah(i+"-"+n.id,n.styles,[]);t.addStyles(r),this.contentAttr=Ih.replace(Eh,i+"-"+n.id),this.hostAttr=Ph.replace(Eh,i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Fh extends Oh{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===He.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=Ah(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const e=document.createElement("style");e.textContent=r[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const Bh=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e})(),Uh=Bh("addEventListener"),jh=Bh("removeEventListener"),zh={},Vh="__zone_symbol__propagationStopped",qh=(()=>{const e="undefined"!=typeof Zone&&Zone[Bh("BLACK_LISTED_EVENTS")];if(e){const t={};return e.forEach(e=>{t[e]=e}),t}})(),Gh=function(e){return!!qh&&qh.hasOwnProperty(e)},Zh=function(e){const t=zh[e.type];if(!t)return;const n=this[t];if(!n)return;const i=[e];if(1===n.length){const e=n[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,i):e.handler.apply(this,i)}{const t=n.slice();for(let n=0;n<t.length&&!0!==e[Vh];n++){const e=t[n];e.zone!==Zone.current?e.zone.run(e.handler,this,i):e.handler.apply(this,i)}}};let Hh=(()=>(class extends Th{constructor(e,t,n){super(e),this.ngZone=t,n&&function(e){return"server"===e}(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Vh]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,t,n){let i=n;if(!e[Uh]||Jr.isInAngularZone()&&!Gh(t))e.addEventListener(t,i,!1);else{let n=zh[t];n||(n=zh[t]=Bh("ANGULAR"+t+"FALSE"));let r=e[n];const s=r&&r.length>0;r||(r=e[n]=[]);const o=Gh(t)?Zone.root:Zone.current;if(0===r.length)r.push({zone:o,handler:i});else{let e=!1;for(let t=0;t<r.length;t++)if(r[t].handler===i){e=!0;break}e||r.push({zone:o,handler:i})}s||e[Uh](t,Zh,!1)}return()=>this.removeEventListener(e,t,i)}removeEventListener(e,t,n){let i=e[jh];if(!i)return e.removeEventListener.apply(e,[t,n,!1]);let r=zh[t],s=r&&e[r];if(!s)return e.removeEventListener.apply(e,[t,n,!1]);let o=!1;for(let a=0;a<s.length;a++)if(s[a].handler===n){o=!0,s.splice(a,1);break}o?0===s.length&&i.apply(e,[t,Zh,!1]):e.removeEventListener.apply(e,[t,n,!1])}}))();const Wh={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},$h=new ye("HammerGestureConfig"),Jh=new ye("HammerLoader");let Yh=(()=>(class{constructor(){this.events=[],this.overrides={}}buildHammer(e){const t=new Hammer(e,this.options);t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0});for(const n in this.overrides)t.get(n).set(this.overrides[n]);return t}}))(),Kh=(()=>(class extends Th{constructor(e,t,n,i){super(e),this._config=t,this.console=n,this.loader=i}supports(e){return!(!Wh.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(e,t,n){const i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){let i=!1,r=()=>{i=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(r=()=>{});i||(r=this.addEventListener(e,t,n))}).catch(()=>{this.console.warn(`The "${t}" event cannot be bound because the custom `+"Hammer.JS loader failed."),r=()=>{}}),()=>{r()}}return i.runOutsideAngular(()=>{const r=this._config.buildHammer(e),s=function(e){i.runGuarded(function(){n(e)})};return r.on(t,s),()=>{r.off(t,s),"function"==typeof r.destroy&&r.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}))();const Qh=["alt","control","meta","shift"],Xh={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ec=(()=>{class e extends Th{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const r=e.parseEventName(n),s=e.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>nh().onAndCancel(t,r.domEventName,s))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=e._normalizeKey(n.pop());let s="";if(Qh.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(e){let t="",n=nh().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Qh.forEach(i=>{i!=n&&(0,Xh[i])(e)&&(t+=i+".")}),t+=n}static eventCallback(t,n,i){return r=>{e.getEventFullKey(r)===t&&i.runGuarded(()=>n(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e})();class tc{}let nc=(()=>(class extends tc{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case yt.NONE:return t;case yt.HTML:return t instanceof rc?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){let n=null;try{gt=gt||new Ke(e);let i=t?String(t):"";n=gt.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=gt.getInertBodyElement(i)}while(i!==s);const o=new dt,a=o.sanitizeChildren(_t(n)||n);return Ye()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const e=_t(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(t)));case yt.STYLE:return t instanceof sc?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";const t=e.match(wt);return t&&et(t[1])===t[1]||e.match(bt)&&function(e){let t=!0,n=!0;for(let i=0;i<e.length;i++){const r=e.charAt(i);"'"===r&&n?t=!t:'"'===r&&t&&(n=!n)}return t&&n}(e)?e:(Ye()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(t));case yt.SCRIPT:if(t instanceof oc)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case yt.URL:return t instanceof lc||t instanceof ac?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),et(String(t)));case yt.RESOURCE_URL:if(t instanceof lc)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,t){if(e instanceof ic)throw new Error(`Required a safe ${t}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new rc(e)}bypassSecurityTrustStyle(e){return new sc(e)}bypassSecurityTrustScript(e){return new oc(e)}bypassSecurityTrustUrl(e){return new ac(e)}bypassSecurityTrustResourceUrl(e){return new lc(e)}}))();class ic{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class rc extends ic{getTypeName(){return"HTML"}}class sc extends ic{getTypeName(){return"Style"}}class oc extends ic{getTypeName(){return"Script"}}class ac extends ic{getTypeName(){return"URL"}}class lc extends ic{getTypeName(){return"ResourceURL"}}const uc=hs(xs,"browser",[{provide:Ar,useValue:"browser"},{provide:Ir,useValue:function(){hh.makeCurrent(),_h.init()},multi:!0},{provide:Na,useClass:fh,deps:[Xa]},{provide:Xa,useFactory:function(){return document},deps:[]}]);function hc(){return new Lt}let cc=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Sr,useValue:t.appId},{provide:mh,useExisting:Sr},gh]}}}return e})();function dc(e,t){return new y(n=>{const i=e.length;if(0===i)return void n.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=U(e[a]);let u=!1;n.add(l.subscribe({next:e=>{u||(u=!0,o++),r[a]=e},error:e=>n.error(e),complete:()=>{++s!==i&&u||(o===i&&n.next(t?t.reduce((e,t,n)=>(e[t]=r[n],e),{}):r),n.complete())}}))}})}"undefined"!=typeof window&&window;const pc=new ye("NgValueAccessor");let fc=(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))();const mc=new ye("CompositionEventMode");let gc=(()=>(class{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=nh()?nh().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}))();class _c{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class yc extends _c{get formDirective(){return null}get path(){return null}}function vc(){throw new Error("unimplemented")}class bc extends _c{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return vc()}get asyncValidator(){return vc()}}let wc=(()=>(class extends class{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(e){super(e)}}))();function xc(e){return null==e||0===e.length}const Tc=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class Cc{static min(e){return t=>{if(xc(t.value)||xc(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(xc(t.value)||xc(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return xc(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return xc(e.value)?null:Tc.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(xc(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return Cc.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(xc(e.value))return null;const i=e.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(Lc);return 0==t.length?null:function(e){return Ec(function(e,n){return t.map(t=>t(e))}(e))}}static composeAsync(e){if(!e)return null;const t=e.filter(Lc);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if(l(t))return dc(t,null);if(u(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return dc(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return dc(e=1===e.length&&l(e[0])?e[0]:e,null).pipe(R(e=>t(...e)))}return dc(e,null)}(function(e,n){return t.map(t=>t(e))}(e).map(Sc)).pipe(R(Ec))}}}function Lc(e){return null!=e}function Sc(e){const t=Rt(e)?U(e):e;if(!Nt(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Ec(e){const t=e.reduce((e,t)=>null!=t?Object.assign({},e,t):e,{});return 0===Object.keys(t).length?null:t}function Pc(e){return e.validate?t=>e.validate(t):e}function Ic(e){return e.validate?t=>e.validate(t):e}let Ac=(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),kc=(()=>(class{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}))(),Mc=(()=>(class{constructor(e,t,n,i){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=i,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(bc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}))();const Oc={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};function Dc(e,t){return[...t.path,e]}function Rc(e,t){e||Fc(t,"Cannot find control with"),t.valueAccessor||Fc(t,"No value accessor for form control with"),e.validator=Cc.compose([e.validator,t.validator]),e.asyncValidator=Cc.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Nc(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Nc(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function Nc(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Fc(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function Bc(e){return null!=e?Cc.compose(e.map(Pc)):null}function Uc(e){return null!=e?Cc.composeAsync(e.map(Ic)):null}const jc=[fc,(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),Ac,(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=At}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}))(),(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=At}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const i=e.item(t),r=this._getOptionValue(i.value);n.push(r)}}else{const e=t.options;for(let t=0;t<e.length;t++){const i=e.item(t);if(i.selected){const e=this._getOptionValue(i.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}))(),Mc],zc="VALID",Vc="INVALID",qc="PENDING",Gc="DISABLED";function Zc(e){const t=Wc(e)?e.validators:e;return Array.isArray(t)?Bc(t):t||null}function Hc(e,t){const n=Wc(t)?t.asyncValidators:e;return Array.isArray(n)?Uc(n):n||null}function Wc(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class $c{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===zc}get invalid(){return this.status===Vc}get pending(){return this.status==qc}get disabled(){return this.status===Gc}get enabled(){return this.status!==Gc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=Zc(e)}setAsyncValidators(e){this.asyncValidator=Hc(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=qc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gc,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zc,this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==zc&&this.status!==qc||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gc:zc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=qc;const t=Sc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce((e,t)=>e instanceof Yc?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Kc&&e.at(t)||null,e))}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new wr,this.statusChanges=new wr}_calculateStatus(){return this._allControlsDisabled()?Gc:this.errors?Vc:this._anyControlsHaveStatus(qc)?qc:this._anyControlsHaveStatus(Vc)?Vc:zc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Jc extends $c{constructor(e=null,t,n){super(Zc(t),Hc(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Yc extends $c{constructor(e,t,n){super(Zc(t),Hc(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Jc?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,i)=>{t=t||this.contains(i)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,i)=>{n=t(n,e,i)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Kc extends $c{constructor(e,t,n){super(Zc(t),Hc(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Jc?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Qc=(()=>Promise.resolve(null))();let Xc=(()=>(class extends yc{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new wr,this.form=new Yc({},Bc(e),Uc(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Qc.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Rc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Qc.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),function(t,n){const i=t.indexOf(e);i>-1&&t.splice(i,1)}(this._directives)})}addFormGroup(e){Qc.then(()=>{const t=this._findContainer(e.path),n=new Yc({});(function(e,t){null==e&&Fc(t,"Cannot find control with"),e.validator=Cc.compose([e.validator,t.validator]),e.asyncValidator=Cc.composeAsync([e.asyncValidator,t.asyncValidator])})(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Qc.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Qc.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}))();class ed{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${Oc.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${Oc.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${Oc.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${Oc.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${Oc.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${Oc.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const td=new ye("NgFormSelectorWarning");class nd extends yc{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Dc(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Bc(this._validators)}get asyncValidator(){return Uc(this._asyncValidators)}_checkParentType(){}}let id=(()=>{class e extends nd{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){this._parent instanceof e||this._parent instanceof Xc||ed.modelGroupParentException()}}return e})();const rd=(()=>Promise.resolve(null))();let sd=(()=>(class extends bc{constructor(e,t,n,i){super(),this.control=new Jc,this._registered=!1,this.update=new wr,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||Fc(e,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,r=void 0;return t.forEach(t=>{t.constructor===gc?n=t:function(e){return jc.some(t=>e.constructor===t)}(t)?(i&&Fc(e,"More than one built-in value accessor matches form control with"),i=t):(r&&Fc(e,"More than one custom value accessor matches form control with"),r=t)}),r||i||n||(Fc(e,"No valid value accessor for form control with"),null)}(this,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!At(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Dc(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Bc(this._rawValidators)}get asyncValidator(){return Uc(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof id)&&this._parent instanceof nd?ed.formGroupNameException():this._parent instanceof id||this._parent instanceof Xc||ed.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||ed.missingNameException()}_updateValue(e){rd.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;rd.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}))(),od=(()=>(class{}))(),ad=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:td,useValue:t.warnOnDeprecatedNgFormSelector}]}}}return e})();const ld="http://www.geoplatform.gov/ont/openmap/GeoplatformMap",ud="development"===Qo.env;class hd extends nu{constructor(e,t){super(t),this.isCollapsed=!1,this.hostCollapsed=!1,this.isKeywordsCollapsed=!0,this.mapItem={id:null,uri:null,type:ea.ItemTypes.MAP,title:"My New Map",description:"This map needs a description",keywords:[],createdBy:"tester",resourceTypes:[],layers:[],themes:[],topics:[],publishers:[],usedBy:[],classifiers:{},extent:{}},this.itemService=Wl(e)}ngOnInit(){super.ngOnInit(),this.itemService.getClient().setAuthToken(()=>this.getAuthToken()),this.data&&(this.dataSubscription=this.data.subscribe(e=>{this.onDataEvent(e)}))}ngOnChanges(e){e.isCollapsed&&(this.hostCollapsed=e.isCollapsed.currentValue)}ngOnDestroy(){super.ngOnDestroy(),this.itemService=null,this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.keyword=null,this.mapItem=null}onUserChange(e){Ql.debug("User has changed: "+(e?e.username:"N/A")),this.mapItem.createdBy=e?e.username:null}createMap(){this.isSaving=!0,this.mapItem.createdBy?Promise.resolve(this.getUser()).then(e=>ud?(this.onUserChange(e),Promise.resolve(null)):this.checkAuth().then(e=>{if(this.onUserChange(e),!e)throw new Error("Not signed in")})).then(()=>this.itemService.getUri(this.mapItem)).then(e=>{if(!e)throw new Error("Unable to generate a URI for the new map");return this.mapItem.uri=e,this.mapItem}).then(e=>(this.mapItem.layers=this.data.getSelected(!0).map(e=>({layer:{id:e.id,uri:e.uri,type:e.type},layerId:e.id,visibility:this.data.isVisible(e),opacity:1})),this.mapItem.baseLayer=this.data.getBaseLayer(),this.itemService.save(e))).then(e=>{if(!e)throw new Error("No response when attempting to create the map");this.isSaving=!1,window.location.href="/resources/maps/"+e.id}).catch(e=>{if(this.isSaving=!1,~e.message.indexOf("it matches an existing item; ID:")){let t=new RegExp(/ID\:\s([a-z0-9]+)\sURI/gi).exec(e.message);if(t&&t.length){let n=t[1],i=window.location.href;i=i.substring(0,i.indexOf("/resources/map"))+"/resources/maps/"+n,e.message='The map you are creating already exists. <a target="_blank" href="'+i+'">View item</a>'}}this.error=e,Ql.error("Unable to create map because of: "+e.message)}):Ql.warn("User not authenticated, aborting create...")}addKeyword(e){let t=e?e.target.value:this.keyword;t&&t.length&&this.mapItem.keywords.indexOf(t)<0&&(this.mapItem.keywords.push(t),e&&(e.target.value=""),this.keyword="")}onDataEvent(e){switch(Ql.debug("MapLayers.onDataEvent("+e.type.toString()+")"),e.type){case Xl.ADD:let t=this.data.getDetails();this.updateDetails(t);break;case Xl.DEL:break;case Xl.EXTENT:e.data&&e.data.length&&(this.mapItem.extent=e.data[0])}}updateDetails(e){Object.keys(this.mapItem).forEach(t=>{let n=e[t]||null;"title"===t&&(n="Map of "+n),this.mapItem[t]=n}),this.ensureExtent(),this.ensureResourceTypes()}ensureExtent(){this.mapItem&&(this.mapItem.extent?(null==this.mapItem.extent.minx&&(this.mapItem.extent.minx=-120),null==this.mapItem.extent.miny&&(this.mapItem.extent.miny=20),null==this.mapItem.extent.maxx&&(this.mapItem.extent.maxx=-76),null==this.mapItem.extent.maxy&&(this.mapItem.extent.maxy=50)):this.mapItem.extent={minx:-120,miny:20,maxx:-76,maxy:50})}ensureResourceTypes(){this.mapItem&&(this.mapItem.resourceTypes=this.mapItem.resourceTypes||[],this.mapItem.resourceTypes.length||this.mapItem.resourceTypes.push(ld))}getUser(){return"development"===Qo.env?{username:"tester"}:super.getUser()}}class cd{constructor(){this.isCollapsed=!0}}var dd=Vn({encapsulation:0,styles:[["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1;width:100%;height:100%}.isCollapsed[_nghost-%COMP%]{height:0;-webkit-box-flex:0;flex:0;overflow:hidden}.o-map-details[_ngcontent-%COMP%]{display:-webkit-box;display:flex;position:relative;width:100%;height:100%;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch;padding:.5em 1em;background:#fff;border-radius:4px;-webkit-transition:width .3s linear,height .3s linear;transition:width .3s linear,height .3s linear}.o-map-details[_ngcontent-%COMP%]   .m-article[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch;padding-bottom:1em;margin-bottom:0}.o-map-details[_ngcontent-%COMP%]   .m-article[_ngcontent-%COMP%]:only-child{border-bottom:none}.o-map-details[_ngcontent-%COMP%]   .o-map-details__content[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.o-map-details[_ngcontent-%COMP%]   .o-map-details__footer[_ngcontent-%COMP%]{padding-top:1em;border-top:1px solid #ddd;background:#fff}"]],data:{}});function pd(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"span",[["class","fas fa-exclamation-circle t-fg--danger"]],null,null,null,null,null))],null,null)}function fd(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"span",[["class","fas fa-chevron-down"]],null,null,null,null,null))],null,null)}function md(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"span",[["class","fas fa-chevron-up"]],null,null,null,null,null))],null,null)}function gd(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"span",[["class","a-keyword"]],null,null,null,null,null)),(e()(),zs(1,null,[" "," "]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function _d(e){return Gs(0,[(e()(),Is(0,0,null,null,13,"div",[],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,gd)),Xi(2,278528,null,0,Wa,[Cn,xn,mn],{ngForOf:[0,"ngForOf"]},null),(e()(),Is(3,0,null,null,8,"div",[["class","input-group-slick"]],null,null,null,null,null)),(e()(),Is(4,0,null,null,5,"input",[["class","form-control"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var i=!0,r=e.component;return"input"===t&&(i=!1!==ji(e,5)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==ji(e,5).onTouched()&&i),"compositionstart"===t&&(i=!1!==ji(e,5)._compositionStart()&&i),"compositionend"===t&&(i=!1!==ji(e,5)._compositionEnd(n.target.value)&&i),"ngModelChange"===t&&(i=!1!==(r.keyword=n)&&i),"keyup.enter"===t&&(i=!1!==r.addKeyword(n)&&i),i},null,null)),Xi(5,16384,null,0,gc,[en,Jt,[2,mc]],null,null),er(1024,null,pc,function(e){return[e]},[gc]),Xi(7,671744,null,0,sd,[[8,null],[8,null],[8,null],[6,pc]],{model:[0,"model"]},{update:"ngModelChange"}),er(2048,null,bc,null,[sd]),Xi(9,16384,null,0,wc,[[4,bc]],null,null),(e()(),Is(10,0,null,null,1,"button",[["class","btn btn-secondary"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.addKeyword()&&i),i},null,null)),(e()(),Is(11,0,null,null,0,"span",[["class","fas fa-plus"]],null,null,null,null,null)),(e()(),Is(12,0,null,null,1,"div",[["class","u-text--sm t-fg--gray-md"]],null,null,null,null,null)),(e()(),zs(-1,null,["Provide keywords for the map"]))],function(e,t){var n=t.component;e(t,2,0,n.mapItem.keywords),e(t,7,0,n.keyword)},function(e,t){e(t,4,0,ji(t,9).ngClassUntouched,ji(t,9).ngClassTouched,ji(t,9).ngClassPristine,ji(t,9).ngClassDirty,ji(t,9).ngClassValid,ji(t,9).ngClassInvalid,ji(t,9).ngClassPending)})}function yd(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"div",[["class","m-message--warning"]],null,null,null,null,null)),(e()(),zs(-1,null,[" You must be signed in to a GeoPlatform account in order to create this map. "]))],null,null)}function vd(e){return Gs(0,[(e()(),Is(0,0,null,null,7,"div",[["class","m-message--error"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),Is(2,0,null,null,0,"span",[["class","gpicons exclamation-circle"]],null,null,null,null,null)),(e()(),zs(-1,null,[" Unable to Create Map "])),(e()(),Is(4,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Is(5,0,null,null,2,"div",[["class","u-text--right"]],null,null,null,null,null)),(e()(),Is(6,0,null,null,1,"button",[["class","btn btn-sm btn-light"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==(e.component.error=null)&&i),i},null,null)),(e()(),zs(-1,null,[" DISMISS "]))],null,function(e,t){e(t,4,0,t.component.error.message)})}function bd(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),zs(-1,null,["Create"]))],null,null)}function wd(e){return Gs(0,[(e()(),Is(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),Is(1,0,null,null,0,"span",[["class","fas fa-hourglass fa-spin"]],null,null,null,null,null)),(e()(),zs(-1,null,[" Creating... "]))],null,null)}function xd(e){return Gs(0,[(e()(),Is(0,0,null,null,5,"div",[["class","m-article__desc"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,4,"button",[["class","btn btn-block btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.createMap()&&i),i},null,null)),(e()(),Ps(16777216,null,null,1,null,bd)),Xi(3,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,wd)),Xi(5,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,3,0,!n.isSaving),e(t,5,0,n.isSaving)},function(e,t){e(t,1,0,t.component.isSaving)})}function Td(e){return Gs(0,[(e()(),Is(0,0,null,null,59,"div",[["class","o-map-details"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,51,"div",[["class","o-map-details__content"]],null,null,null,null,null)),(e()(),Is(2,0,null,null,50,"div",[["class","m-article"]],null,null,null,null,null)),(e()(),Is(3,0,null,null,15,"div",[["class","m-article__desc"]],null,null,null,null,null)),(e()(),Is(4,0,null,null,3,"div",[["class","a-heading"]],null,null,null,null,null)),(e()(),zs(-1,null,["Title "])),(e()(),Is(6,0,null,null,1,"sup",[["class","t-fg--danger"]],null,null,null,null,null)),(e()(),zs(-1,null,["*"])),(e()(),Is(8,0,null,null,8,"div",[["class","input-group-slick"]],null,null,null,null,null)),(e()(),Is(9,0,null,null,5,"input",[["class","form-control"],["placeholder","A title is required"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var i=!0,r=e.component;return"input"===t&&(i=!1!==ji(e,10)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==ji(e,10).onTouched()&&i),"compositionstart"===t&&(i=!1!==ji(e,10)._compositionStart()&&i),"compositionend"===t&&(i=!1!==ji(e,10)._compositionEnd(n.target.value)&&i),"ngModelChange"===t&&(i=!1!==(r.mapItem.title=n)&&i),i},null,null)),Xi(10,16384,null,0,gc,[en,Jt,[2,mc]],null,null),er(1024,null,pc,function(e){return[e]},[gc]),Xi(12,671744,null,0,sd,[[8,null],[8,null],[8,null],[6,pc]],{model:[0,"model"]},{update:"ngModelChange"}),er(2048,null,bc,null,[sd]),Xi(14,16384,null,0,wc,[[4,bc]],null,null),(e()(),Ps(16777216,null,null,1,null,pd)),Xi(16,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Is(17,0,null,null,1,"div",[["class","u-text--sm t-fg--gray-md"]],null,null,null,null,null)),(e()(),zs(-1,null,["Provide a brief but unique name for the map"])),(e()(),Is(19,0,null,null,10,"div",[["class","m-article__desc"]],null,null,null,null,null)),(e()(),Is(20,0,null,null,1,"div",[["class","a-heading"]],null,null,null,null,null)),(e()(),zs(-1,null,["Description"])),(e()(),Is(22,0,null,null,5,"textarea",[["class","form-control"],["placeholder","A description is recommended"],["rows","3"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var i=!0,r=e.component;return"input"===t&&(i=!1!==ji(e,23)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==ji(e,23).onTouched()&&i),"compositionstart"===t&&(i=!1!==ji(e,23)._compositionStart()&&i),"compositionend"===t&&(i=!1!==ji(e,23)._compositionEnd(n.target.value)&&i),"ngModelChange"===t&&(i=!1!==(r.mapItem.description=n)&&i),i},null,null)),Xi(23,16384,null,0,gc,[en,Jt,[2,mc]],null,null),er(1024,null,pc,function(e){return[e]},[gc]),Xi(25,671744,null,0,sd,[[8,null],[8,null],[8,null],[6,pc]],{model:[0,"model"]},{update:"ngModelChange"}),er(2048,null,bc,null,[sd]),Xi(27,16384,null,0,wc,[[4,bc]],null,null),(e()(),Is(28,0,null,null,1,"div",[["class","u-text--sm t-fg--gray-md"]],null,null,null,null,null)),(e()(),zs(-1,null,["Provide a description of the map"])),(e()(),Is(30,0,null,null,10,"div",[["class","m-article__desc"]],null,null,null,null,null)),(e()(),Is(31,0,null,null,7,"div",[["class","a-heading"]],null,null,null,null,null)),(e()(),Is(32,0,null,null,0,"span",[["class","fas fa-tag"]],null,null,null,null,null)),(e()(),zs(33,null,[" Keywords (",") "])),(e()(),Is(34,0,null,null,4,"button",[["class","btn btn-sm btn-link"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=0!=(r.isKeywordsCollapsed=!r.isKeywordsCollapsed)&&i),i},null,null)),(e()(),Ps(16777216,null,null,1,null,fd)),Xi(36,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,md)),Xi(38,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,_d)),Xi(40,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Is(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Is(42,0,null,null,1,"gpmp-array-property",[],null,null,null,kd,Ld)),Xi(43,49152,null,0,cd,[],{field:[0,"field"],label:[1,"label"],value:[2,"value"],iconClass:[3,"iconClass"]},null),(e()(),Is(44,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Is(45,0,null,null,1,"gpmp-array-property",[],null,null,null,kd,Ld)),Xi(46,49152,null,0,cd,[],{field:[0,"field"],label:[1,"label"],value:[2,"value"],iconClass:[3,"iconClass"]},null),(e()(),Is(47,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Is(48,0,null,null,1,"gpmp-array-property",[],null,null,null,kd,Ld)),Xi(49,49152,null,0,cd,[],{field:[0,"field"],label:[1,"label"],value:[2,"value"],iconClass:[3,"iconClass"]},null),(e()(),Is(50,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Is(51,0,null,null,1,"gpmp-array-property",[],null,null,null,kd,Ld)),Xi(52,49152,null,0,cd,[],{field:[0,"field"],label:[1,"label"],value:[2,"value"],iconClass:[3,"iconClass"]},null),(e()(),Is(53,0,null,null,6,"div",[["class","o-map-details__footer"]],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,yd)),Xi(55,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,vd)),Xi(57,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,xd)),Xi(59,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,12,0,n.mapItem.title),e(t,16,0,!n.mapItem.title||!n.mapItem.title.length),e(t,25,0,n.mapItem.description),e(t,36,0,n.isKeywordsCollapsed),e(t,38,0,!n.isKeywordsCollapsed),e(t,40,0,!n.isKeywordsCollapsed),e(t,43,0,"themes","Themes",null==n.mapItem?null:n.mapItem.themes,"icon-concept"),e(t,46,0,"topics","Topics",null==n.mapItem?null:n.mapItem.topics,"icon-topic"),e(t,49,0,"publishers","Publishers",null==n.mapItem?null:n.mapItem.publishers,"icon-organization"),e(t,52,0,"usedBy","Communities",null==n.mapItem?null:n.mapItem.usedBy,"icon-community"),e(t,55,0,!n.getUser()),e(t,57,0,n.error),e(t,59,0,n.getUser())},function(e,t){var n=t.component;e(t,9,0,ji(t,14).ngClassUntouched,ji(t,14).ngClassTouched,ji(t,14).ngClassPristine,ji(t,14).ngClassDirty,ji(t,14).ngClassValid,ji(t,14).ngClassInvalid,ji(t,14).ngClassPending),e(t,22,0,ji(t,27).ngClassUntouched,ji(t,27).ngClassTouched,ji(t,27).ngClassPristine,ji(t,27).ngClassDirty,ji(t,27).ngClassValid,ji(t,27).ngClassInvalid,ji(t,27).ngClassPending),e(t,33,0,(null==n.mapItem.keywords?null:n.mapItem.keywords.length)||0)})}function Cd(e){return Gs(0,[(e()(),Ps(16777216,null,null,1,null,Td)),Xi(1,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,1,0,!t.component.isCollapsed)},null)}var Ld=Vn({encapsulation:2,styles:[],data:{}});function Sd(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"span",[],[[8,"className",0]],null,null,null,null))],null,function(e,t){e(t,0,0,fi(1,"",t.component.iconClass,""))})}function Ed(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"span",[["class","fas fa-chevron-down"]],null,null,null,null,null))],null,null)}function Pd(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"span",[["class","fas fa-chevron-up"]],null,null,null,null,null))],null,null)}function Id(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"span",[["class","a-keyword"]],null,null,null,null,null)),(e()(),zs(1,null,["",""]))],null,function(e,t){e(t,1,0,t.context.$implicit.label||"Untitled Resource")})}function Ad(e){return Gs(0,[(e()(),Is(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,Id)),Xi(2,278528,null,0,Wa,[Cn,xn,mn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,2,0,t.component.value)},null)}function kd(e){return Gs(0,[(e()(),Is(0,0,null,null,11,"div",[["class","m-article__desc"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,8,"div",[["class","a-heading"]],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,Sd)),Xi(3,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),zs(4,null,[" "," (",") "])),(e()(),Is(5,0,null,null,4,"button",[["class","btn btn-sm btn-link"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=0!=(r.isCollapsed=!r.isCollapsed)&&i),i},null,null)),(e()(),Ps(16777216,null,null,1,null,Ed)),Xi(7,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,Pd)),Xi(9,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,Ad)),Xi(11,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,3,0,n.iconClass),e(t,7,0,n.isCollapsed),e(t,9,0,!n.isCollapsed),e(t,11,0,!n.isCollapsed)},function(e,t){var n=t.component;e(t,4,0,n.label,(null==n.value?null:n.value.length)||0)})}const Md={MAP:"map",AVAILABLE:"available",BASE:"base"},Od="http://www.geoplatform.gov/ont/openlayer/BaseLayer";class Dd{constructor(e){this.isCollapsed=!0,this.hostCollapsed=!0,this.currentSection=Md.AVAILABLE,this.Sections=Md,this.available=[],this.totalAvailable=0,this.baseLayers=[];let t=Jl(e),n=(new ea.Query).resourceTypes(Od).fields("*").facets([]).pageSize(20);t.search(n).then(e=>{this.baseLayers=e.results}).catch(e=>{Ql.error("Unable to fetch available base layer options because of ",e.message)})}ngOnInit(){this.data&&(this.dataSubscription=this.data.subscribe(e=>{this.onDataEvent(e)}))}ngOnChanges(e){e.isCollapsed&&(this.hostCollapsed=e.isCollapsed.currentValue)}ngOnDestroy(){this.dataSubscription.unsubscribe(),this.dataSubscription=null}toggleLayer(e){this.data.toggleData(e)}toggleLayerViz(e){this.data.toggleVisibility(e)}selectBaseLayer(e){this.selectedBaseLayer=e,this.data.trigger({type:Xl.BASE,data:[e]})}isLayerSelected(e){return this.data.isSelected(e)}isVisible(e){return this.data.isVisible(e)}onDataEvent(e){switch(Ql.debug("AvailableLayers.onDataEvent("+e.type.toString()+")"),e.type){case Xl.ON:case Xl.OFF:this.activeLayers=this.data.getSelected(!0);break;case Xl.ADD:this.organizeLayers(),e.warning&&(this.warning=e.warning),this.data.getData().length<10&&this.data.toggleData(this.available)}}organizeLayers(){this.totalAvailable=0,this.available=[],this.services=[];let e=this.data.getData();this.available=e.map(t=>t.parentLayer?null:(this.totalAvailable++,this.available.push(t),this.processSubLayers(t,e),t)).filter(e=>!!e),this.services.sort((e,t)=>e.label<t.label?-1:1),this.available.sort((e,t)=>e.label<t.label?-1:1)}processSubLayers(e,t){if(e.subLayers&&e.subLayers.length)e.subLayers.forEach(n=>{this.totalAvailable++,this.processSubLayers(n,t),!n.services&&e.services&&(n.services=e.services.slice(0))});else if(e.subLayer_id&&e.subLayer_id.length){let n=e.subLayer_id;e.subLayers=t.filter(e=>~n.indexOf(e.id)),this.processSubLayers(e,t)}}}class Rd{constructor(){this.isSelected=!1,this.isParentSelected=!1,this.level=0,this.onActivate=new wr,this.isCollapsed=!0}ngOnInit(){this.levelArr=new Array(this.level)}onClick(){this.onActivate.emit(this.item)}toggleLayer(e){this.data.toggleData(e)}isLayerSelected(){return this.isSelected||this.isParentSelected}}class Nd{constructor(){this.fallback=`${Qo.assets}/img-404.png`}onImgError(){this.src=this.fallback}onImgLoad(){this.className="is-image-loaded"}}class Fd{constructor(e){this.sanitizer=e}ngOnInit(){}getThumbnailUrl(){return this.item.thumbnail&&this.item.thumbnail.url?this.item.thumbnail.url:ea.Config.ualUrl+"/api/items/"+this.item.id+"/thumbnail"}getBackgroundImage(){if(!this.item||!this.item.thumbnail)return this.getFallbackBackgroundImage();let e=this.item.thumbnail;return e.contentData?this.sanitizer.bypassSecurityTrustStyle(`url(data:${e.mediaType||"image/png"};base64,${e.contentData})`):void 0}getFallbackBackgroundImage(){return`url(${this.getFallbackUrl()})`}isEmpty(){return!this.item||!this.item.thumbnail||!this.item.thumbnail.url&&!this.item.thumbnail.contentData}hasURL(){return this.item.thumbnail&&!!this.item.thumbnail.url}hasContentData(){return this.item.thumbnail&&!!this.item.thumbnail.contentData&&!this.item.thumbnail.url}getFallbackUrl(){return ea.Config.ualUrl+"/api/items/"+this.item.id+"/thumbnail"}}var Bd=Vn({encapsulation:0,styles:[[".m-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}"]],data:{}});function Ud(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"div",[["class","is-16x9 is-fallback"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,0,"div",[],[[4,"background-size",null],[4,"background-repeat",null],[4,"background-position",null],[4,"background-image",null]],null,null,null,null))],null,function(e,t){e(t,1,0,"contain","no-repeat","50% 0",t.component.getFallbackBackgroundImage())})}function jd(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"img",[],[[8,"src",4],[8,"className",0]],[[null,"error"],[null,"load"]],function(e,t,n){var i=!0;return"error"===t&&(i=!1!==ji(e,1).onImgError()&&i),"load"===t&&(i=!1!==ji(e,1).onImgLoad()&&i),i},null,null)),Xi(1,16384,null,0,Nd,[],{src:[0,"src"],fallback:[1,"fallback"]},null)],function(e,t){var n=t.component;e(t,1,0,fi(1,"",n.item.thumbnail.url,""),fi(1,"",n.getFallbackUrl(),""))},function(e,t){e(t,0,0,ji(t,1).src,ji(t,1).className)})}function zd(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"div",[["class","is-16x9"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,0,"img",[],[[4,"background-size",null],[4,"background-repeat",null],[4,"background-image",null]],null,null,null,null))],null,function(e,t){e(t,1,0,"contain","no-repeat",t.component.getBackgroundImage())})}function Vd(e){return Gs(0,[(e()(),Is(0,0,null,null,6,"div",[["class","m-thumbnail"],["style","position:relative"]],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,Ud)),Xi(2,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,jd)),Xi(4,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,zd)),Xi(6,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.isEmpty()),e(t,4,0,n.hasURL()),e(t,6,0,n.hasContentData())},null)}var qd=Vn({encapsulation:0,styles:[["[_nghost-%COMP%]{display:-webkit-box;display:flex;overflow:hidden;-webkit-box-flex:1;flex:1;width:100%;height:100%}.isCollapsed[_nghost-%COMP%]{height:0;-webkit-box-flex:0;flex:0;overflow:hidden}.o-map-layers[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;padding:.5em .125em;background:#fff;border-radius:4px;-webkit-transition:width .3s linear,height .3s linear;transition:width .3s linear,height .3s linear}.o-map-layers[_ngcontent-%COMP%]   .o-map-layers__container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch;height:100%;overflow:hidden;padding-bottom:.75em}.o-map-layers[_ngcontent-%COMP%]   .o-map-layers__content[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;padding:1em .25em 0;overflow-y:auto}.nav-pills[_ngcontent-%COMP%]{font-size:.875em;margin-top:.5em;border-bottom-color:#e6e6e6}.nav-pills[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{color:#999}.nav-pills[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:hover{cursor:pointer}.nav-pills[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]:hover{color:#fff}.o-base-layers[_ngcontent-%COMP%]   .m-results-item[_ngcontent-%COMP%]{margin:.5em;cursor:pointer}.o-base-layers[_ngcontent-%COMP%]   .m-results-item[_ngcontent-%COMP%]   .m-results-item__body[_ngcontent-%COMP%]{padding:.25em}.o-base-layers[_ngcontent-%COMP%]   .m-results-item.active[_ngcontent-%COMP%]{background-color:rgba(91,155,202,.15);border-color:#5b9bca}"]],data:{}});function Gd(e){return Gs(0,[(e()(),Is(0,0,null,null,2,"div",[["class","t-fg--gray-md u-text--sm"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),zs(-1,null,[' Add layers to the map using the checkboxes next to layers in the "Available" list ']))],null,null)}function Zd(e){return Gs(0,[(e()(),Is(0,0,null,null,7,"div",[["class","m-layer-item"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,4,"button",[["class","btn btn-sm btn-link"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.toggleLayerViz(e.context.$implicit)&&i),i},null,null)),(e()(),Is(2,0,null,null,3,"span",[["class","fas fa-eye"]],null,null,null,null,null)),er(512,null,Va,qa,[mn,gn,Jt,en]),Xi(4,278528,null,0,Za,[Va],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Us(5,{"t-fg--gray-lt":0}),(e()(),Is(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),zs(7,null,["",""]))],function(e,t){var n=e(t,5,0,!t.component.isVisible(t.context.$implicit));e(t,4,0,"fas fa-eye",n)},function(e,t){e(t,7,0,t.context.$implicit.label)})}function Hd(e){return Gs(0,[(e()(),Is(0,0,null,null,4,"div",[["class","m-article__desc"]],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,Gd)),Xi(2,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,Zd)),Xi(4,278528,null,0,Wa,[Cn,xn,mn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,2,0,!n.activeLayers||!n.activeLayers.length),e(t,4,0,n.activeLayers)},null)}function Wd(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"div",[["class","a-message--warning"]],null,null,null,null,null)),(e()(),zs(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.warning)})}function $d(e){return Gs(0,[(e()(),Is(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Is(1,0,null,null,1,"gpmp-layer-available",[],null,[[null,"onActivate"]],function(e,t,n){var i=!0;return"onActivate"===t&&(i=!1!==e.component.toggleLayer(n)&&i),i},ap,np)),Xi(2,114688,null,0,Rd,[],{item:[0,"item"],data:[1,"data"],isSelected:[2,"isSelected"]},{onActivate:"onActivate"})],function(e,t){var n=t.component;e(t,2,0,t.context.$implicit,n.data,n.isLayerSelected(t.context.$implicit))},null)}function Jd(e){return Gs(0,[(e()(),Is(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),zs(-1,null,[" There are no layers to preview for the item. This could be because it has no services associated or no layers configured. If you believe this is an error, contact the "])),(e()(),Is(2,0,null,null,1,"a",[["href","mailto:servicedesk@geoplatform.gov?subject=Map%20Preview%20Plugin"]],null,null,null,null,null)),(e()(),zs(-1,null,[" GeoPlatform Service Desk "])),(e()(),zs(-1,null,[" and let us know. "]))],null,null)}function Yd(e){return Gs(0,[(e()(),Is(0,0,null,null,6,"div",[["class","m-article__desc"]],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,Wd)),Xi(2,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,$d)),Xi(4,278528,null,0,Wa,[Cn,xn,mn],{ngForOf:[0,"ngForOf"]},null),(e()(),Ps(16777216,null,null,1,null,Jd)),Xi(6,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.warning),e(t,4,0,n.available),e(t,6,0,!n.available.length)},null)}function Kd(e){return Gs(0,[(e()(),Is(0,0,null,null,10,"div",[["class","m-results-item"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.selectBaseLayer(e.context.$implicit)&&i),i},null,null)),er(512,null,Va,qa,[mn,gn,Jt,en]),Xi(2,278528,null,0,Za,[Va],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Us(3,{active:0}),(e()(),Is(4,0,null,null,6,"div",[["class","m-results-item__body"]],null,null,null,null,null)),(e()(),Is(5,0,null,null,1,"gpmp-thumbnail",[["class","m-results-item__icon m-results-item__icon--sm"]],null,null,null,Vd,Bd)),Xi(6,114688,null,0,Fd,[tc],{item:[0,"item"]},null),(e()(),Is(7,0,null,null,3,"div",[["class","flex-1"]],null,null,null,null,null)),(e()(),Is(8,0,null,null,2,"div",[["class","m-results-item__heading"]],null,null,null,null,null)),(e()(),Is(9,0,null,null,1,"div",[["class","flex-1"]],null,null,null,null,null)),(e()(),zs(10,null,["",""]))],function(e,t){var n=t.component,i=e(t,3,0,n.selectedBaseLayer&&n.selectedBaseLayer.id===t.context.$implicit.id);e(t,2,0,"m-results-item",i),e(t,6,0,t.context.$implicit)},function(e,t){e(t,10,0,t.context.$implicit.label)})}function Qd(e){return Gs(0,[(e()(),Is(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),zs(-1,null,[" There are no base layers to choose from, probably because of an error. Please, contact the "])),(e()(),Is(2,0,null,null,1,"a",[["href","mailto:servicedesk@geoplatform.gov?subject=Map%20Preview%20Plugin"]],null,null,null,null,null)),(e()(),zs(-1,null,[" GeoPlatform Service Desk "])),(e()(),zs(-1,null,[" and let us know. "]))],null,null)}function Xd(e){return Gs(0,[(e()(),Is(0,0,null,null,4,"div",[["class","m-article__desc o-base-layers"]],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,Kd)),Xi(2,278528,null,0,Wa,[Cn,xn,mn],{ngForOf:[0,"ngForOf"]},null),(e()(),Ps(16777216,null,null,1,null,Qd)),Xi(4,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.baseLayers),e(t,4,0,!n.baseLayers.length)},null)}function ep(e){return Gs(0,[(e()(),Is(0,0,null,null,28,"div",[["class","o-map-layers"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,27,"div",[["class","m-article o-map-layers__container"]],null,null,null,null,null)),(e()(),Is(2,0,null,null,26,"div",[["class","m-article__desc flex-1 d-flex flex-column flex-align-stretch"]],null,null,null,null,null)),(e()(),Is(3,0,null,null,18,"ul",[["class","nav nav-pills"]],null,null,null,null,null)),(e()(),Is(4,0,null,null,5,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),Is(5,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==(r.currentSection=r.Sections.MAP)&&i),i},null,null)),er(512,null,Va,qa,[mn,gn,Jt,en]),Xi(7,278528,null,0,Za,[Va],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Us(8,{active:0}),(e()(),zs(9,null,[" On Map (",") "])),(e()(),Is(10,0,null,null,5,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),Is(11,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==(r.currentSection=r.Sections.AVAILABLE)&&i),i},null,null)),er(512,null,Va,qa,[mn,gn,Jt,en]),Xi(13,278528,null,0,Za,[Va],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Us(14,{active:0}),(e()(),zs(15,null,[" Available (",") "])),(e()(),Is(16,0,null,null,5,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),Is(17,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==(r.currentSection=r.Sections.BASE)&&i),i},null,null)),er(512,null,Va,qa,[mn,gn,Jt,en]),Xi(19,278528,null,0,Za,[Va],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Us(20,{active:0}),(e()(),zs(-1,null,[" Base Layer "])),(e()(),Is(22,0,null,null,6,"div",[["class","o-map-layers__content"]],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,Hd)),Xi(24,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,Yd)),Xi(26,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,Xd)),Xi(28,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component,i=e(t,8,0,n.Sections.MAP===n.currentSection);e(t,7,0,"nav-link",i);var r=e(t,14,0,n.Sections.AVAILABLE===n.currentSection);e(t,13,0,"nav-link",r);var s=e(t,20,0,n.Sections.BASE===n.currentSection);e(t,19,0,"nav-link",s),e(t,24,0,n.Sections.MAP===n.currentSection),e(t,26,0,n.Sections.AVAILABLE===n.currentSection),e(t,28,0,n.Sections.BASE===n.currentSection)},function(e,t){var n=t.component;e(t,9,0,(null==n.activeLayers?null:n.activeLayers.length)||0),e(t,15,0,n.totalAvailable)})}function tp(e){return Gs(0,[(e()(),Ps(16777216,null,null,1,null,ep)),Xi(1,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,1,0,!t.component.isCollapsed)},null)}var np=Vn({encapsulation:0,styles:[[".m-layer-item[_ngcontent-%COMP%], [_nghost-%COMP%]{white-space:nowrap;width:100%;overflow:hidden;text-overflow:ellipsis;margin-top:.25em;font-size:.975em}.m-layer-item[_ngcontent-%COMP%]   a.flex-1[_ngcontent-%COMP%]{white-space:normal;line-height:1.25}.m-layer-item__additional[_ngcontent-%COMP%]{font-size:.875em;margin-left:2em;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.m-layer-item__additional.is-collapsed[_ngcontent-%COMP%]{height:0}"]],data:{}});function ip(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"span",[["class","far fa-square t-fg--gray-md"]],null,null,null,null,null))],null,null)}function rp(e){return Gs(0,[(e()(),Is(0,0,null,null,3,"span",[["class","far fa-check-square"]],null,null,null,null,null)),er(512,null,Va,qa,[mn,gn,Jt,en]),Xi(2,278528,null,0,Za,[Va],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Us(3,{"t-fg--gray-lt":0})],function(e,t){var n=t.component,i=e(t,3,0,!n.isSelected&&n.isParentSelected);e(t,2,0,"far fa-check-square",i)},null)}function sp(e){return Gs(0,[(e()(),Is(0,0,null,null,0,"div",[["class","fas fa-level-up-alt fa-rotate-90  u-mg-left--xxs u-mg-right--sm t-fg--gray-lt"]],null,null,null,null,null))],null,null)}function op(e){return Gs(0,[(e()(),Is(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Is(1,0,null,null,1,"gpmp-layer-available",[],null,[[null,"onActivate"]],function(e,t,n){var i=!0;return"onActivate"===t&&(i=!1!==e.component.toggleLayer(n)&&i),i},ap,np)),Xi(2,114688,null,0,Rd,[],{item:[0,"item"],data:[1,"data"],isSelected:[2,"isSelected"],isParentSelected:[3,"isParentSelected"],level:[4,"level"]},{onActivate:"onActivate"})],function(e,t){var n=t.component;e(t,2,0,t.context.$implicit,n.data,n.data.isSelected(t.context.$implicit),n.isSelected||n.isParentSelected,n.level+1)},null)}function ap(e){return Gs(0,[(e()(),Is(0,0,null,null,13,"div",[["class","m-layer-item"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,10,"div",[["class","d-flex flex-justify-between flex-align-center"]],null,null,null,null,null)),(e()(),Is(2,0,null,null,4,"button",[["class","btn btn-sm btn-link"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.onClick()&&i),i},null,null)),(e()(),Ps(16777216,null,null,1,null,ip)),Xi(4,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,rp)),Xi(6,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Is(7,0,null,null,0,"div",[],[[4,"width","em"],[4,"height","px"]],null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,sp)),Xi(9,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Is(10,0,null,null,1,"a",[["class","flex-1"],["target","_blank"],["title","View details about this layer"]],[[8,"href",4]],null,null,null,null)),(e()(),zs(11,null,[" "," "])),(e()(),Ps(16777216,null,null,1,null,op)),Xi(13,278528,null,0,Wa,[Cn,xn,mn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,4,0,!n.isLayerSelected()),e(t,6,0,n.isLayerSelected()),e(t,9,0,n.item.parentLayer||n.item.parentLayer_id),e(t,13,0,n.item.subLayers)},function(e,t){var n=t.component;e(t,7,0,n.level>1?n.level:0,1),e(t,10,0,fi(1,"/resources/layers/",n.item.id,"")),e(t,11,0,n.item.label)})}const lp={DETAILS:"details",LAYERS:"layers"};class up{constructor(){this.activeTab=lp.DETAILS,this.Tabs=lp}ngOnInit(){}}var hp=Vn({encapsulation:0,styles:[["[_nghost-%COMP%]{-webkit-box-flex:0;flex:0 1 23em;height:calc(50vw);overflow:hidden}.o-map-sidebar[_ngcontent-%COMP%]{padding:.5em .25em;border-left:1px solid #ddd;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:first-child{margin-left:.25em}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:not(.active){color:#999;cursor:pointer}"]],data:{}});function cp(e){return Gs(0,[(e()(),Is(0,0,null,null,17,"div",[["class","o-map-sidebar"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,12,"ul",[["class","nav nav-tabs"]],null,null,null,null,null)),(e()(),Is(2,0,null,null,5,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),Is(3,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==(r.activeTab=r.Tabs.DETAILS)&&i),i},null,null)),er(512,null,Va,qa,[mn,gn,Jt,en]),Xi(5,278528,null,0,Za,[Va],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Us(6,{active:0}),(e()(),zs(-1,null,[" Map Details "])),(e()(),Is(8,0,null,null,5,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),Is(9,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==(r.activeTab=r.Tabs.LAYERS)&&i),i},null,null)),er(512,null,Va,qa,[mn,gn,Jt,en]),Xi(11,278528,null,0,Za,[Va],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Us(12,{active:0}),(e()(),zs(-1,null,[" Layers "])),(e()(),Is(14,0,null,null,1,"gpmp-map-details",[],[[2,"isCollapsed",null]],null,null,Cd,dd)),Xi(15,770048,null,0,hd,[gl,mu],{data:[0,"data"],isCollapsed:[1,"isCollapsed"]},null),(e()(),Is(16,0,null,null,1,"gpmp-layer-list",[],[[2,"isCollapsed",null]],null,null,tp,qd)),Xi(17,770048,null,0,Dd,[gl],{data:[0,"data"],isCollapsed:[1,"isCollapsed"]},null)],function(e,t){var n=t.component,i=e(t,6,0,n.Tabs.DETAILS===n.activeTab);e(t,5,0,"nav-link",i);var r=e(t,12,0,n.Tabs.LAYERS===n.activeTab);e(t,11,0,"nav-link",r),e(t,15,0,n.data,n.Tabs.DETAILS!==n.activeTab),e(t,17,0,n.data,n.Tabs.LAYERS!==n.activeTab)},function(e,t){e(t,14,0,ji(t,15).hostCollapsed),e(t,16,0,ji(t,17).hostCollapsed)})}class dp{transform(e){if(!e||"string"!=typeof e||0===e.length)return e;let t=e,n=e.indexOf(":");return~n&&(t=e.substring(n+1)),"VCard"===t&&(t="Contact"),t}}var pp=Vn({encapsulation:0,styles:[["[_nghost-%COMP%]{position:relative;width:100%}.m-page-breadcrumbs__label[_ngcontent-%COMP%]{max-width:8em;overflow:hidden;display:inline-block;white-space:nowrap;vertical-align:bottom;text-overflow:ellipsis}@media (min-width:768px){.m-page-breadcrumbs__label[_ngcontent-%COMP%]{max-width:15em}.p-map-preview[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;min-height:20em}.p-map-preview[_ngcontent-%COMP%]   .o-map-sidebar[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 1 23em;height:calc(50vw);overflow:hidden}}@media (min-width:992px){.m-page-breadcrumbs__label[_ngcontent-%COMP%]{max-width:25em}}@media (min-width:1200px){.m-page-breadcrumbs__label[_ngcontent-%COMP%]{max-width:31em}}"]],data:{}});function fp(e){return Gs(0,[(e()(),Is(0,0,null,null,3,"li",[["class","d-none d-sm-inline-block"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,2,"a",[],[[8,"href",4]],null,null,null,null)),(e()(),zs(2,null,["",""])),js(128,3,new Array(2))],null,function(e,t){var n=t.component;e(t,1,0,fi(1,"/resources/",n.getTypeKey(),""));var i=function(e,t,n,i){if(Mt.isWrapped(i)){i=Mt.unwrap(i);const t=e.def.nodes[2].bindingIndex+0,n=Mt.unwrap(e.oldValues[t]);e.oldValues[t]=new Mt(n)}return i}(t,0,0,e(t,3,0,ji(t.parent,0),null==n.item?null:n.item.type));e(t,2,0,i)})}function mp(e){return Gs(0,[(e()(),Is(0,0,null,null,2,"li",[["class","d-none d-sm-inline-block"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,1,"a",[["class","m-page-breadcrumbs__label"]],[[8,"href",4]],null,null,null,null)),(e()(),zs(2,null,[""," "]))],null,function(e,t){var n=t.component;e(t,1,0,fi(2,"/resources/",n.getTypeKey(),"/",null==n.item?null:n.item.id,"")),e(t,2,0,null==n.item?null:n.item.label)})}function gp(e){return Gs(0,[(e()(),Is(0,0,null,null,2,"li",[["class","is-active"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,1,"a",[],null,null,null,null,null)),(e()(),zs(-1,null,["Map Preview"]))],null,null)}function _p(e){return Gs(0,[(e()(),Is(0,0,null,null,5,"div",[["class","u-pd--md flex-1"],["style","margin: 5% 20%;"]],null,null,null,null,null)),(e()(),Is(1,0,null,null,4,"div",[["class","m-message--error u-text--lg"]],null,null,null,null,null)),(e()(),Is(2,0,null,null,1,"div",[["class","t-text--bold"]],null,null,null,null,null)),(e()(),zs(-1,null,["Error"])),(e()(),Is(4,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),zs(5,null,["",""]))],null,function(e,t){e(t,5,0,t.component.error.message)})}function yp(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"gpmp-map",[],null,null,null,eh,Xu)),Xi(1,770048,null,0,Qu,[gl],{data:[0,"data"]},null)],function(e,t){e(t,1,0,t.component.data)},null)}function vp(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"gpmp-sidebar",[],null,null,null,cp,hp)),Xi(1,114688,null,0,up,[],{data:[0,"data"]},null)],function(e,t){e(t,1,0,t.component.data)},null)}function bp(e){return Gs(0,[(t=0,n=dp,i=[],tr(-1,t|=16,null,0,n,n,i)),(e()(),Is(1,0,null,null,12,"ul",[["class","m-page-breadcrumbs"]],null,null,null,null,null)),(e()(),Is(2,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),Is(3,0,null,null,1,"a",[["href","/"]],null,null,null,null,null)),(e()(),zs(-1,null,["Home"])),(e()(),Is(5,0,null,null,2,"li",[["class","d-none d-md-inline-block"]],null,null,null,null,null)),(e()(),Is(6,0,null,null,1,"a",[["href","/resources"]],null,null,null,null,null)),(e()(),zs(-1,null,["Resources"])),(e()(),Ps(16777216,null,null,1,null,fp)),Xi(9,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,mp)),Xi(11,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,gp)),Xi(13,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Is(14,0,null,null,6,"div",[["class","p-map-preview"]],null,null,null,null,null)),(e()(),Ps(16777216,null,null,1,null,_p)),Xi(16,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,yp)),Xi(18,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null),(e()(),Ps(16777216,null,null,1,null,vp)),Xi(20,16384,null,0,Ja,[Cn,xn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,9,0,n.item),e(t,11,0,n.item),e(t,13,0,n.item),e(t,16,0,n.error),e(t,18,0,!n.error),e(t,20,0,!n.error)},null);var t,n,i}function wp(e){return Gs(0,[(e()(),Is(0,0,null,null,1,"app-root",[],null,null,null,bp,pp)),Xi(1,245760,null,0,_u,[mu,gl],null,null)],function(e,t){e(t,1,0)},null)}var xp=Ii("app-root",_u,wp,{},{},[]),Tp=Yo(Oa,[_u],function(e){return function(e){const t={},n=[];let i=!1;for(let r=0;r<e.length;r++){const s=e[r];s.token===Me&&!0===s.value&&(i=!0),1073741824&s.flags&&n.push(s.token),s.index=r,t[Un(s.token)]=s}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:i}}([bi(512,qt,Gt,[[8,[xp]],[3,qt],Ht]),bi(5120,Or,Ls,[[3,Or]]),bi(4608,Ua,ja,[Or,[2,Ba]]),bi(5120,mr,Ss,[Jr]),bi(4608,zr,zr,[]),bi(5120,Sr,Er,[]),bi(5120,mn,Ts,[]),bi(5120,gn,Cs,[]),bi(4608,tc,nc,[Xa]),bi(6144,vt,null,[tc]),bi(4608,$h,Yh,[]),bi(5120,wh,function(e,t,n,i,r,s,o,a){return[new Hh(e,t,n),new ec(i),new Kh(r,s,o,a)]},[Xa,Jr,Ar,Xa,Xa,$h,Mr,[2,Jh]]),bi(4608,xh,xh,[wh,Jr]),bi(135680,Lh,Lh,[Xa]),bi(4608,Mh,Mh,[xh,Lh,Sr]),bi(6144,Qt,null,[Mh]),bi(6144,Ch,null,[Lh]),bi(4608,ns,ns,[Jr]),bi(4608,kc,kc,[]),bi(4608,Al,kl,[Xa,Ar,Pl]),bi(4608,Ml,Ml,[Al,Il]),bi(5120,wl,Dl,[]),bi(4608,xl,xl,[wl,Xa]),bi(5120,yl,function(e,t){return[e,new Tl(t)]},[Ml,xl]),bi(4608,Sl,Sl,[]),bi(6144,Ll,null,[Sl]),bi(4608,El,El,[Ll]),bi(6144,tl,null,[El]),bi(4608,el,Ol,[tl,De]),bi(4608,gl,gl,[el]),bi(4608,mu,mu,[]),bi(5120,Aa,ka,[gl]),bi(5120,ea.ItemService,Wl,[gl]),bi(5120,ea.ServiceService,$l,[gl]),bi(5120,ea.UtilsService,Yl,[gl]),bi(5120,ea.KGService,Kl,[gl]),bi(1073742336,Qa,Qa,[]),bi(1024,Lt,hc,[]),bi(1024,Cr,function(e){return[(t=e,yh("probe",bh),yh("coreTokens",Object.assign({},vh,(t||[]).reduce((e,t)=>(e[t.name]=t.token,e),{}))),()=>bh),()=>{ea.Config.configure(Qo);let e=window.GeoPlatform;e&&e.config&&ea.Config.configure(e.config)}];var t},[[2,us]]),bi(512,Lr,Lr,[[2,Cr]]),bi(131584,fs,fs,[Jr,Mr,De,Lt,qt,Lr]),bi(1073742336,Es,Es,[fs]),bi(1073742336,cc,cc,[[3,cc]]),bi(1073742336,od,od,[]),bi(1073742336,ad,ad,[]),bi(1073742336,Rl,Rl,[]),bi(1073742336,Nl,Nl,[]),bi(1073742336,Fl,Fl,[]),bi(1073742336,Oa,Oa,[]),bi(256,Me,!0,[]),bi(256,Pl,"XSRF-TOKEN",[]),bi(256,Il,"X-XSRF-TOKEN",[]),bi(256,Bl,Ma,[])])});Qo.production&&function(){if(Je)throw new Error("Cannot enable prod mode after platform setup.");$e=!1}(),uc().bootstrapModuleFactory(Tp).catch(e=>console.log(e))},zuR4:function(e,t,n){"use strict";var i=n("xTJ+"),r=n("HSsa"),s=n("CgaS"),o=n("SntB");function a(e){var t=new s(e),n=r(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var l=a(n("JEQr"));l.Axios=s,l.create=function(e){return a(o(l.defaults,e))},l.Cancel=n("endd"),l.CancelToken=n("jfS+"),l.isCancel=n("Lmem"),l.all=function(e){return Promise.all(e)},l.spread=n("DfZB"),e.exports=l,e.exports.default=l}},[[0,0]]]);